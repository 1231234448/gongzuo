1
00:00:00,986 --> 00:00:06,906
到目前为止MySQL数据库所支持的四种约束类型我们都已经讲过了

2
00:00:06,906 --> 00:00:07,306
是吧

3
00:00:07,306 --> 00:00:11,626
在MySQL当中它是不支持检查约束的

4
00:00:11,626 --> 00:00:12,986
所以这里我们就不讲解了

5
00:00:12,986 --> 00:00:17,946
那么我们之前在讲解MySQL当中这四种约束的时候

6
00:00:17,946 --> 00:00:23,226
添加约束我们都是在表事先已经创建好了以后

7
00:00:23,226 --> 00:00:26,946
采用修改表的方式来添加约束的

8
00:00:26,946 --> 00:00:27,386
对吧

9
00:00:27,386 --> 00:00:31,294
那么我们能不能在创建表的同时就添加约束呢

10
00:00:31,294 --> 00:00:32,538
< No Speech >

11
00:00:32,538 --> 00:00:38,098
这里我们就来说一下如何在创建表的时候就去添加约束

12
00:00:38,098 --> 00:00:41,778
好 我们先来看一下查询表当中的约束信息

13
00:00:41,778 --> 00:00:45,218
我们之前在看约束时都是通过NaviCat的工具来看的

14
00:00:45,218 --> 00:00:49,470
其实我们可以通过一个叫Show Keys From的这样的一个工具来看

15
00:00:49,470 --> 00:00:50,682
< No Speech >

16
00:00:50,682 --> 00:00:52,030
来查看

17
00:00:52,634 --> 00:00:55,422
这个约束信息啊 然后后面跟的是表明

18
00:00:55,422 --> 00:01:00,890
< No Speech >

19
00:01:00,890 --> 00:01:04,222
然后呢 比如说我要看这个ENP表当中的

20
00:01:05,178 --> 00:01:08,638
看它现在没有约束是空的 那我们再看一下

21
00:01:09,274 --> 00:01:11,582
Departments这个表当中

22
00:01:12,506 --> 00:01:18,590
是吧 这里就有约束信息了 我们看一下 这个格式看起来并不是很方便

23
00:01:18,590 --> 00:01:26,906
< No Speech >

24
00:01:26,906 --> 00:01:31,230
上面是它的列名table是department的表在这儿呢

25
00:01:31,230 --> 00:01:33,306
< No Speech >

26
00:01:33,306 --> 00:01:37,526
Unique 这个维新约束没有

27
00:01:37,526 --> 00:01:39,258
< No Speech >

28
00:01:39,258 --> 00:01:41,658
但是它是有prime有这个组件约束的

29
00:01:41,658 --> 00:01:42,654
这个看着非常的不错

30
00:01:43,514 --> 00:01:46,462
我先把字体调小一下,然后我们再调回来

31
00:01:46,462 --> 00:01:50,650
< No Speech >

32
00:01:50,650 --> 00:01:57,650
这么看是不是就方便了,看一下,table department这个表明,然后呢,unique约束没有

33
00:01:57,650 --> 00:02:01,982
key name有一个primary,有个主件约束

34
00:02:02,554 --> 00:02:05,114
ColumnName,谁有primary约束呢?

35
00:02:05,114 --> 00:02:08,030
primary约束,就主件约束是departmentid

36
00:02:08,030 --> 00:02:09,370
< No Speech >

37
00:02:09,370 --> 00:02:12,222
然后通过它我们就可以看到这个表当中

38
00:02:12,222 --> 00:02:15,066
< No Speech >

39
00:02:15,066 --> 00:02:18,386
所以说你看我们用这个show keys这个面的查看

40
00:02:18,386 --> 00:02:22,238
在他自带的客户端里看起来是非常的不方便的啊

41
00:02:22,238 --> 00:02:23,546
< No Speech >

42
00:02:23,546 --> 00:02:25,214
我们把字体再调整过来

43
00:02:25,214 --> 00:02:42,810
< No Speech >

44
00:02:42,810 --> 00:02:48,702
然后接下来我们看一下,如果我现在想在创建表的时候就去

45
00:02:48,702 --> 00:02:50,170
< No Speech >

46
00:02:50,170 --> 00:02:52,970
把这个约束都创建出来该怎么去做呢

47
00:02:52,970 --> 00:02:54,370
这里需要注意啊

48
00:02:54,370 --> 00:02:57,730
我们在创建这4种约束当中

49
00:02:57,730 --> 00:02:59,450
对于这个外建约束

50
00:02:59,450 --> 00:03:01,170
你是在创建表的时候

51
00:03:01,170 --> 00:03:02,610
一般情况下很能创建出来

52
00:03:02,610 --> 00:03:03,090
为什么

53
00:03:03,090 --> 00:03:05,770
除非你参照的那个表事先存在了可以

54
00:03:05,770 --> 00:03:08,010
如果你参照的那个表都不存在呢

55
00:03:08,010 --> 00:03:10,890
那你没有办法在创建表时去添加外建约束

56
00:03:10,890 --> 00:03:13,170
因为我们知道外建约束它是

57
00:03:13,170 --> 00:03:16,410
这个主要是完成保证一个参照完整性的

58
00:03:16,410 --> 00:03:20,410
你目标表和目标就目标表必须得存在

59
00:03:20,410 --> 00:03:23,010
它才能去定义这个参照性对不对

60
00:03:23,010 --> 00:03:24,890
好我们来看一个实例啊

61
00:03:24,890 --> 00:03:27,838
现在要求我们创建一个DEPTS表

62
00:03:28,730 --> 00:03:30,010
Departmental ID

63
00:03:30,010 --> 00:03:32,638
该列为主键且自动增长

64
00:03:32,638 --> 00:03:35,002
< No Speech >

65
00:03:35,002 --> 00:03:40,522
然后要求DepartmentName这个列不容名称,不允许重复

66
00:03:40,522 --> 00:03:44,350
然后LocationID这个列不能含有空值

67
00:03:45,050 --> 00:03:51,294
这是三个要求 那么对于这样的一个三个约束 我们在创建表的时候需要怎么来

68
00:03:51,294 --> 00:03:52,474
< No Speech >

69
00:03:52,474 --> 00:03:53,694
非常简单啊

70
00:03:53,694 --> 00:03:54,942
创建表的语句

71
00:03:54,942 --> 00:03:57,178
< No Speech >

72
00:03:57,178 --> 00:04:00,258
然后表明后面跟的仍然是列明类型

73
00:04:00,258 --> 00:04:02,978
只不过现在在类型后面直接给定约束

74
00:04:02,978 --> 00:04:05,978
比如说departmentid它是一个组件是吧

75
00:04:05,978 --> 00:04:06,622
那就是Trick Don't laugh

76
00:04:07,450 --> 00:04:08,730
Prime key不是主键吗?

77
00:04:08,730 --> 00:04:10,206
然后呢现在要求它是

78
00:04:11,130 --> 00:04:14,334
后面空格记得写out2下发现increment

79
00:04:14,334 --> 00:04:15,642
< No Speech >

80
00:04:15,642 --> 00:04:21,602
departmentid这个列就是具备组件约束了 而且它是一个自动增长的这样的一个组件列

81
00:04:21,602 --> 00:04:22,602
明白这意思吧?

82
00:04:22,602 --> 00:04:25,566
然后逗号第二个列,department的下方线Name

83
00:04:26,330 --> 00:04:27,678
这个列的类型

84
00:04:28,378 --> 00:04:30,378
然后要求这个列这么大

85
00:04:30,378 --> 00:04:32,378
我们看一下不允许有重复

86
00:04:32,378 --> 00:04:34,010
< No Speech >

87
00:04:34,010 --> 00:04:37,850
直接给一个unique就可以了 明白这意思吧 直接给列的后面

88
00:04:37,850 --> 00:04:42,090
类型后面给unique就表示这个列是具备一个非空约束了

89
00:04:42,090 --> 00:04:45,598
然后locationid就是这个位置的id 然后locationid就是这个位置的id

90
00:04:46,202 --> 00:04:48,254
int 类型再给一个 notenum

91
00:04:48,254 --> 00:04:49,434
< No Speech >

92
00:04:49,434 --> 00:04:51,454
要具备一个非空运

93
00:04:52,090 --> 00:04:53,918
好 那么接下来我们就把这个表

94
00:04:53,918 --> 00:04:56,698
< No Speech >

95
00:04:56,698 --> 00:05:00,158
首先呢,creator,创建表语句,creator

96
00:05:00,986 --> 00:05:06,462
然后表明叫DEPT DEPTS是吧

97
00:05:07,034 --> 00:05:14,514
在这个表当中有什么列呢?首先有一个department下滑线ID

98
00:05:14,514 --> 00:05:16,234
什么类型的呢?int类型

99
00:05:16,234 --> 00:05:19,114
有没有什么约束呢?有,它是一个组件约束

100
00:05:19,114 --> 00:05:22,074
那就是primary key,对吧

101
00:05:22,074 --> 00:05:25,954
然后这个列虽然是组件约束了,具有组件约束了

102
00:05:25,954 --> 00:05:27,474
它还得是一个自动增长的

103
00:05:27,474 --> 00:05:30,366
空格接着给out2下滑线

104
00:05:30,366 --> 00:05:34,330
< No Speech >

105
00:05:34,330 --> 00:05:35,610
对吧increment

106
00:05:35,610 --> 00:05:36,318
然后

107
00:05:37,114 --> 00:05:38,878
接下来第二个例,谁呢?

108
00:05:38,878 --> 00:05:41,274
< No Speech >

109
00:05:41,274 --> 00:05:46,046
下滑线 name 这个列呢,它的类型是var

110
00:05:46,046 --> 00:05:50,362
< No Speech >

111
00:05:50,362 --> 00:05:52,802
它要具备一个唯一性约束

112
00:05:52,802 --> 00:05:54,842
< No Speech >

113
00:05:54,842 --> 00:05:55,482
对吧

114
00:05:55,482 --> 00:05:56,222
在英语 Streetseekers

115
00:05:56,222 --> 00:05:57,722
< No Speech >

116
00:05:57,722 --> 00:06:01,482
第三个列location下滑线ID

117
00:06:01,482 --> 00:06:04,242
然后它是什么类型的呢?int类型的

118
00:06:04,242 --> 00:06:06,602
然后它具备什么样的一个约束呢?

119
00:06:06,602 --> 00:06:07,870
非空结束,那就是……

120
00:06:07,870 --> 00:06:09,722
< No Speech >

121
00:06:09,722 --> 00:06:11,486
看到了吗同学们 爱 直 行

122
00:06:11,486 --> 00:06:28,922
< No Speech >

123
00:06:28,922 --> 00:06:30,922
Location ID

124
00:06:30,922 --> 00:06:38,010
< No Speech >

125
00:06:38,010 --> 00:06:40,730
Increment Department Name

126
00:06:40,730 --> 00:06:42,810
< No Speech >

127
00:06:42,810 --> 00:06:44,250
noten 呢

128
00:06:44,250 --> 00:06:46,394
< No Speech >

129
00:06:46,394 --> 00:06:49,994
Location ID印子没有给空格

130
00:06:49,994 --> 00:06:51,034
< No Speech >

131
00:06:51,034 --> 00:06:53,714
加一个空格 not null 执行

132
00:06:53,714 --> 00:06:54,874
Core OK 看到了吗

133
00:06:54,874 --> 00:06:58,994
你没有给空格 location id 跟 int 连到一起了

134
00:06:59,034 --> 00:06:59,714
明白意思吧

135
00:06:59,714 --> 00:07:01,034
所以它报缺少类型

136
00:07:01,274 --> 00:07:02,594
缺少类型 语法错误

137
00:07:02,914 --> 00:07:05,274
事实上我们是没有给空格没有分开

138
00:07:05,274 --> 00:07:08,074
好 这样我们这个表就创建出来了

139
00:07:08,114 --> 00:07:11,234
我们再去 show keys from

140
00:07:12,154 --> 00:07:15,514
这个表我们叫 dpts 对吧

141
00:07:15,634 --> 00:07:16,354
看一下

142
00:07:16,354 --> 00:07:20,350
好 我们把这个字体再调小一些

143
00:07:20,350 --> 00:07:21,690
< No Speech >

144
00:07:21,690 --> 00:07:23,490
这样看的就清楚了

145
00:07:23,490 --> 00:07:28,890
首先这里DEPTS这个表里有一个Primary Key组件约束

146
00:07:28,890 --> 00:07:31,690
组件约束是Department小型ID

147
00:07:31,690 --> 00:07:35,570
然后DEPT还有一个Department Name具备一个V型约束

148
00:07:35,570 --> 00:07:38,850
然后你看这同时还有一个非空约束

149
00:07:38,850 --> 00:07:43,290
它是具备一个V型约束,而不允许有空值

150
00:07:43,290 --> 00:07:46,570
我们看一下我们给的是Location ID

151
00:07:46,570 --> 00:07:49,170
那么这个Location ID现在还没有查看到

152
00:07:49,170 --> 00:07:51,170
我们来这里查看吧

153
00:07:51,170 --> 00:07:53,150
刷新

154
00:07:53,150 --> 00:07:55,098
< No Speech >

155
00:07:55,098 --> 00:07:56,898
它,然后设计表

156
00:07:56,898 --> 00:07:58,234
< No Speech >

157
00:07:58,234 --> 00:08:02,194
看一下 组建约束 然后自动递征没有问题

158
00:08:02,194 --> 00:08:05,514
然后department name具备一个微型约束

159
00:08:05,514 --> 00:08:08,714
看所以department name然后约束名没有给

160
00:08:08,714 --> 00:08:11,354
没有给他默认的就用列名作为约束名了

161
00:08:11,354 --> 00:08:13,514
明白这意思吧 微型约束

162
00:08:13,514 --> 00:08:15,914
然后接下来是locationid非空约束

163
00:08:15,914 --> 00:08:17,714
Ratio空值的对钩去掉了

164
00:08:17,714 --> 00:08:19,234
说明它是具备非空约束的

165
00:08:19,234 --> 00:08:24,234
那么这样我们就通过创建表示的这样的一个语句

166
00:08:24,234 --> 00:08:28,434
把这几个约束都已经添加到了箱的列当中了

167
00:08:28,434 --> 00:08:32,034
好同学们那么以上我们就讲解了

168
00:08:32,034 --> 00:08:36,274
如何通过创建表示的这个键表语句

169
00:08:36,274 --> 00:08:38,394
完成一些约束的添加

170
00:08:38,394 --> 00:08:41,182
好同学们 那我们这节课就到这

