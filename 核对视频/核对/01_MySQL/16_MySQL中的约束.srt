1
00:00:00,954 --> 00:00:04,286
这节课我们再来讲解一下MySQL中的约束

2
00:00:05,210 --> 00:00:10,850
那么这里同学们需要注意,这个约束呢,不仅仅是MySQL数据库当中的一个特点

3
00:00:10,850 --> 00:00:15,250
它是所有关系型数据库都具备的一种技术

4
00:00:15,250 --> 00:00:18,210
那么什么是约束呢?这里我们要先了解

5
00:00:19,162 --> 00:00:26,078
约束啊，其实我们可以理解为就是数据库提供的一种数据校验的方式

6
00:00:26,586 --> 00:00:34,586
我们通过定义约束来决定哪些数据是我们可以添加的,哪些数据是不能添加的

7
00:00:34,586 --> 00:00:38,586
我们可以通过约束来完成对数据的这样的校验

8
00:00:38,586 --> 00:00:42,586
那么在关系型数据库当中,它的约数一共有五种

9
00:00:42,586 --> 00:00:45,054
分别是主件约数(Primary Key) PK

10
00:00:45,054 --> 00:00:46,874
外键约束(Foreign Key) FK

11
00:00:46,874 --> 00:00:48,510
唯一性约束(Unique)

12
00:00:49,050 --> 00:00:52,126
然后非空约束(Not Null)和检查约束

13
00:00:52,126 --> 00:00:53,306
检查约束(Check)

14
00:00:53,306 --> 00:00:56,946
那我们分别来看一下这五种约束分别表示什么含义

15
00:00:56,946 --> 00:00:58,590
首先,主键约束(Primary Key) PK

16
00:00:58,590 --> 00:01:00,186
Primary Key,它呢

17
00:01:00,186 --> 00:01:08,638
它的特点是不允许有空值,不允许有重复值出现,它的作用是保证数据的唯一性

18
00:01:09,626 --> 00:01:16,026
什么叫数据的唯一性呢?比如说在这个表当中我有很多条数据

19
00:01:16,026 --> 00:01:19,454
那么我为了保证让这些数据不重复出现

20
00:01:19,454 --> 00:01:22,906
怎么办呢？我们是不是可以

21
00:01:22,906 --> 00:01:25,306
通过一个ID来标示出来

22
00:01:25,306 --> 00:01:30,106
也就是说我认为如果ID相同或者是序号相同

23
00:01:30,106 --> 00:01:32,346
那么这条数据就是重复数据。

24
00:01:33,242 --> 00:01:35,646
如果我是这样的一个需求,那该怎么做呢?

25
00:01:36,634 --> 00:01:39,390
我是不是可以，为序号这个列添加一个主键约束。

26
00:01:40,314 --> 00:01:47,794
对吧 一旦你的数据当中主键就是序号这一列有重复值出现了

27
00:01:47,794 --> 00:01:51,198
那么这个数据将无法添加到这个表当中

28
00:01:51,738 --> 00:01:57,534
或者是你的这个数据没有序号,它也无法添加到这个表当中

29
00:01:57,534 --> 00:01:58,842
这相当于

30
00:01:58,842 --> 00:02:02,402
开启了一个数据校验,对吧?这是主键约束(Primary Key) PK

31
00:02:02,402 --> 00:02:05,242
好,我们再来看外键约束(Foreign Key) FK

32
00:02:05,242 --> 00:02:11,082
什么叫外键约束(Foreign Key) FK 呢?它的特点是允许有空值,允许有重复

33
00:02:11,082 --> 00:02:17,402
但是如果有值的话,这个值必须是参照某个表当中的某个列的值

34
00:02:17,402 --> 00:02:19,562
而且这个列还必须得是一个主键列

35
00:02:19,562 --> 00:02:23,422
它主要的作用是保证数据的参照完整性

36
00:02:23,422 --> 00:02:26,746
给大家举个例子

37
00:02:26,746 --> 00:02:28,734
现在我有一个这个

38
00:02:28,734 --> 00:02:30,170
有一个订单表

39
00:02:30,170 --> 00:02:31,870
有一个商品表

40
00:02:31,870 --> 00:02:36,698
那么我们知道商品它是属于订单当中的

41
00:02:36,698 --> 00:02:39,498
每个订单当中包含了哪些商品

42
00:02:39,498 --> 00:02:42,298
那么现在对于我商品表而言

43
00:02:42,298 --> 00:02:45,378
我这个商品属于哪个订单的

44
00:02:45,378 --> 00:02:46,898
我是不是得要标识一下

45
00:02:46,898 --> 00:02:47,258
对吧

46
00:02:47,258 --> 00:02:48,898
比如说我订单ID是1

47
00:02:48,898 --> 00:02:50,018
订单ID是2

48
00:02:50,018 --> 00:02:51,098
订单ID是3

49
00:02:51,098 --> 00:02:52,938
那我这两个商品是订单ID1的

50
00:02:52,938 --> 00:02:53,758
那就得1

51
00:02:53,758 --> 00:02:55,034
1

52
00:02:55,034 --> 00:02:59,714
对吧同学们 那么我的这个值能不能是3呢 能不能是5呢

53
00:02:59,714 --> 00:03:03,486
如果在订单表当中没有订单的ID是3和5的

54
00:03:04,442 --> 00:03:06,442
数据这条商品信息肯定不

55
00:03:06,442 --> 00:03:08,730
允许3或者5的

56
00:03:08,730 --> 00:03:13,610
因为我都没有订单编号为3的,没有订单编号为5的这两套数据

57
00:03:13,610 --> 00:03:17,810
那我这个商品怎么会属于不存在的订单当中的呢

58
00:03:17,810 --> 00:03:21,086
对吧,所以为了防止这样的现象出现

59
00:03:21,086 --> 00:03:22,970
给订单的

60
00:03:22,970 --> 00:03:26,370
记录它是属于哪个商品表当中

61
00:03:26,370 --> 00:03:29,050
记录这条商品是属于哪个订单的

62
00:03:29,050 --> 00:03:30,250
这样这个列当中

63
00:03:30,250 --> 00:03:31,710
添加一个拜见约束

64
00:03:32,442 --> 00:03:37,242
明白吧?然后这个外键约束它如果有值的话

65
00:03:37,242 --> 00:03:42,110
这个值必须要参照于订单表当中的订单ID这一列的值

66
00:03:43,034 --> 00:03:48,234
如果订单ID有值了,那么我这里出现的值是必须是这个范围内的

67
00:03:48,234 --> 00:03:54,238
如果这个值不是订单ID所规定的范围内的,那这个数据是不允许插入到商品表当中的

68
00:03:54,238 --> 00:03:55,482


69
00:03:55,482 --> 00:04:01,790
明白这意思吧?那么后面关于外键约束我们会详细的讲解,这里大家先有一个直观的认识

70
00:04:02,522 --> 00:04:06,562
那么我们再来看什么是唯一性约束(Unique)呢?

71
00:04:06,562 --> 00:04:13,246
唯一性约束(Unique)是相同值只能出现一次,不能出现多次

72
00:04:13,946 --> 00:04:18,866
是吧 唯一的嘛 然后允许为多个列添加唯一性约束

73
00:04:18,866 --> 00:04:22,786
也就是说你一个表当中啊 可以有多个列都具备唯一性约束的啊

74
00:04:22,786 --> 00:04:27,774
然后保证数据的唯一性 这是唯一性约束的一个作用啊

75
00:04:28,410 --> 00:04:31,930
比如说现在你在某个列上添加了唯一性约束(Unique)

76
00:04:31,930 --> 00:04:33,410
那么你在添加数据时

77
00:04:33,410 --> 00:04:39,130
如果这条数据的值和表当中的这个字段的值有相同的了

78
00:04:39,130 --> 00:04:40,574
那么这条数据将无法

79
00:04:40,574 --> 00:04:41,882
添加到表当中

80
00:04:41,882 --> 00:04:43,882
明白这意思吧?这是唯一性约束(Unique)

81
00:04:43,882 --> 00:04:46,622
OK,我们再来看非空约束(Not Null)

82
00:04:47,514 --> 00:04:52,874
什么叫非空约束(Not Null)呢?就是列中的值不能有空值,允许有重复值

83
00:04:52,874 --> 00:04:55,434
你重复不要紧,但是不能有空值出现

84
00:04:55,434 --> 00:05:00,990
允许为多个列添加非空约束(Not Null),它的作用是保证数据没有空值

85
00:05:01,946 --> 00:05:03,706
这是非空约束(Not Null)的一个特点

86
00:05:03,706 --> 00:05:04,906
那么同学看一下

87
00:05:04,906 --> 00:05:07,986
其实我们的主键约束(Primary Key) PK

88
00:05:07,986 --> 00:05:11,678
其实是不是就是唯一性约束(Unique)跟非空约束(Not Null)的一个复合啊?

89
00:05:12,346 --> 00:05:13,786
它不允许有空值

90
00:05:13,786 --> 00:05:15,186
这不就非空约束约定的嘛

91
00:05:15,186 --> 00:05:15,546
对吧

92
00:05:15,546 --> 00:05:17,066
然后不允许重复出现

93
00:05:17,066 --> 00:05:18,586
这不就唯一性约束约定的嘛

94
00:05:18,586 --> 00:05:22,462
所以主键约束其实就是主键约束跟非空约束的一个复合性约束

95
00:05:22,462 --> 00:05:24,474


96
00:05:24,474 --> 00:05:26,714
然后我们再来看检查约束(Check)

97
00:05:27,226 --> 00:05:28,746
什么是检查约束(Check)呢?

98
00:05:28,746 --> 00:05:30,586
就是我们用户可以自定义

99
00:05:30,586 --> 00:05:32,026
就是我们数据库的使用者

100
00:05:32,026 --> 00:05:33,662
可以自定义约束条件

101
00:05:34,426 --> 00:05:37,626
然后保证数据满足自定义条件的约束

102
00:05:37,626 --> 00:05:39,834
如果你这个

103
00:05:39,834 --> 00:05:43,794
数据插入时不符合你的自定义约束的条件

104
00:05:43,794 --> 00:05:46,114
那么这个数据将无法插入到数据库当中

105
00:05:46,114 --> 00:05:47,514
无法插入到表当中

106
00:05:47,514 --> 00:05:48,834
那么这里我们需要注意

107
00:05:48,834 --> 00:05:51,674
MySQL目前是不支持检查约束的

108
00:05:51,674 --> 00:05:53,834
MySQL是不支持检查约束的

109
00:05:53,834 --> 00:05:54,754
这个我们需要注意

110
00:05:54,754 --> 00:05:55,394
OK

111
00:05:55,394 --> 00:05:55,794
好

112
00:05:55,794 --> 00:05:57,954
我们再来看一下约束概述

113
00:05:57,954 --> 00:06:02,874
数据库约束是对表中的数据进行进一步的限制

114
00:06:02,874 --> 00:06:07,754
保证数据的正确性有效性和完整性的这样的一个方式

115
00:06:07,754 --> 00:06:10,206
那我们说了它分为主键约束(Primary Key) PK

116
00:06:11,002 --> 00:06:12,670
我们也称之为PK

117
00:06:13,594 --> 00:06:17,154
那么主键约束是我们使用最频繁的一个约束

118
00:06:17,154 --> 00:06:23,274
在设计表时一般情况下都会要求表当中的设置一个组件的

119
00:06:23,274 --> 00:06:26,834
一般表当中都会包含一个主键约束的

120
00:06:27,418 --> 00:06:30,778
主键是表当中的一个特殊字段

121
00:06:30,778 --> 00:06:34,258
该字段唯一标识该表当中的每一条信息

122
00:06:34,258 --> 00:06:36,258
那么这个组件的作用

123
00:06:36,258 --> 00:06:38,978
其实哪个列具备了主键约束了

124
00:06:38,978 --> 00:06:40,898
那么哪个列就是一个主键列

125
00:06:40,898 --> 00:06:42,458
它的作用是什么

126
00:06:42,458 --> 00:06:45,218
是来标识出每一条数据的一个唯一性的

127
00:06:45,218 --> 00:06:50,618
比如说学生信息当中的学生信息表当中的学号就是唯一的

128
00:06:50,618 --> 00:06:54,018
我们是通过学号来区分不同的学生信息的

129
00:06:54,018 --> 00:06:57,378
那么这条数据这个列的值肯定是不允许有重复的

130
00:06:57,378 --> 00:06:58,978
必须要保证它的唯一性的

131
00:06:58,978 --> 00:07:01,182
对不对 这是主键约束的一个特点

132
00:07:01,850 --> 00:07:03,530
我们再来看外键约束(Foreign Key) FK

133
00:07:03,530 --> 00:07:06,770
外键约束(Foreign Key)，简称FK

134
00:07:06,770 --> 00:07:10,170
那么外键约束经常和主键约束一起使用

135
00:07:10,170 --> 00:07:11,810
使用来保证数据的一致性

136
00:07:11,810 --> 00:07:14,530
所谓的一致性就是我这个表里的数据

137
00:07:14,530 --> 00:07:17,450
它要参照于另一个表当中的这个列的值

138
00:07:17,450 --> 00:07:20,010
如果这个值并不是另一个表当中的列的值

139
00:07:20,010 --> 00:07:21,450
那么这个数据就是非法的

140
00:07:21,450 --> 00:07:22,846
这就是外键约束(Foreign Key) FK

141
00:07:22,846 --> 00:07:24,122


142
00:07:24,122 --> 00:07:27,202
好,我们再来看唯一性约束(Unique)

143
00:07:27,202 --> 00:07:30,722
唯一性约束与主键约束有一个相似的地方

144
00:07:30,722 --> 00:07:34,002
就是它能够确保列的值的唯一性

145
00:07:34,002 --> 00:07:36,002
与主键约束不同的是什么呢?

146
00:07:36,002 --> 00:07:38,522
唯一性约束在一个表当中可以有多个

147
00:07:38,522 --> 00:07:41,534
并且设置唯一约束的列是允许有空值的

148
00:07:42,074 --> 00:07:45,182
唯一性约束是允许有空值的 明白这意思吧

149
00:07:46,106 --> 00:07:49,866
OK 然后我们再来看一下非空约束(Not Null)

150
00:07:49,866 --> 00:07:51,518
非空约数就很好理解了

151
00:07:51,518 --> 00:07:53,018
非空约束用来

152
00:07:53,018 --> 00:07:55,578
约束表当中的字段不能为空的

153
00:07:55,578 --> 00:07:58,258
也就是说你为哪一个列添加非空约束了

154
00:07:58,258 --> 00:08:00,498
那么这个列的值就不能还有空的

155
00:08:00,498 --> 00:08:02,218
不能还有空必须都有值的

156
00:08:02,218 --> 00:08:02,818
明白这次吧

157
00:08:02,818 --> 00:08:03,698
好

158
00:08:03,698 --> 00:08:05,258
检查约束check

159
00:08:05,258 --> 00:08:08,098
检查约束也称之为用户自定义约束

160
00:08:08,098 --> 00:08:12,178
因为我们这里是可以自己给这个约束添加约束条件的

161
00:08:12,178 --> 00:08:12,538
对吧

162
00:08:12,538 --> 00:08:18,818
是用来检查这个数据表当中字段值是否有效的一个手段

163
00:08:18,818 --> 00:08:21,534
但是目前MySQL数据故事不支持检查约束

164
00:08:21,534 --> 00:08:23,066


165
00:08:23,066 --> 00:08:32,446
好,那我们来看一下这节课的实时效果反馈,如下对主键约束描述正确的是

166
00:08:32,446 --> 00:08:34,330
A 允许有重复出现，不能有空值

167
00:08:34,330 --> 00:08:37,278
B 不允许有重复出现，但可以有空值

168
00:08:37,882 --> 00:08:39,390
C 不允许有重复出现，不能有空值

169
00:08:39,390 --> 00:08:40,986


170
00:08:40,986 --> 00:08:43,358
D 允许有重复，允许有空值

171
00:08:43,358 --> 00:08:45,626


172
00:08:45,626 --> 00:08:47,102
那么大家想一下这道题的标准0答案

173
00:08:47,102 --> 00:08:48,154
应该时哪一个啊

174
00:08:48,154 --> 00:08:50,274
很显然是C嘛,对吧?

175
00:08:50,274 --> 00:08:54,078
主键约束是不允许有重复出现，不能有空值

176
00:08:55,034 --> 00:08:56,766
好 我们再来看第二题

177
00:08:56,766 --> 00:08:57,850


178
00:08:57,850 --> 00:09:01,246
如下对外界约束描述正确的是

179
00:09:01,786 --> 00:09:03,266
A 不允许重复，

180
00:09:03,266 --> 00:09:04,478
不允许有空值

181
00:09:04,478 --> 00:09:08,282
B 不允许重复，允许有空值

182
00:09:08,282 --> 00:09:13,402
C 允许有重复，不允许有空值,D 允许有重复，允许有空值

183
00:09:13,402 --> 00:09:15,722
那么这四个答案当中哪个是正确的呢?

184
00:09:15,722 --> 00:09:20,002
我们之前说过在外键约束当中,你可以没有值

185
00:09:20,002 --> 00:09:22,882
你也可以有重复的,但是你有值了

186
00:09:22,882 --> 00:09:25,802
这个值一定是参照于另一个表当中的组件的值

187
00:09:25,802 --> 00:09:27,882
你不能超越它的范围,对不对?

188
00:09:27,882 --> 00:09:32,762
那么说明外键它是允许有重复的,而且外键也允许有空值的

189
00:09:32,762 --> 00:09:35,166
明白这意思吧?所以这道题的答案应该是谁呢?

190
00:09:35,166 --> 00:09:36,794
是不是D啊

191
00:09:36,794 --> 00:09:39,870
好 我们来看一下答案 第一道题的答案是B

192
00:09:39,870 --> 00:09:42,842


193
00:09:42,842 --> 00:09:44,798
不对不对啊这个应该是C

194
00:09:44,798 --> 00:09:47,386


195
00:09:47,386 --> 00:09:48,702
是吧 主键约束

196
00:09:49,658 --> 00:09:54,418
重复出现不能有空值 第一题的答案是C 第二题的答案是D

197
00:09:54,418 --> 00:09:57,246
明白了吧 好 同学们 那么这节课讲了

198
00:09:57,946 --> 00:10:00,386
这个MySQL数据库当中的约数

199
00:10:00,386 --> 00:10:01,726
好,那我们这节课就到这

