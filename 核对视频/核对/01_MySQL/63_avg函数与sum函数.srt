1
00:00:00,922 --> 00:00:06,402
上几课我们介绍了什么是聚合函数以及聚合函数的特点

2
00:00:06,402 --> 00:00:10,322
那么这几课我们就来看一下聚合函数的使用

3
00:00:10,322 --> 00:00:13,054
我们先来讲解一下聚合函数当中的特点

4
00:00:13,054 --> 00:00:15,290
< No Speech >

5
00:00:15,290 --> 00:00:23,210
AVG这个函数的作用是来对分组数据求平均值运算的,或者叫做平均值运算的

6
00:00:23,210 --> 00:00:31,326
LG的类型只能是数字类型,如果你给它一个字符串类型,AVG在去做平均值运算时

7
00:00:31,326 --> 00:00:32,410
< No Speech >

8
00:00:32,410 --> 00:00:35,210
只要类型不匹配的它返回的值都是0

9
00:00:35,210 --> 00:00:37,598
它无法去做这样参数的一个分析

10
00:00:37,598 --> 00:00:38,906
< No Speech >

11
00:00:38,906 --> 00:00:40,186
明白这些吧同学们

12
00:00:40,890 --> 00:00:43,130
那么这是AVG函数的作用

13
00:00:43,130 --> 00:00:44,770
还有一个函数叫sum

14
00:00:44,770 --> 00:00:46,290
sum函数比较简单了

15
00:00:46,290 --> 00:00:49,050
它的作用是对分组数据求和的

16
00:00:49,050 --> 00:00:51,890
那么参数类型只能是数字类型

17
00:00:51,890 --> 00:00:52,530
同样的道理

18
00:00:52,530 --> 00:00:53,490
如果类型不匹配

19
00:00:53,490 --> 00:00:54,526
它仍然会返回0

20
00:00:54,526 --> 00:00:58,362
< No Speech >

21
00:00:58,362 --> 00:01:00,542
我们现在Select,然后From

22
00:01:00,542 --> 00:01:01,594
< No Speech >

23
00:01:01,594 --> 00:01:02,954
Apply it,对吧

24
00:01:02,954 --> 00:01:04,834
我现在要去查所有的员工

25
00:01:04,834 --> 00:01:07,114
对所有的员工我们用avg

26
00:01:07,114 --> 00:01:08,674
然后呢

27
00:01:08,674 --> 00:01:10,794
这是第一个参数是distinct的

28
00:01:10,794 --> 00:01:11,034
是吧

29
00:01:11,034 --> 00:01:11,994
后面不用加逗号

30
00:01:11,994 --> 00:01:13,514
直接写distinct的关键字

31
00:01:13,514 --> 00:01:15,274
然后后面写你要过滤的列就可以

32
00:01:15,274 --> 00:01:16,794
那么如果你不需要过滤什么

33
00:01:16,794 --> 00:01:18,354
那这个distinct是可以去掉的

34
00:01:18,354 --> 00:01:19,034
明白这一次吧

35
00:01:19,034 --> 00:01:19,474
然后呢

36
00:01:19,474 --> 00:01:21,794
比如说我这给一个lastname

37
00:01:21,794 --> 00:01:26,354
我要对lastname去做avg的一个平均值的处理运行

38
00:01:26,794 --> 00:01:28,074
看返回0

39
00:01:28,794 --> 00:01:30,194
lastname是字符串类型

40
00:01:30,194 --> 00:01:34,114
他没有办法去做字符串的一个平均值的运算

41
00:01:34,114 --> 00:01:34,914
明白这一次吧

42
00:01:34,914 --> 00:01:36,834
那么如果我这给一个salary

43
00:01:36,834 --> 00:01:38,674
这是可以的

44
00:01:38,674 --> 00:01:39,234
这是什么意思

45
00:01:39,234 --> 00:01:40,954
这是查所有员工

46
00:01:40,954 --> 00:01:44,394
并且对所有员工的薪水去做一个平均值的运算

47
00:01:44,394 --> 00:01:44,834
对吧

48
00:01:44,834 --> 00:01:46,394
那么在整个语句当中

49
00:01:46,394 --> 00:01:47,834
我没有创建分组

50
00:01:47,834 --> 00:01:48,834
没有创建分组

51
00:01:48,834 --> 00:01:52,554
那他会把查询到的整个结果集作为一个分组去看待

52
00:01:52,554 --> 00:01:54,714
并且在这一个大的分组当中

53
00:01:54,714 --> 00:01:58,994
去通过avg对分组当中的salary去做求知运算处理

54
00:01:58,994 --> 00:02:00,554
能明白我同学们

55
00:02:00,554 --> 00:02:01,714
运行

56
00:02:01,714 --> 00:02:05,034
看这是所有员工的一个平均薪水

57
00:02:05,034 --> 00:02:05,554
好

58
00:02:05,554 --> 00:02:06,394
这是avg

59
00:02:06,394 --> 00:02:07,714
那如果是sum函数

60
00:02:07,714 --> 00:02:10,194
比如说我这也给一个lastname

61
00:02:10,194 --> 00:02:12,434
我们对字符串去做sum运行

62
00:02:12,434 --> 00:02:13,674
你看返回的是0

63
00:02:13,674 --> 00:02:14,634
只要返回是0

64
00:02:14,634 --> 00:02:19,114
说明他的类型是无法做求和或者是用聚和函数来处理的

65
00:02:19,114 --> 00:02:19,754
明白这意思吧

66
00:02:19,754 --> 00:02:21,554
如果我这给个salary

67
00:02:21,554 --> 00:02:23,514
这是可以的

68
00:02:23,514 --> 00:02:24,634
这表示什么含义

69
00:02:24,634 --> 00:02:27,074
查询员工表当中的所有的数据

70
00:02:27,074 --> 00:02:29,754
这个所有的数据它就是一个大组

71
00:02:29,754 --> 00:02:31,234
只要我们用聚和函数时

72
00:02:31,234 --> 00:02:34,274
同学们脑子里一定要想到分组的概念

73
00:02:34,274 --> 00:02:35,954
那就是一个大组

74
00:02:35,954 --> 00:02:40,994
对这个大组当中的salary这个薪水去做求和运算

75
00:02:40,994 --> 00:02:45,074
那它返回的就是所有员工的薪水的总和

76
00:02:45,074 --> 00:02:46,194
明白这意思吧

77
00:02:46,194 --> 00:02:47,114
运行

78
00:02:47,114 --> 00:02:47,714
看到了吗

79
00:02:47,714 --> 00:02:48,394
是这些

80
00:02:48,394 --> 00:02:50,834
这是这个sum函数的一个使用

81
00:02:50,834 --> 00:02:51,594
比较好理解

82
00:02:51,594 --> 00:02:52,314
好

83
00:02:52,314 --> 00:02:53,634
我们来看一个失利

84
00:02:53,634 --> 00:03:02,834
失利要求计算员工表当中工作编号含有REP的工作岗位的平均薪水与薪水总和

85
00:03:03,706 --> 00:03:06,866
那么我们先不考虑他要用聚合函数做什么

86
00:03:06,866 --> 00:03:08,386
我们先看他要什么数据

87
00:03:08,426 --> 00:03:10,986
他要的数据是工作编号

88
00:03:10,986 --> 00:03:11,866
工作编号是谁

89
00:03:11,866 --> 00:03:13,506
Job ID

90
00:03:13,506 --> 00:03:16,026
Job ID还有REP的

91
00:03:16,026 --> 00:03:17,106
含有REP

92
00:03:17,106 --> 00:03:21,626
我们是不是得用like去做一个模糊查询

93
00:03:21,626 --> 00:03:22,786
对不对

94
00:03:22,786 --> 00:03:25,146
然后拿到这些结果集以后

95
00:03:25,146 --> 00:03:28,066
对这个结果集再去求平均薪水跟薪水

96
00:03:28,066 --> 00:03:28,666
总和

97
00:03:29,186 --> 00:03:29,626
对吧

98
00:03:29,626 --> 00:03:30,986
那就是在投影后面

99
00:03:30,986 --> 00:03:33,426
在slack的后面加AVG跟sum不就可以了

100
00:03:33,426 --> 00:03:33,946
对吧

101
00:03:33,946 --> 00:03:34,986
OK

102
00:03:34,986 --> 00:03:35,466
好

103
00:03:35,466 --> 00:03:37,826
我们先来查到我们所关心的数据

104
00:03:37,826 --> 00:03:40,146
select

105
00:03:40,146 --> 00:03:41,986
然后from

106
00:03:41,986 --> 00:03:43,146
from什么呢

107
00:03:43,146 --> 00:03:43,826
And play

108
00:03:43,826 --> 00:03:45,946
< No Speech >

109
00:03:45,946 --> 00:03:49,426
然后我们可以起个别名这是可以的

110
00:03:49,426 --> 00:03:53,706
然后where一点lastname不是lastname是

111
00:03:53,706 --> 00:03:59,026
这个jobid是吧一点jobid然后like

112
00:03:59,066 --> 00:04:00,306
jobid是字符串类型的

113
00:04:00,306 --> 00:04:00,866
是吧

114
00:04:00,906 --> 00:04:05,386
然后含有rep的工作岗位

115
00:04:05,426 --> 00:04:07,506
那么查到他以后干嘛

116
00:04:07,506 --> 00:04:11,146
要求这个结果集当中这个结果集一大组

117
00:04:11,506 --> 00:04:11,946
是吧

118
00:04:11,946 --> 00:04:13,026
我们没有创建分组

119
00:04:13,226 --> 00:04:14,666
所以我们拿到的就是一个大组

120
00:04:14,666 --> 00:04:17,626
在一个大组当中的薪水平均薪水

121
00:04:17,626 --> 00:04:19,106
以及薪水的总和是吧

122
00:04:19,106 --> 00:04:21,066
那么求平均薪水那就是AVG

123
00:04:21,066 --> 00:04:22,866
对吧

124
00:04:22,866 --> 00:04:24,026
没有什么disting的

125
00:04:24,026 --> 00:04:25,666
OK

126
00:04:25,666 --> 00:04:26,506
然后这里是什么

127
00:04:26,506 --> 00:04:27,586
Salary

128
00:04:27,586 --> 00:04:30,302
然后逗号算

129
00:04:31,002 --> 00:04:32,482
然后呢 再见

130
00:04:33,370 --> 00:04:35,650
是吧或者是一点 salary

131
00:04:35,690 --> 00:04:36,650
这也是可以的

132
00:04:37,210 --> 00:04:37,770
明白这些是吧

133
00:04:37,770 --> 00:04:38,970
同学们哎运行

134
00:04:39,130 --> 00:04:40,210
好我们可以看到

135
00:04:40,250 --> 00:04:42,010
这就是平均薪水

136
00:04:42,010 --> 00:04:43,450
这就是薪水总和

137
00:04:43,490 --> 00:04:45,410
REP的还有部门ID

138
00:04:45,450 --> 00:04:46,890
Job ID不是部门ID

139
00:04:46,890 --> 00:04:47,930
是工作编号

140
00:04:47,930 --> 00:04:48,970
还有REP的

141
00:04:49,010 --> 00:04:51,410
这个结果集当中的平均薪水

142
00:04:51,410 --> 00:04:52,570
以及薪水总和

143
00:04:52,690 --> 00:04:55,170
啊这就是分组或者叫聚合

144
00:04:55,170 --> 00:04:56,210
函数的一个使用

145
00:04:56,450 --> 00:04:57,210
明白了同学们

146
00:04:57,210 --> 00:04:58,570
我们脑袋里一定要想到

147
00:04:58,610 --> 00:05:00,410
它是作用在数据分组当中的

148
00:05:00,410 --> 00:05:01,810
如果你没有去

149
00:05:01,810 --> 00:05:04,610
用其他的子据创建分组的话

150
00:05:04,610 --> 00:05:05,930
那么你当前查到的

151
00:05:05,930 --> 00:05:07,570
这个结果集就是一个大组

152
00:05:07,570 --> 00:05:09,010
它会作用在这一个大组上

153
00:05:09,010 --> 00:05:09,690
去做

154
00:05:09,810 --> 00:05:10,930
相应的运算处理

155
00:05:10,930 --> 00:05:11,570
明白这些是吧

156
00:05:11,570 --> 00:05:12,850
哎好我们来看

157
00:05:12,850 --> 00:05:14,090
这个实时效果反馈

158
00:05:14,090 --> 00:05:15,650
AAVG函数

159
00:05:15,650 --> 00:05:18,090
是对分组数据求什么的运算

160
00:05:18,090 --> 00:05:19,198
A求和

161
00:05:19,198 --> 00:05:20,442
< No Speech >

162
00:05:20,442 --> 00:05:21,950
C 求方差

163
00:05:21,950 --> 00:05:23,834
< No Speech >

164
00:05:23,834 --> 00:05:25,314
那么这个很清楚了

165
00:05:25,314 --> 00:05:29,714
AVG的函数是对结果集球平均值的运算 对吧

166
00:05:29,714 --> 00:05:31,754
所以这个题的答案是D

167
00:05:32,506 --> 00:05:33,950
好我们再来看第二个题

168
00:05:33,950 --> 00:05:36,282
< No Speech >

169
00:05:36,282 --> 00:05:37,758
SAM函数

170
00:05:38,522 --> 00:05:41,918
它是对分组数据求什么的运算

171
00:05:41,918 --> 00:05:43,514
< No Speech >

172
00:05:43,514 --> 00:05:46,114
求什么的运算 大家想想 A 求和

173
00:05:46,906 --> 00:05:50,906
B求差,C求方差,D求平均值。

174
00:05:51,802 --> 00:05:54,882
SAM函数是对分组数去求和的

175
00:05:54,882 --> 00:05:56,062
所以这个答案是A

176
00:05:56,062 --> 00:05:57,338
< No Speech >

177
00:05:57,338 --> 00:06:00,958
第一题答案是D 第二题的答案是A

178
00:06:00,958 --> 00:06:02,138
< No Speech >

179
00:06:02,138 --> 00:06:08,178
好,同学们,那么这节课我们先来讲解一下avg函数以及SUM函数的使用

