1
00:00:00,000 --> 00:00:01,018


2
00:00:01,018 --> 00:00:05,418
上节课我们讲解了MySQL数据库当中的约束类型

3
00:00:05,418 --> 00:00:07,938
那么这节课我们就来讲解一下

4
00:00:07,938 --> 00:00:12,938
如何向表当中添加主键约束(Primary Key)

5
00:00:12,938 --> 00:00:16,018
那么主键约束其实它分为两种的

6
00:00:16,018 --> 00:00:19,738
一种叫单一主键,一种叫联合主键

7
00:00:19,738 --> 00:00:21,658
那么什么叫单一主键呢?

8
00:00:21,658 --> 00:00:25,578
单一主键指的是使用一个列作为主键列

9
00:00:25,578 --> 00:00:29,278
当该列的值有重复时,则违反唯一性约束

10
00:00:29,278 --> 00:00:30,330
也就是说

11
00:00:30,330 --> 00:00:34,210
我只在某一个列上添加了主键约数

12
00:00:34,210 --> 00:00:36,450
那么这个列的值如果有重复时

13
00:00:36,450 --> 00:00:38,050
那则违反唯一性约数

14
00:00:38,050 --> 00:00:40,170
这个数据是无法添加到表当中的了

15
00:00:40,170 --> 00:00:40,650
对不对

16
00:00:40,650 --> 00:00:42,330
那什么叫联合主键呢

17
00:00:42,330 --> 00:00:46,130
联合主键指的是使用多个列作为主键列

18
00:00:46,130 --> 00:00:48,850
当多个列的值都有相同时

19
00:00:48,850 --> 00:00:50,370
则违反唯一性约数

20
00:00:50,370 --> 00:00:51,486
给大家举个例子啊

21
00:00:51,486 --> 00:00:54,650
比如说现在，我有A，B两列

22
00:00:54,650 --> 00:00:59,770
那么我在添加数据的时候,第一条数据A的列的值是1,B的值是2

23
00:00:59,770 --> 00:01:04,010
我再添加一条数据,A的值是2,B的值是1

24
00:01:04,010 --> 00:01:08,222
我再添加一条数据,这条数据A的列的值是1

25
00:01:09,178 --> 00:01:13,338
B的值也是一,B这一列的值也是一,问这条数据能不能添加到我们的

26
00:01:13,338 --> 00:01:15,802
表当中,答案是可以的

27
00:01:15,802 --> 00:01:18,602
对吧 为什么 虽然B这一列有重复了

28
00:01:18,602 --> 00:01:21,402
但是A这一列这个值是没有重复的

29
00:01:21,402 --> 00:01:24,322
如果你做的是一个创建的是一个联合主键

30
00:01:24,322 --> 00:01:27,002
两个列的值不管你有多少个列

31
00:01:27,002 --> 00:01:28,842
只要你联合主键里所包含的列

32
00:01:28,842 --> 00:01:29,534
它的列的值

33
00:01:29,534 --> 00:01:32,058
都要完全一样

34
00:01:32,058 --> 00:01:34,498
才违反唯一性的约束 举个例子

35
00:01:34,498 --> 00:01:36,658
比如说现在我再添加一条数据

36
00:01:36,658 --> 00:01:39,390
这个值这个数据的A的列的值是1

37
00:01:39,390 --> 00:01:40,506
B的值

38
00:01:40,506 --> 00:01:42,942
B的列子值是2,那很显然这条数据

39
00:01:42,942 --> 00:01:44,506


40
00:01:44,506 --> 00:01:47,866
这两个值跟这两个值已经重复了 那么这条数据就违反了唯一性约束

41
00:01:47,866 --> 00:01:49,598
这条数据就不会添加到表了当中了

42
00:01:49,598 --> 00:01:51,226
明白这意思吧

43
00:01:51,226 --> 00:01:52,706
这是联合主键

44
00:01:52,706 --> 00:01:56,546
那么一般情况下我们用哪种主键类型比较多呢?
 
45
00:01:56,546 --> 00:01:58,174
一般我们用的是单一主键比较多

46
00:01:58,174 --> 00:02:00,506
ok，好我们来看一下

47
00:02:00,506 --> 00:02:04,026
如何修改表添加主键约束呢?

48
00:02:04,026 --> 00:02:07,826
对于修改表添加主键约束,我们仍然有两种方式

49
00:02:07,826 --> 00:02:10,014
第一种是使用DDL语句

50
00:02:10,014 --> 00:02:11,066
来添加

51
00:02:11,066 --> 00:02:12,346
这个主键约束

52
00:02:12,346 --> 00:02:14,986
因为你像表当中添加主键约束

53-
00:02:14,986 --> 00:02:16,734
其实也是等于修改表的一种方式吗

54
00:02:17,658 --> 00:02:19,658
对表做一种修改嘛,对不对

55
00:02:19,658 --> 00:02:24,062
还有一种呢,仍然是通过Navicat来实现添加主键约束

56
00:02:24,730 --> 00:02:29,610
好,那我们先来看一下如何使用DDL语句添加主键约束

57
00:02:29,610 --> 00:02:32,810
它的语法是ALTER TABLE,仍然是修改表

58
00:02:32,810 --> 00:02:34,106
然后表名

59
00:02:34,106 --> 00:02:37,106
然后呢后面加一个关键字叫ADD 

60
00:02:37,106 --> 00:02:38,810
PRIMARY KEY

61
00:02:38,810 --> 00:02:45,410
PRIMARY KEY是主键约束,我们要添加一个主键约束,所以要加一个ADD,所以它是ADD PRIMARY KEY

62
00:02:45,410 --> 00:02:48,650
在KEY的后面要给定一个括号,后面要给定一个列名

63
00:02:48,650 --> 00:02:50,686
你要向哪个列 当中

64
00:02:51,514 --> 00:02:53,758
要为哪个列添加主键约束

65
00:02:54,362 --> 00:02:57,602
那么如果你在这给定了这个列的列名了

66
00:02:57,602 --> 00:02:59,722
那么这个列的值未来就不允许有空

67
00:02:59,722 --> 00:03:01,042
不允许有重复出现了

68
00:03:01,042 --> 00:03:01,682
明白这个意思吧

69
00:03:01,682 --> 00:03:04,882
那如果创建一个复合约束或者叫联合约束

70
00:03:04,882 --> 00:03:06,558
那么逗号再加列名就可以了

71
00:03:06,558 --> 00:03:08,282
明白这个意思吧

72
00:03:08,282 --> 00:03:14,642
好,我们来看一下示例,将emp表当中的employee_id设置为主键

73
00:03:14,642 --> 00:03:16,062
那它的语法是什么样的?

74
00:03:16,062 --> 00:03:17,722


75
00:03:17,722 --> 00:03:24,190
table emp i的primary key括号里面给定将哪一列

76
00:03:24,190 --> 00:03:25,786


77
00:03:25,786 --> 00:03:27,358
把列宁放到里面就可以了

78
00:03:28,154 --> 00:03:29,438
好,我们来做一个

79
00:03:29,438 --> 00:03:36,250


80
00:03:36,250 --> 00:03:37,930
然后emp对吧

81
00:03:37,930 --> 00:03:41,330
现在我要向emp当中添加一个主键约束

82
00:03:41,330 --> 00:03:43,998
添加主键约束的关键字是爱的

83
00:03:44,986 --> 00:03:46,786
Primary Key 对吧

84
00:03:46,786 --> 00:03:49,706
然后你要向哪个列添加主键约束呢

85
00:03:49,706 --> 00:03:51,386
在key的后面加一个括号

86
00:03:51,386 --> 00:03:53,546
这里来指定列的类型

87
00:03:53,546 --> 00:03:55,386
列的名字

88
00:03:55,386 --> 00:03:57,706
同学们大家看我今天先不添加列

89
00:03:57,706 --> 00:03:59,646
我们打开NaviCAD看一下啊

90
00:04:00,186 --> 00:04:03,266
比如说现在我要想像这个表当中添加数据

91
00:04:03,266 --> 00:04:07,262
我只要双击这个表就可以打开添加数据的这样的一个界面了

92
00:04:07,262 --> 00:04:08,346


93
00:04:08,346 --> 00:04:11,986
看,马上他提示了一个对话框,这是Navicat提示的

94
00:04:11,986 --> 00:04:15,826
说你这个表现在没有主键的,你是不是应该考虑添加一个主键

95
00:04:15,826 --> 00:04:19,146
明白这意思吧?当然你用是没有问题的

96
00:04:19,146 --> 00:04:22,266
好,那我们现在就看到这个提示了,然后我添加一个主键

97
00:04:22,266 --> 00:04:24,346
我们看看这个提示还存不存在了

98
00:04:24,346 --> 00:04:27,646
谁呢?安普拉伊,下发线ID

99
00:04:28,346 --> 00:04:31,198
让这一列具备一个主键约束

100
00:04:31,198 --> 00:04:34,330


101
00:04:34,330 --> 00:04:36,286
再双击EMP这个表

102
00:04:37,146 --> 00:04:38,106
打开这个表了

103
00:04:38,106 --> 00:04:39,626
然后没有再提示那句话

104
00:04:39,626 --> 00:04:41,278
说明这个表已经具备

105
00:04:41,278 --> 00:04:43,354


106
00:04:43,354 --> 00:04:46,942
那么一会我们会看一下这个主键约束在哪体现的

107
00:04:46,942 --> 00:04:48,762


108
00:04:48,762 --> 00:04:54,442
那么我们为一个列添加主键约束以后我们再往下看

109
00:04:54,442 --> 00:04:57,682
主键是具备自动增长的能力的

110
00:04:57,682 --> 00:05:00,158
什么意思呢?就是我们可以让一个

111
00:05:01,114 --> 00:05:06,074
让mySQL数据库去维护这个主键的值

112
00:05:06,074 --> 00:05:07,166
让它自动递征

113
00:05:07,166 --> 00:05:08,314


114
00:05:08,314 --> 00:05:11,194
MySQL中自动增长类型要求

115
00:05:11,194 --> 00:05:14,474
一,这个一个表当中只能有一个列为自动增长

116
00:05:14,474 --> 00:05:17,194
也就是说你必须得是单一主键才能做自动增长

117
00:05:17,194 --> 00:05:20,154
如果是联合主键是不能做自动增长处理的

118
00:05:20,154 --> 00:05:24,114
第二,自动增长的列的类型必须得是整数类型

119
00:05:24,114 --> 00:05:25,794
比如说你是一个字符串类型

120
00:05:25,794 --> 00:05:27,354
你没法让字符串自动增长的

121
00:05:27,354 --> 00:05:29,918
MySQL也没法去让字符串类型做自动增长

122
00:05:30,618 --> 00:05:33,534
如果想用自动增长,那么你的猎的类型

123
00:05:33,534 --> 00:05:35,802


124
00:05:35,802 --> 00:05:36,842
明白这意思吧

125
00:05:36,842 --> 00:05:42,014
然后自动增长只能添加到具备主键约束与微星约束的列上

126
00:05:42,842 --> 00:05:45,442
然后也就是说除了主键约束以外

127
00:05:45,442 --> 00:05:47,842
V型约束的列也可以让它自动增长

128
00:05:47,842 --> 00:05:51,042
然后删除主键约束或V型约束时

129
00:05:51,042 --> 00:05:53,402
如果该列拥有自动增长能力

130
00:05:53,402 --> 00:05:55,002
只要先去掉自动增长

131
00:05:55,002 --> 00:05:56,482
然后再删除约束

132
00:05:56,482 --> 00:05:57,822
这个同学们一定要注意啊

133
00:05:58,394 --> 00:06:00,114
比如说我现在删除主键

134
00:06:00,114 --> 00:06:04,434
那么如果这个主键我为它分配了主键自动增长这样的能力了

135
00:06:04,434 --> 00:06:08,194
那我一定是先删除自动增长这样的一个能力

136
00:06:08,194 --> 00:06:09,794
然后再去删除主键

137
00:06:09,794 --> 00:06:10,834
明白这意思吧

138
00:06:10,834 --> 00:06:12,354
那么这里我们还要知道

139
00:06:12,354 --> 00:06:17,794
主键自动增长这个能力并不是所有的关于型数据库都有的

140
00:06:17,794 --> 00:06:20,834
比如说MySQL它是有自动增长能力的

141
00:06:20,834 --> 00:06:25,114
但是Oracle就没有主键自增长的能力

142
00:06:25,114 --> 00:06:30,514
那么在Oracle当中如果我们想做出主键自增长的效果怎么办呢

143
00:06:30,514 --> 00:06:35,114
我们得依赖于Oracle当中的序列才能达到这个效果

144
00:06:35,114 --> 00:06:37,314
那么在MySQL当中是不用的

145
00:06:37,314 --> 00:06:38,954
你正常添加数据时

146
00:06:38,954 --> 00:06:42,154
如果你把主键这个列设置为自动增长了

147
00:06:42,154 --> 00:06:45,674
那么你对于这个列的值再插入数据时就可以忽略不计了

148
00:06:45,674 --> 00:06:46,834
忽略不用管它了

149
00:06:46,834 --> 00:06:50,334
由MySQL来负责维护这个列的值

150
00:06:51,290 --> 00:06:54,850
这个值并且它是一个连续的连续的数字啊

151
00:06:54,850 --> 00:06:56,542
然后再帮你添加到这个

152
00:06:57,242 --> 00:06:58,082
明白这意思吧

153
00:06:58,082 --> 00:06:59,870
这是主见自征的一个能力

154
00:07:00,378 --> 00:07:04,738
那我们看一下如何让我们的主建列具备自增能力呢

155
00:07:05,402 --> 00:07:09,726
那么我们现在这个Amplite ID能不能让它具备主键自动的能力

156
00:07:09,726 --> 00:07:10,906


157
00:07:10,906 --> 00:07:12,906
它是符合自增长的要求的

158
00:07:12,906 --> 00:07:14,106
第一它是一个链

159
00:07:14,106 --> 00:07:15,786
第二它是int类型的

160
00:07:15,786 --> 00:07:16,586
是整数类型的

161
00:07:16,586 --> 00:07:17,438
当然可以自增长

162
00:07:17,438 --> 00:07:18,842


163
00:07:18,842 --> 00:07:21,282
如何为它添加主键自生长呢?

164
00:07:21,282 --> 00:07:24,606
就是一个语句,我们来看一下,是alter table

165
00:07:24,606 --> 00:07:26,522


166
00:07:26,522 --> 00:07:27,934
修改

167
00:07:27,934 --> 00:07:31,834


168
00:07:31,834 --> 00:07:37,514
这个主键类型指的就是主键列,然后一定要给类型

169
00:07:37,514 --> 00:07:41,754
然后后面跟一个关键字,out2下发线,increment就可以了

170
00:07:41,754 --> 00:07:43,034
好,我们来看一个示例

171
00:07:43,034 --> 00:07:47,582
比如说,现在我们要将ENP表当中的amplified主键修改为

172
00:07:47,582 --> 00:07:49,754


173
00:07:49,754 --> 00:07:52,834
alter,table,emp,modify

174
00:07:52,834 --> 00:07:56,034
我们现在谁是这个主键列

175
00:07:56,034 --> 00:07:57,214
是不AmplifyEID啊

176
00:07:57,214 --> 00:07:58,234


177
00:07:58,234 --> 00:08:02,474
必须要给定这个列的类型,int,有人说老师我原来就是int的

178
00:08:02,474 --> 00:08:06,434
那你这要指定int,然后AutoIncrement,明白这意思吧

179
00:08:06,434 --> 00:08:07,870
好,我们来看一下这个案例

180
00:08:07,870 --> 00:08:10,586


181
00:08:10,586 --> 00:08:12,254
Ultra

182
00:08:12,254 --> 00:08:13,722


183
00:08:13,722 --> 00:08:18,110
然后empmodify emp这个employee

184
00:08:18,874 --> 00:08:21,754
下滑线ID,这是我的这个主键列,对吧

185
00:08:21,754 --> 00:08:25,394
类型是int类型,然后out,下滑线,increase

186
00:08:25,394 --> 00:08:27,802


187
00:08:27,802 --> 00:08:30,602
现在你的这个列就是自动递征的能力了

188
00:08:30,602 --> 00:08:33,562
你在插入数据时这个列的值你可以不用管了

189
00:08:33,562 --> 00:08:35,326
不用你去生成ID

190
00:08:35,930 --> 00:08:37,150
这个往里放了

191
00:08:37,914 --> 00:08:39,914
它来负责帮你生成ID的值

192
00:08:39,914 --> 00:08:42,042


193
00:08:42,042 --> 00:08:45,086
那么这是使用DDR语句

194
00:08:45,946 --> 00:08:49,786
添加主键约束并且添加主键之增长

195
00:08:49,786 --> 00:08:50,874


196
00:08:50,874 --> 00:08:56,274
那么用NaviCat该如何添加主键约束呢?我们来看一下NaviCat的使用

197
00:08:56,274 --> 00:09:00,766
首先我们还是选用ENP,然后点击设计表

198
00:09:01,658 --> 00:09:03,658
打开这个表的编辑界面

199
00:09:03,658 --> 00:09:07,858
然后我们看一下现在这个安卜拉EID已经是主键了

200
00:09:07,858 --> 00:09:10,138
从哪能看出来呢?这有一个小钥匙

201
00:09:10,138 --> 00:09:12,798
看到了吗?然后再看这一列下面有个自动递征

202
00:09:13,402 --> 00:09:17,242
这说明这个主建列它具备自动递增的能力了

203
00:09:17,242 --> 00:09:20,190
好 那我们先比如说把它去掉 恢复到默认状态

204
00:09:20,190 --> 00:09:22,426


205
00:09:22,426 --> 00:09:25,626
这是原来默认的没有添加主键式的这个样式

206
00:09:25,626 --> 00:09:28,090


207
00:09:28,090 --> 00:09:33,530
那么如果我现在想为emp表当中的ump-id添加主键约束

208
00:09:33,530 --> 00:09:37,758
我们应该怎么做呢?首先主键不允许有空值的,对不对?

209
00:09:38,618 --> 00:09:41,018
允许有空值默认对钩是点上的

210
00:09:41,018 --> 00:09:43,778
如果哪一列的允许有空值对钩点上

211
00:09:43,778 --> 00:09:45,618
说明这一列是允许有空值的

212
00:09:45,618 --> 00:09:47,618
那么现在我要为它加主键

213
00:09:47,618 --> 00:09:49,858
那这个允许空值肯定要去掉的

214
00:09:49,858 --> 00:09:51,058
不允许它有空值

215
00:09:51,058 --> 00:09:51,778
对不对

216
00:09:51,778 --> 00:09:54,778
然后在这个后面用鼠标点击一下

217
00:09:54,778 --> 00:09:56,350
它会出现一个小钥匙

218
00:09:56,858 --> 00:09:58,778
表示这一列是一个主键列

219
00:09:58,778 --> 00:10:00,574
如果我要创建的是一个

220
00:10:00,574 --> 00:10:01,658


221
00:10:01,658 --> 00:10:05,022
你要想把哪些列作为主键列就在它的后面

222
00:10:05,022 --> 00:10:06,778


223
00:10:06,778 --> 00:10:09,538
这有两个钥匙说明这两个列是一个主键列

224
00:10:09,538 --> 00:10:10,978
那么它就是一个联合主键

225
00:10:10,978 --> 00:10:11,738
明白这些了吧

226
00:10:11,738 --> 00:10:13,982
哎想去掉呢鼠标再点一下就可以

227
00:10:13,982 --> 00:10:15,834


228
00:10:15,834 --> 00:10:17,914
这样就完成了一个主键的添加

229
00:10:17,914 --> 00:10:18,954
我们ctrl-s

230
00:10:18,954 --> 00:10:20,634
这样就完成了主键添加了

231
00:10:20,634 --> 00:10:24,874
但是现在这个主键是不具备自动增长的能力的

232
00:10:24,874 --> 00:10:27,434
那如果我想让它具备自动增长能力怎么办呢

233
00:10:27,434 --> 00:10:28,754
我们得选中这个列

234
00:10:28,754 --> 00:10:31,614
然后在下面把自动递增勾选上

235
00:10:32,442 --> 00:10:39,722
这个过程就相当于我们刚刚执行的 为这个amplieid分配一个out to increment的这样一个操作

236
00:10:39,722 --> 00:10:41,022
然后再contract是保存

237
00:10:41,022 --> 00:10:42,074


238
00:10:42,074 --> 00:10:47,314
明白这意思吧?那么其实我们可以发现,用NaviCAD去做这个配置时

239
00:10:47,314 --> 00:10:51,714
整个过程是非常简单的,你只要动动鼠标,通过点击选择就可以了

240
00:10:51,714 --> 00:10:53,342
但是实质上NaviCAD是一个很简单的配置,你只要动动鼠标,通过点击选择就可以了

241
00:10:53,342 --> 00:10:54,586


242
00:10:54,586 --> 00:10:56,254
帮你生成相关的

243
00:10:56,254 --> 00:10:57,274


244
00:10:57,274 --> 00:10:59,614
然后发送到MySQL的服务端

245
00:10:59,614 --> 00:11:01,562


246
00:11:01,562 --> 00:11:07,722
好 这是使用NaviCat来设定添加主键列 还有自动递生

247
00:11:07,722 --> 00:11:09,854
好 我们来看一下实时效果反馈

248
00:11:09,854 --> 00:11:11,962


249
00:11:11,962 --> 00:11:17,662
添加主键约束的语句是什么呢?Alter table表明,然后后面应该是什么呢?

250
00:11:18,618 --> 00:11:20,222
这是主要关键。

251
00:11:20,222 --> 00:11:23,834


252
00:11:23,834 --> 00:11:25,726
加上主页列名

253
00:11:25,726 --> 00:11:29,306


254
00:11:29,306 --> 00:11:31,038
应该是哪个选项呢

255
00:11:31,770 --> 00:11:33,950
很显然答案是A嘛,对吧?

256
00:11:34,522 --> 00:11:36,862
Primary Key 然后给定列名

257
00:11:36,862 --> 00:11:39,226


258
00:11:39,226 --> 00:11:43,866
好 我们来看一下答案 第一题就这个题的答案是A 没有问题的

259
00:11:43,866 --> 00:11:48,350
好 同学们 那么以上我们就讲解了如何向表当中提供答案

260
00:11:49,050 --> 00:11:54,690
如何让组建约束具备自动增长的这样的一个能力

261
00:11:54,690 --> 00:11:56,382
好了同学们,那么我们这一节课呢就说到这里

