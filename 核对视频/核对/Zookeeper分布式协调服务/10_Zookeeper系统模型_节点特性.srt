1
00:00:00,000 --> 00:00:01,800
Hello小伙伴大家好

2
00:00:01,800 --> 00:00:04,840
这节课我们来学习节点的特性

3
00:00:04,840 --> 00:00:06,600
我们在上节课我们已经了解到

4
00:00:06,840 --> 00:00:08,600
这个rootkeeper它的命名空间

5
00:00:08,760 --> 00:00:11,320
是由一系列的数据节点组成的

6
00:00:11,560 --> 00:00:12,440
在本节课中

7
00:00:12,600 --> 00:00:15,520
我们将对数据节点的特性

8
00:00:15,760 --> 00:00:17,400
做一个详细的讲解

9
00:00:17,520 --> 00:00:20,160
其实rootkeeper它的节点

10
00:00:20,320 --> 00:00:21,640
是有生命周期的

11
00:00:21,880 --> 00:00:23,200
它的生命周期到底是啥

12
00:00:23,480 --> 00:00:24,840
就是这个znode

13
00:00:24,840 --> 00:00:25,680
它的生命周期

14
00:00:25,840 --> 00:00:27,720
完全取决于你这个节点

15
00:00:27,720 --> 00:00:29,320
它到底是什么类型

16
00:00:29,320 --> 00:00:30,600
在这个rootkeeper中

17
00:00:30,840 --> 00:00:32,120
这个节点的类型

18
00:00:32,240 --> 00:00:34,560
我们把它分为持久型节点

19
00:00:34,560 --> 00:00:35,520
临时节点

20
00:00:35,520 --> 00:00:36,720
以及时序节点

21
00:00:37,240 --> 00:00:38,320
具体这个节点

22
00:00:38,320 --> 00:00:39,800
它在创建的这种过程中

23
00:00:40,080 --> 00:00:41,280
一般我们在工作中

24
00:00:41,280 --> 00:00:43,400
都是组合去使用的

25
00:00:43,640 --> 00:00:46,880
因此它会生成4种节点类型

26
00:00:46,880 --> 00:00:48,560
我们一次来看一下

27
00:00:48,600 --> 00:00:51,720
首先第一个就是持久型节点

28
00:00:51,960 --> 00:00:53,600
节点在我们的工作中

29
00:00:53,600 --> 00:00:55,880
是最常见的一种节点的类型

30
00:00:55,960 --> 00:00:56,960
所谓的持久

31
00:00:56,960 --> 00:00:59,360
顾名思义它就是永久的

32
00:00:59,360 --> 00:01:02,120
会保存在我们rootkeeper的服务器上

33
00:01:02,120 --> 00:01:04,000
就是只要这个节点

34
00:01:04,200 --> 00:01:06,840
只要这个节点它创建出来

35
00:01:06,840 --> 00:01:08,440
就会被永久的存在

36
00:01:08,440 --> 00:01:09,960
我们rootkeeper的服务器上

37
00:01:10,200 --> 00:01:13,600
直到你主动去删除这个节点为止

38
00:01:13,720 --> 00:01:15,840
这就是持久型节点

39
00:01:16,240 --> 00:01:17,800
比如说你看我们这有个叫

40
00:01:17,800 --> 00:01:18,640
斜杠java

41
00:01:18,640 --> 00:01:19,720
或者是斜杠百战

42
00:01:19,720 --> 00:01:21,320
因为它的存储是kvalue

43
00:01:21,720 --> 00:01:23,360
这个斜杠java它就是k

44
00:01:23,360 --> 00:01:25,680
那value就是我们的具体的值

45
00:01:25,680 --> 00:01:26,480
就是supreme

46
00:01:26,480 --> 00:01:27,200
ok

47
00:01:27,520 --> 00:01:29,000
当然了有持久型节点

48
00:01:29,200 --> 00:01:31,800
还有一个叫持久型顺序节点

49
00:01:32,240 --> 00:01:33,320
持久型顺序节点

50
00:01:33,480 --> 00:01:34,040
它的特性

51
00:01:34,200 --> 00:01:36,400
基本上和持久型节点是一样的

52
00:01:36,400 --> 00:01:38,400
只要创建出来就会永久保存

53
00:01:38,400 --> 00:01:40,040
但是唯一不同的是什么

54
00:01:40,640 --> 00:01:42,080
顺序节点它加了一个什么

55
00:01:42,200 --> 00:01:42,960
序号

56
00:01:43,440 --> 00:01:44,240
它的子节点

57
00:01:44,240 --> 00:01:45,840
它就是你在创建这个节点的时候

58
00:01:45,840 --> 00:01:46,600
它加了个序号

59
00:01:46,600 --> 00:01:47,520
比如说你看

60
00:01:47,520 --> 00:01:48,800
有个比如说我要创建一个叫

61
00:01:48,800 --> 00:01:49,680
斜杠java

62
00:01:49,720 --> 00:01:52,120
它会自动给我加一个0000001

63
00:01:52,480 --> 00:01:53,680
如果说我要创建个server

64
00:01:53,720 --> 00:01:55,160
它会给我们加0000001

65
00:01:55,160 --> 00:01:55,800
这个就是什么

66
00:01:55,800 --> 00:01:58,720
序号就是顺序节点是一样的

67
00:01:58,880 --> 00:01:59,520
是一样的

68
00:01:59,520 --> 00:02:02,160
我们可以通过这种顺序节点的这种特性

69
00:02:02,200 --> 00:02:04,400
可以解决我们之前所说的

70
00:02:04,400 --> 00:02:06,000
rootkeeper的一个应用成绩

71
00:02:06,000 --> 00:02:07,800
就是命名服务的这种方式

72
00:02:08,000 --> 00:02:08,520
这个应用成绩

73
00:02:08,640 --> 00:02:11,120
就可以通过这个特性来这样实现

74
00:02:11,280 --> 00:02:11,880
ok

75
00:02:12,400 --> 00:02:14,320
我们说完持久型顺序节点

76
00:02:14,440 --> 00:02:16,720
我们再来介绍一个临时节点

77
00:02:16,720 --> 00:02:18,720
我们从名字上我们就能看出来

78
00:02:19,280 --> 00:02:21,240
临时节点它最重要的特性

79
00:02:21,240 --> 00:02:21,600
就是什么

80
00:02:21,880 --> 00:02:23,560
临时就临时用一会

81
00:02:23,560 --> 00:02:25,560
那你说临时它指的是什么

82
00:02:25,800 --> 00:02:27,400
就是当我们这个节点

83
00:02:27,400 --> 00:02:28,520
它创建出来之后

84
00:02:28,520 --> 00:02:29,560
创建出来了

85
00:02:29,960 --> 00:02:31,480
我们的客户端

86
00:02:31,800 --> 00:02:33,080
在rootkeeper的服务端

87
00:02:33,080 --> 00:02:34,560
创建出来一个节点

88
00:02:34,600 --> 00:02:36,960
如果说你创的是一个临时性节点

89
00:02:37,000 --> 00:02:39,240
当绘画断开之后

90
00:02:39,240 --> 00:02:40,760
连接不是连接断开

91
00:02:41,000 --> 00:02:42,960
是绘画断开之后

92
00:02:43,160 --> 00:02:45,680
这个节点它就会自动删除

93
00:02:45,680 --> 00:02:47,240
这就是临时节点

94
00:02:47,240 --> 00:02:48,200
我临时用一下

95
00:02:48,200 --> 00:02:49,560
我不用你就给我删掉

96
00:02:49,560 --> 00:02:50,360
说的这个什么

97
00:02:50,560 --> 00:02:51,800
说的是绘画实相

98
00:02:51,800 --> 00:02:54,120
注意不是连接断开

99
00:02:54,320 --> 00:02:56,200
当然临时节点

100
00:02:56,320 --> 00:02:57,760
我们在临时节点下面

101
00:02:57,880 --> 00:02:59,800
不能创建子节点

102
00:03:00,040 --> 00:03:01,360
这是这个要注意的

103
00:03:01,640 --> 00:03:03,440
当然我们有了临时节点

104
00:03:03,440 --> 00:03:05,160
这个临时节点和持久性节点

105
00:03:05,160 --> 00:03:06,120
最重要的区别是

106
00:03:06,120 --> 00:03:08,080
临时节点它会自动删除

107
00:03:08,600 --> 00:03:10,320
持久性节点它会永久保存

108
00:03:10,320 --> 00:03:12,280
这就是两个非常重要的特点

109
00:03:12,400 --> 00:03:13,720
当然我们临时节点

110
00:03:13,840 --> 00:03:15,240
它也可以创建什么

111
00:03:15,520 --> 00:03:17,160
临时顺序节点

112
00:03:17,520 --> 00:03:19,320
临时顺序节点的特性

113
00:03:19,320 --> 00:03:21,120
和临时节点是一致的

114
00:03:21,120 --> 00:03:21,960
唯一不同的是

115
00:03:21,960 --> 00:03:23,440
它也是加了一个序号

116
00:03:23,600 --> 00:03:24,240
大家可以看

117
00:03:24,240 --> 00:03:25,000
00001

118
00:03:25,160 --> 00:03:25,800
00002

119
00:03:25,800 --> 00:03:26,640
00003

120
00:03:26,640 --> 00:03:27,400
通过这个特性

121
00:03:27,520 --> 00:03:28,800
我们可以实现出来

122
00:03:28,800 --> 00:03:29,240
rootkeeper

123
00:03:29,240 --> 00:03:30,480
一些固定的一些应用

124
00:03:30,480 --> 00:03:31,000
成绩

125
00:03:31,000 --> 00:03:31,560
好了

126
00:03:31,760 --> 00:03:34,560
这节课给大家介绍节点的特性

127
00:03:34,800 --> 00:03:36,120
到这就结束了

128
00:03:36,120 --> 00:03:37,280
大家只需要记住

129
00:03:37,280 --> 00:03:38,440
有三个是不是

130
00:03:38,440 --> 00:03:40,280
一个是持久性节点

131
00:03:40,280 --> 00:03:41,840
然后永久都会存在

132
00:03:41,840 --> 00:03:42,920
除非你只能删除

133
00:03:42,920 --> 00:03:44,240
还有个临时节点

134
00:03:44,240 --> 00:03:45,520
当创建出来的时候

135
00:03:45,800 --> 00:03:47,000
绘画失效的时候

136
00:03:47,240 --> 00:03:49,120
这个节点会自动删除

137
00:03:49,120 --> 00:03:50,480
这就是临时节点

138
00:03:50,480 --> 00:03:51,600
其次还有个什么

139
00:03:51,600 --> 00:03:52,360
带序号

140
00:03:52,360 --> 00:03:53,840
我们的临时可以加带序号

141
00:03:53,840 --> 00:03:55,560
我们的持久性也可以加序号

142
00:03:55,800 --> 00:03:58,120
这就是我们这些个所要说的一个重点

143
00:03:58,120 --> 00:03:59,360
节点的特性

144
00:03:59,360 --> 00:04:00,440
我们在结束之前

145
00:04:00,520 --> 00:04:02,000
我们再做两个练习题

146
00:04:02,000 --> 00:04:02,720
第一个

147
00:04:03,080 --> 00:04:04,320
在这个rootkeeper记录中

148
00:04:04,320 --> 00:04:06,560
每个数据节点都是有什么的

149
00:04:07,320 --> 00:04:09,240
都是有生命周期的

150
00:04:09,240 --> 00:04:09,840
是不是

151
00:04:09,880 --> 00:04:11,480
它到底是生是死

152
00:04:11,480 --> 00:04:12,360
完全取决于

153
00:04:12,360 --> 00:04:14,080
你是什么样的节点类型

154
00:04:14,400 --> 00:04:15,720
第二题我们下列

155
00:04:15,840 --> 00:04:18,440
它不属于rootkeeper节点类型的是什么

156
00:04:18,440 --> 00:04:19,600
第一个持久性节点

157
00:04:19,600 --> 00:04:20,600
临时节点

158
00:04:20,600 --> 00:04:22,800
永久节点和临时顺序节点

159
00:04:22,800 --> 00:04:25,000
肯定是永久节点

160
00:04:25,000 --> 00:04:25,360
是吧

161
00:04:25,360 --> 00:04:25,920
永久节点

162
00:04:25,920 --> 00:04:28,800
它其实的你按官方名字叫持久性节点

163
00:04:29,000 --> 00:04:31,400
所以这道题我们应该选择的是c

164
00:04:31,440 --> 00:04:34,720
好了这节课给大家介绍节点的特性

165
00:04:34,960 --> 00:04:36,440
到这就结束了

166
00:04:36,440 --> 00:04:39,359
谢谢大家

