1
00:00:00,890 --> 00:00:02,370
Hello 小伙伴大家好

2
00:00:02,370 --> 00:00:05,770
这节课我们来学习客户端的命令横操作

3
00:00:05,770 --> 00:00:08,890
我们在之前我们已经搭建出来一个

4
00:00:08,890 --> 00:00:12,250
可以正常运行的一个Rookieper的集群了

5
00:00:12,250 --> 00:00:17,210
接下来我们来开始学习该如何我们通过客户端的这种方式

6
00:00:17,210 --> 00:00:19,650
来对Rookieper进行一系列的操作

7
00:00:19,650 --> 00:00:22,370
比如说我们该如何创建节点

8
00:00:22,370 --> 00:00:23,970
如何更新节点

9
00:00:23,970 --> 00:00:24,810
删除节点

10
00:00:24,810 --> 00:00:27,850
以及读取节点和什么的获取节点

11
00:00:27,850 --> 00:00:29,770
在这个Rookieper中有一个叫做

12
00:00:29,770 --> 00:00:31,050
ZKclient

13
00:00:31,050 --> 00:00:33,930
它是一个简易的客户端程序

14
00:00:33,930 --> 00:00:36,370
我们就可以依赖于这个可支线的文件

15
00:00:36,370 --> 00:00:39,570
我们就可以操作Rookieper的一个文件系统了

16
00:00:39,570 --> 00:00:41,250
来打开我们的一个插项

17
00:00:41,250 --> 00:00:43,034
< No Speech >

18
00:00:43,034 --> 00:00:45,794
在这个病的一个目录下边有一个叫做

19
00:00:45,794 --> 00:00:48,674
ZK clan的可执行的一个文件

20
00:00:48,674 --> 00:00:50,558
这就是root keyboard的简易版的

21
00:00:51,194 --> 00:00:53,554
我们可以依赖于脚本

22
00:00:53,554 --> 00:00:54,514
我们又可以操作

23
00:00:54,514 --> 00:00:56,954
rootkeeper的一个什么的文件系统了

24
00:00:56,954 --> 00:01:00,674
然后我们通过执行这个文件

25
00:01:00,674 --> 00:01:02,394
< No Speech >

26
00:01:02,394 --> 00:01:03,874
然后呢我们通过执行它

27
00:01:03,874 --> 00:01:06,114
我们就连到了这个root keyboard的一个集群中

28
00:01:06,114 --> 00:01:08,194
我们就可以创建节点了

29
00:01:08,194 --> 00:01:09,794
首先在这块呢我们创建节点呢

30
00:01:09,794 --> 00:01:13,034
我们可以通过create的这种方式创建节点

31
00:01:13,034 --> 00:01:14,674
我们在之前呢我们讲过

32
00:01:14,674 --> 00:01:18,554
root keyboard啊它是通过k value的这种方式

33
00:01:18,554 --> 00:01:21,954
并且呢这个k值啊这个k值大家注意

34
00:01:21,954 --> 00:01:23,474
这个k值必须是什么呢

35
00:01:23,474 --> 00:01:25,074
它是以路径的这种方式啊

36
00:01:25,074 --> 00:01:26,714
你到底是要把这个文件啊

37
00:01:26,714 --> 00:01:28,634
这个k放到哪一个目录下面

38
00:01:28,914 --> 00:01:31,274
首先呢我们它的根目录是斜杠啊

39
00:01:31,274 --> 00:01:32,994
我想放到这个斜杠的下边呢

40
00:01:32,994 --> 00:01:34,674
比如说有个扎板的一个目录

41
00:01:34,674 --> 00:01:36,274
那这个目录它的数据是什么呢

42
00:01:36,274 --> 00:01:37,554
数据是sprint

43
00:01:37,554 --> 00:01:38,554
简单你看

44
00:01:38,554 --> 00:01:41,114
那这个时候呢你看我们是创建出来的一个什么

45
00:01:41,114 --> 00:01:43,394
create啊创建出来的这个目录了啊

46
00:01:43,394 --> 00:01:45,274
并且呢它的值是什么呢

47
00:01:45,274 --> 00:01:47,154
sprint啊值是sprint ok

48
00:01:47,154 --> 00:01:48,434
这是什么呢一层目录

49
00:01:48,434 --> 00:01:49,874
那我能不能再创建一个呢

50
00:01:49,874 --> 00:01:51,794
比如说a

51
00:01:51,794 --> 00:01:54,114
a的这个目录也是在根路径下

52
00:01:54,114 --> 00:01:55,314
我们放一个1

53
00:01:55,314 --> 00:01:58,154
然后呢我们再创建create a目录下边呢

54
00:01:58,154 --> 00:02:00,994
我想在a目录下边呢再创建一个b目录

55
00:02:00,994 --> 00:02:03,594
它的它的结果呢是2

56
00:02:03,594 --> 00:02:07,554
然后呢我还想在a的目录下边创建一个b

57
00:02:07,554 --> 00:02:09,154
b的目录下边创建一个c

58
00:02:09,154 --> 00:02:10,554
它的结果呢是3

59
00:02:10,554 --> 00:02:12,594
大家注意你看这个是不是相当于说

60
00:02:12,594 --> 00:02:13,874
我在一个目录里边

61
00:02:13,874 --> 00:02:15,674
一个目录里边这是斜杠啊

62
00:02:15,674 --> 00:02:17,394
一个目录里边创建了一个目录

63
00:02:17,394 --> 00:02:19,154
然后在这个目录里边又创建了一个目录

64
00:02:19,154 --> 00:02:20,554
但是这就创建了目录是不是

65
00:02:20,554 --> 00:02:22,674
相当于是包含了子目录了啊

66
00:02:22,674 --> 00:02:25,434
创建目录啊创建数据节点呢

67
00:02:25,434 --> 00:02:27,954
通过这个叫create啊这个命令

68
00:02:27,954 --> 00:02:29,394
我们就可以创建一个节点了

69
00:02:29,394 --> 00:02:30,954
那今天创建出来之后呢

70
00:02:30,954 --> 00:02:33,914
我们可以那我想看看这个节点该如何去做

71
00:02:33,914 --> 00:02:36,394
比如说我想看看这个根路径下下面啊

72
00:02:36,394 --> 00:02:39,154
这个根路径下边呢有哪些数据节点

73
00:02:39,154 --> 00:02:40,754
我们呢在linux系统中

74
00:02:40,754 --> 00:02:42,674
我们可以通过ls这个命令

75
00:02:42,674 --> 00:02:45,274
看到这个文件夹下边有哪些文件

76
00:02:45,274 --> 00:02:48,394
但是呢在rookie本中啊也是通过ls

77
00:02:48,394 --> 00:02:50,634
比如说我想看看斜杠下边有哪些呀

78
00:02:50,634 --> 00:02:52,874
你看有一个a我们刚刚创建的

79
00:02:52,874 --> 00:02:53,554
有个java啊

80
00:02:53,554 --> 00:02:54,594
这个是人家系统创建的

81
00:02:54,594 --> 00:02:55,474
不用大家去管啊

82
00:02:55,474 --> 00:02:56,674
也不要去删除

83
00:02:56,674 --> 00:02:58,794
那这个a和java是不是我们创建的呀

84
00:02:58,794 --> 00:03:00,194
啊这就是我们可以看看啊

85
00:03:00,194 --> 00:03:01,954
这个目录下边有哪些目录

86
00:03:01,954 --> 00:03:04,194
当然了我们也可以看到在a目录下边呢

87
00:03:04,194 --> 00:03:05,554
有一个b没问题吧

88
00:03:05,554 --> 00:03:07,674
然后呢我也看到在a目录下边的

89
00:03:07,674 --> 00:03:09,554
b目录下边有个什么呀

90
00:03:09,554 --> 00:03:10,594
有个c呗

91
00:03:10,594 --> 00:03:12,314
是不是啊啊这个时候我们可以看到

92
00:03:12,314 --> 00:03:14,514
噢我们通过create这个方式呢

93
00:03:14,514 --> 00:03:16,194
我们可以创建一个节点

94
00:03:16,194 --> 00:03:19,394
以及创建子节点啊都是可以的

95
00:03:19,394 --> 00:03:22,754
呃那我该如何获取这个节点的结果呢

96
00:03:22,754 --> 00:03:25,794
因为ls呢是看这个目录下边有哪些目录

97
00:03:25,794 --> 00:03:29,034
那我想要拿这个节点的值该如何去做

98
00:03:29,034 --> 00:03:32,354
我们可以通过get这个命令来获取这个节点的值

99
00:03:32,354 --> 00:03:35,314
比如说来获取这个java这个节点

100
00:03:35,314 --> 00:03:38,874
你看我们拿到了sprint这个具体的一个信息值吧

101
00:03:38,874 --> 00:03:40,994
那我们可以通过get斜杠a

102
00:03:40,994 --> 00:03:42,474
你看我们是不是可以拿到1

103
00:03:42,474 --> 00:03:44,794
那我通过get斜杠a斜杠b

104
00:03:44,794 --> 00:03:45,914
我们是不是能拿到2

105
00:03:45,914 --> 00:03:48,034
就是说获取这个节点的值

106
00:03:48,034 --> 00:03:51,434
我们通过get这个命令来进行什么呢

107
00:03:51,434 --> 00:03:53,114
获取的啊来进行获取的

108
00:03:53,114 --> 00:03:54,834
那我该如何修改呢

109
00:03:54,834 --> 00:03:57,034
修改呢我们通过set这个命令

110
00:03:57,034 --> 00:03:58,874
我们就可以修改一个结果的值

111
00:03:58,874 --> 00:04:03,714
比如说我想要把java改成sprint.mvc

112
00:04:03,714 --> 00:04:06,314
简单那我在get这个斜杠java的时候

113
00:04:06,314 --> 00:04:08,874
我们会发现你看这个时候是不是有个sprint.mvc

114
00:04:08,874 --> 00:04:09,754
比较简单

115
00:04:09,754 --> 00:04:11,114
改数据用set

116
00:04:11,114 --> 00:04:13,394
那删除呢delete

117
00:04:13,394 --> 00:04:16,194
就是delete我来删除一个java的这个节点

118
00:04:16,194 --> 00:04:18,274
那我在get这个java节点的时候

119
00:04:18,274 --> 00:04:19,354
我们会发现你看

120
00:04:19,354 --> 00:04:21,234
no no no

121
00:04:21,234 --> 00:04:23,434
什么意思没有这个节点是不是

122
00:04:23,434 --> 00:04:26,834
所以删除节点我们用delete

123
00:04:26,834 --> 00:04:27,954
但是我们要注意

124
00:04:27,954 --> 00:04:29,994
你在删除这个节点的时候

125
00:04:29,994 --> 00:04:31,914
那比如说我想要删除这个a

126
00:04:31,914 --> 00:04:33,234
删除这个a他不让你删

127
00:04:33,234 --> 00:04:33,794
为什么呢

128
00:04:33,794 --> 00:04:35,994
因为这个a下边是有文件夹

129
00:04:35,994 --> 00:04:37,714
所以说不让你删

130
00:04:37,714 --> 00:04:38,834
你只能把里边的删掉

131
00:04:38,834 --> 00:04:40,634
你才能删除外边的

132
00:04:40,634 --> 00:04:41,234
好了

133
00:04:41,234 --> 00:04:43,954
那以上就是我们本节课所有的一个命令了

134
00:04:43,954 --> 00:04:44,834
create

135
00:04:44,834 --> 00:04:46,394
create如何创建

136
00:04:46,394 --> 00:04:47,594
ls如何看

137
00:04:47,594 --> 00:04:48,834
get获取

138
00:04:48,834 --> 00:04:50,034
set修改

139
00:04:50,034 --> 00:04:51,394
然后以及delete删除

140
00:04:51,394 --> 00:04:53,314
这几个命令非常的重要

141
00:04:53,314 --> 00:04:54,314
也是非常的简单

142
00:04:54,314 --> 00:04:56,234
小伙伴一定要多多的去练习

143
00:04:56,234 --> 00:04:57,514
因为在我们以后的过程中

144
00:04:57,514 --> 00:05:00,794
我们经常会去看一下节点的一些数据

145
00:05:00,794 --> 00:05:02,674
来确定我们这个分布式服务

146
00:05:02,674 --> 00:05:04,714
它到底是启动成功还是失败等等

147
00:05:04,714 --> 00:05:06,634
我要看到一些具体的信息的时候

148
00:05:06,714 --> 00:05:08,554
我们也是通过rootkeeper去做的

149
00:05:08,554 --> 00:05:13,074
所以说这些命令需要小伙伴熟练于心

150
00:05:13,074 --> 00:05:14,074
仅此而已

151
00:05:14,074 --> 00:05:14,554
OK

152
00:05:14,554 --> 00:05:15,554
我们在结束之前

153
00:05:15,674 --> 00:05:16,874
我们再做两个练习题

154
00:05:17,794 --> 00:05:19,794
来看看我们这节课所学的一个内容

155
00:05:20,194 --> 00:05:22,834
第一题在这个rootkeeper技术中

156
00:05:23,314 --> 00:05:24,954
我们该如何添加节点

157
00:05:24,954 --> 00:05:27,154
d a create没问题是吧

158
00:05:27,154 --> 00:05:28,114
就选择的是a

159
00:05:28,114 --> 00:05:29,994
因为delete set guide它都不是

160
00:05:30,554 --> 00:05:32,114
第二个在这个rootkeeper技术中

161
00:05:32,114 --> 00:05:33,914
我们该如何删除一个节点

162
00:05:33,954 --> 00:05:35,874
a create b delete

163
00:05:35,874 --> 00:05:37,714
是肯定是选择的是b

164
00:05:37,954 --> 00:05:38,594
好了

165
00:05:39,074 --> 00:05:40,194
这些课我们来讲解

166
00:05:40,434 --> 00:05:42,954
客户端的一个脚本的一个操作

167
00:05:43,114 --> 00:05:44,314
到这就结束了

168
00:05:44,314 --> 00:05:45,662
谢谢大家

