1
00:00:00,986 --> 00:00:04,986
上节课我们讲解了Meseco当中的数字函数

2
00:00:04,986 --> 00:00:08,466
那么这节课我们再来讲解一下日期函数

3
00:00:08,466 --> 00:00:15,066
日期函数它的作用就是来对日期类型进行处理的一些函数

4
00:00:15,066 --> 00:00:17,746
那么我们在讲解日期函数之前

5
00:00:17,746 --> 00:00:20,026
我们要先知道在Meseco当中

6
00:00:20,026 --> 00:00:24,346
它是允许直接使用字符串来表示日期的

7
00:00:24,346 --> 00:00:26,106
那它为什么会这样呢?

8
00:00:26,106 --> 00:00:28,286
因为它支持一个引式的

9
00:00:28,922 --> 00:00:30,922
这个隐士转化我们后面会说到

10
00:00:30,922 --> 00:00:32,922
但是他有一个要求

11
00:00:32,922 --> 00:00:35,922
不是说任何的字符串都可以表示日期的

12
00:00:35,922 --> 00:00:39,070
他要求你的字符串的日期格式

13
00:00:39,610 --> 00:00:42,686
必须是四位的年、两位的月。

14
00:00:42,686 --> 00:00:44,698
< No Speech >

15
00:00:44,698 --> 00:00:47,898
空格然后两位的小时两位的分钟两位的秒

16
00:00:47,898 --> 00:00:52,378
那么其实这个月日以及小时分钟秒也可以是一位的

17
00:00:52,378 --> 00:00:54,298
但是一位你即便是给定了一位

18
00:00:54,298 --> 00:00:56,298
他末日也会给你转成两位的

19
00:00:56,298 --> 00:00:56,898
明白这意思吧

20
00:00:56,898 --> 00:01:00,738
那么这里需要注意的就是年月日之间

21
00:01:00,738 --> 00:01:04,418
这个关于分割符可以用这种连字符

22
00:01:04,418 --> 00:01:06,298
连字符也可以用这种斜线

23
00:01:06,298 --> 00:01:09,418
但是不可以用中文的年月日

24
00:01:09,418 --> 00:01:10,898
这是他无法识别的

25
00:01:10,898 --> 00:01:11,818
明白这意思吧

26
00:01:11,818 --> 00:01:15,378
那么如果你要保证你的字符串里的日期格式是这样的

27
00:01:15,378 --> 00:01:19,098
那么这个字符串是可以直接转换成日期类型的

28
00:01:19,098 --> 00:01:21,298
他会帮你直接转换成日期类型

29
00:01:21,298 --> 00:01:22,658
明白这意思吧同学们

30
00:01:22,658 --> 00:01:26,778
这是mySQL当中对于日期基于字符串的格式

31
00:01:26,778 --> 00:01:29,738
来表示日期的一个方式

32
00:01:29,738 --> 00:01:31,218
好这个我们需要知道

33
00:01:31,218 --> 00:01:36,218
好那么接下来我们再来看一下常见的日期函数有哪些

34
00:01:36,218 --> 00:01:38,338
日期函数还是比较多的

35
00:01:38,338 --> 00:01:40,818
这里我们就说几个比较重要的

36
00:01:40,818 --> 00:01:45,058
比如说我们看这里有一个curdata

37
00:01:45,058 --> 00:01:46,778
这个curd就是那个current

38
00:01:46,778 --> 00:01:48,538
current单词的一个简写

39
00:01:48,538 --> 00:01:51,818
它是获取返回当前的日期

40
00:01:51,818 --> 00:01:54,818
注意日期是只有年月日没有小时分钟秒的

41
00:01:54,818 --> 00:01:57,218
还有一个currtime

42
00:01:57,218 --> 00:01:58,858
currtime是返回当前的时间

43
00:01:58,858 --> 00:02:01,458
这里是只有小时分钟秒没有日期的

44
00:02:01,458 --> 00:02:05,418
那么这是两个获取当前日期和当前时间的函数

45
00:02:05,418 --> 00:02:09,138
同样还有两个函数叫current-date和current-time

46
00:02:09,138 --> 00:02:11,538
它们也是返回当前日期和当前时间的

47
00:02:11,538 --> 00:02:14,058
也就是说它们四个函数的作用都是相似的

48
00:02:14,058 --> 00:02:14,938
明白我的意思吧

49
00:02:14,938 --> 00:02:17,258
它跟它是一样的

50
00:02:17,258 --> 00:02:18,686
只是函数名不一样

51
00:02:19,450 --> 00:02:31,102
还有像这个data函数,data函数它是从日期时间表当中提取指定的日期值

52
00:02:31,706 --> 00:02:36,706
我给他这个时间,他返回的就是一个2017年6月15日这样的一个日期

53
00:02:36,706 --> 00:02:40,706
我们需要注意,只要在这个函数当中括号没有给定参数的

54
00:02:40,706 --> 00:02:45,706
那说明这些函数都是不需要参数的,有参数的下面都会指定出来

55
00:02:45,706 --> 00:02:47,706
需要几个,明白这意思吧?

56
00:02:47,706 --> 00:02:53,706
那么既然是日期函数了,那他需要的参数肯定都是日期类型的,明白这意思吧?

57
00:02:53,706 --> 00:02:56,702
好,比如说我们再看一下像这个

58
00:02:56,702 --> 00:02:58,074
< No Speech >

59
00:02:58,074 --> 00:03:01,554
帝返回日期当中的帝的日期部分

60
00:03:01,554 --> 00:03:04,034
就是这个日对吧

61
00:03:04,034 --> 00:03:05,794
帝然后给一个日期

62
00:03:05,794 --> 00:03:08,034
他会返回这个日期当中的天啊

63
00:03:08,730 --> 00:03:10,930
就是这个几月几日的这个日啊

64
00:03:10,930 --> 00:03:11,570
OK

65
00:03:11,570 --> 00:03:12,930
还有像好多呢

66
00:03:12,930 --> 00:03:14,850
这里呢同学们自己回去看一下就可以了

67
00:03:14,850 --> 00:03:15,730
并不是很难啊

68
00:03:15,730 --> 00:03:16,810
比如说还有这个now啊

69
00:03:16,810 --> 00:03:18,610
它是返回当前的日期和时间

70
00:03:18,610 --> 00:03:24,210
我们这个card data跟card time只能返回年月日或者是小时分钟秒

71
00:03:24,210 --> 00:03:24,730
对吧

72
00:03:24,730 --> 00:03:27,290
那么now呢它可以返回小时分钟秒

73
00:03:27,290 --> 00:03:29,130
年月日加小时分钟秒

74
00:03:29,130 --> 00:03:29,810
明白这意思吧

75
00:03:29,810 --> 00:03:30,050
哎

76
00:03:30,050 --> 00:03:31,570
还有一个ss data

77
00:03:31,570 --> 00:03:34,370
它也可以返回年月日和小时分钟秒

78
00:03:34,370 --> 00:03:35,210
它跟这个

79
00:03:35,210 --> 00:03:37,490
呃它俩这个函数的作用是相同的

80
00:03:37,490 --> 00:03:38,650
只是函数名不一样

81
00:03:38,650 --> 00:03:39,090
明白吧

82
00:03:39,090 --> 00:03:39,730
哎

83
00:03:39,730 --> 00:03:40,250
好

84
00:03:40,250 --> 00:03:43,010
呃这边呢都有详细的介绍以及实例的对应

85
00:03:43,010 --> 00:03:44,330
同学们自己看一下就可以了

86
00:03:44,330 --> 00:03:45,770
并不是很难的事儿啊

87
00:03:46,330 --> 00:03:46,650
好

88
00:03:46,650 --> 00:03:47,890
我们先来看一下

89
00:03:47,890 --> 00:03:48,890
势力一

90
00:03:48,890 --> 00:03:53,290
呃势力一呢要求向安普拉一表当中添加一条数据

91
00:03:53,290 --> 00:03:54,450
呃这个数据呢

92
00:03:54,450 --> 00:03:56,490
雇员ID是300

93
00:03:56,850 --> 00:03:58,930
然后呢名字就Kevin

94
00:03:58,930 --> 00:04:01,330
email呢是kevin at 上新浪.com

95
00:04:01,330 --> 00:04:01,570
啊

96
00:04:01,570 --> 00:04:02,170
到先

97
00:04:02,170 --> 00:04:02,650
然后呢

98
00:04:02,650 --> 00:04:06,250
入职时间是2049年5月1日

99
00:04:06,250 --> 00:04:09,130
然后8点30分30秒

100
00:04:09,130 --> 00:04:11,690
注意看这个日期格式是这样的

101
00:04:11,690 --> 00:04:13,090
那如果是这样的格式

102
00:04:13,090 --> 00:04:15,010
我们是不是直接可以使用字符串来

103
00:04:15,570 --> 00:04:16,650
表示这个日期啊

104
00:04:16,650 --> 00:04:16,970
对吧

105
00:04:16,970 --> 00:04:17,370
哎

106
00:04:17,370 --> 00:04:20,450
然后工作部门是IT下滑线PROG

107
00:04:20,450 --> 00:04:20,770
啊

108
00:04:20,770 --> 00:04:21,090
好

109
00:04:21,090 --> 00:04:23,370
那么对于这样的一个insert我们怎么去做呀

110
00:04:23,370 --> 00:04:24,450
这是很简单的了吧

111
00:04:24,450 --> 00:04:26,366
我们来实现一下啊

112
00:04:26,366 --> 00:04:27,482
< No Speech >

113
00:04:27,482 --> 00:04:31,482
好 我们看一下需求 向安卜拉一表当中插入数据

114
00:04:31,482 --> 00:04:38,162
那就是insert into 还记得这个DML语句当中的插入数据的这个语句吧

115
00:04:38,162 --> 00:04:42,522
insert into 然后表明安卜拉一

116
00:04:42,522 --> 00:04:47,322
那么安卜拉一我们在插入之前 我们先来了解一下这个安卜拉一的这个字段

117
00:04:47,322 --> 00:04:50,562
它有一个入值时间 我们看一下

118
00:04:50,562 --> 00:04:55,722
安卜拉一表 然后右键对象信息DDR 我们看

119
00:04:55,722 --> 00:05:00,602
它有一个字段叫hiredate 我们看hiredate是什么类型的

120
00:05:00,602 --> 00:05:03,802
是data time 就是日期类型啊 是吧

121
00:05:03,802 --> 00:05:07,642
data time它可不是字符串类型 不是YX啊 是data time

122
00:05:07,642 --> 00:05:14,122
那么我们一会再向hiredate这个列 是一个data time类型的这个列插入数据时

123
00:05:14,122 --> 00:05:17,842
我们如果是标准的 按照标准的日期格式来给定

124
00:05:17,842 --> 00:05:22,282
那么这个值我们是可以基于字符串的形式来给定的 对吧

125
00:05:22,282 --> 00:05:25,842
但是这个字符串的日期格式必须得符合它的要求 明白我意思吧

126
00:05:25,842 --> 00:05:29,642
好 现在我们已经知道了hiredate的类型是data time类型

127
00:05:29,642 --> 00:05:32,122
好 我们继续往下说

128
00:05:32,122 --> 00:05:34,522
然后我这是一个选择插入 对吧

129
00:05:34,522 --> 00:05:36,894
AmpliteE 我要插入 AmpliteE ID

130
00:05:36,894 --> 00:05:39,610
< No Speech >

131
00:05:39,610 --> 00:05:41,210
安卜拉一 下滑镜ID

132
00:05:41,210 --> 00:05:42,650
然后呢 last name

133
00:05:42,650 --> 00:05:43,674
< No Speech >

134
00:05:43,674 --> 00:05:48,394
以后再说姓名 名字我们就说是lastname 就是我们的姓名了

135
00:05:48,394 --> 00:05:51,994
然后呢 email 然后呢 hairdata

136
00:05:51,994 --> 00:05:56,234
hair下滑线 data 这是他的入职时间 对吧

137
00:05:56,234 --> 00:05:59,710
然后还有一个什么呢 还有一个这个招摆地

138
00:05:59,710 --> 00:06:00,858
< No Speech >

139
00:06:00,858 --> 00:06:02,258
它的工作编码

140
00:06:02,258 --> 00:06:04,258
然后呢 接下来Y流子

141
00:06:04,922 --> 00:06:07,882
第一个参数 umbrellae 300

142
00:06:07,882 --> 00:06:09,282
对吧 员工ID是300

143
00:06:09,282 --> 00:06:11,934
第二个 last name kevin

144
00:06:12,890 --> 00:06:18,570
然后第三个参数是email kevin8-sangqingtang-c,是吧

145
00:06:18,570 --> 00:06:21,050
< No Speech >

146
00:06:21,050 --> 00:06:26,170
然后接着是它的入职时间

147
00:06:26,170 --> 00:06:30,450
它的入职时间是2049年5月1日8点30分30秒

148
00:06:30,450 --> 00:06:34,490
好 那么这样我们就可以用标准的这个支付串日期格式了

149
00:06:34,490 --> 00:06:36,958
2049年5月1日

150
00:06:37,658 --> 00:06:44,058
对吧 然后两位的年 05 当然你给一位的也可以啊 然后-01

151
00:06:44,058 --> 00:06:46,686
这是年月日 空格 小时分钟秒

152
00:06:46,686 --> 00:06:48,410
< No Speech >

153
00:06:48,410 --> 00:06:53,530
第1个小时,我们也可以给他两位的,也可以给他一位的,比如说我给两位的08

154
00:06:53,530 --> 00:06:56,990
我们先给一位吧,你看一下,其实他也会把它转换成两位的啊

155
00:06:57,562 --> 00:07:03,934
8点,冒号,然后后面是分钟30,冒号,然后后面秒

156
00:07:04,922 --> 00:07:10,402
明白了吧?你看我们看两侧的单引号,这肯定是一个字符串啊

157
00:07:10,402 --> 00:07:14,122
对不对?字符串可以当成日期来处理吗?我说了是可以的

158
00:07:14,122 --> 00:07:17,362
但是要求你必须得是这种标准的日期格式

159
00:07:17,362 --> 00:07:20,162
字符串的日期格式

160
00:07:20,162 --> 00:07:25,202
然后逗号第三个参数是工作编码工作ID

161
00:07:25,202 --> 00:07:26,622
埃提

162
00:07:26,622 --> 00:07:29,690
< No Speech >

163
00:07:29,690 --> 00:07:30,290
对吧

164
00:07:30,290 --> 00:07:30,930
好

165
00:07:30,930 --> 00:07:32,450
那么接下来我们就来插入一下

166
00:07:32,450 --> 00:07:34,014
看看这个数据能不能插入进去

167
00:07:34,014 --> 00:07:36,058
< No Speech >

168
00:07:36,058 --> 00:07:39,518
看到了吗同学们,插进去然后我们查一下这个数据

169
00:07:39,518 --> 00:07:44,890
< No Speech >

170
00:07:44,890 --> 00:07:51,450
选择新从, 员工是哪里的员工ID。

171
00:07:51,450 --> 00:07:55,930
< No Speech >

172
00:07:55,930 --> 00:07:59,262
选中它,点击右键,有一个运行与选择

173
00:07:59,262 --> 00:08:00,474
< No Speech >

174
00:08:00,474 --> 00:08:02,394
看到了吗同学们 last name Kevin

175
00:08:02,394 --> 00:08:04,514
然后email kevin830到CNN

176
00:08:04,514 --> 00:08:06,366
然后注意看hiredate的时间

177
00:08:06,366 --> 00:08:08,186
< No Speech >

178
00:08:08,186 --> 00:08:12,586
050108 8.30分30秒

179
00:08:12,586 --> 00:08:13,306
注意看

180
00:08:13,306 --> 00:08:16,266
现在我是不是把一个字符串的日期格式

181
00:08:16,266 --> 00:08:19,626
已经插入到了一个Data Time类型的字段当中了

182
00:08:19,626 --> 00:08:20,254
字幕由Amara.org社区提供

183
00:08:20,254 --> 00:08:22,874
< No Speech >

184
00:08:22,874 --> 00:08:26,714
那么他除了可以用这种格式以外 连日用一个帘子符以外

185
00:08:26,714 --> 00:08:30,270
他还可以用这种反斜线,这也可以的,我们来试一下啊

186
00:08:30,270 --> 00:08:31,738
< No Speech >

187
00:08:31,738 --> 00:08:34,206
5月2号 然后ID是

188
00:08:34,206 --> 00:08:37,850
< No Speech >

189
00:08:37,850 --> 00:08:40,350
好 我们再来执行 运行

190
00:08:40,350 --> 00:08:42,718
好 然后我们再去查 301

191
00:08:42,718 --> 00:08:46,682
< No Speech >

192
00:08:46,682 --> 00:08:48,182
301存在了

193
00:08:48,182 --> 00:08:49,438
那我就310

194
00:08:49,438 --> 00:08:57,850
< No Speech >

195
00:08:57,850 --> 00:09:02,170
刚才那个数据已经插入进去了是吧 我是没选中这个运行

196
00:09:02,170 --> 00:09:04,810
我们可以看到301的已经插入进去了

197
00:09:04,810 --> 00:09:08,090
然后注意看这个时间2049年05-02

198
00:09:08,090 --> 00:09:10,730
我们给的是这个斜线的是不是也可以啊对不对

199
00:09:10,730 --> 00:09:17,566
但是如果我给这个汉字的年2049年5月2日

200
00:09:17,566 --> 00:09:18,810
< No Speech >

201
00:09:18,810 --> 00:09:20,810
这行不行啊?我们试一下

202
00:09:20,810 --> 00:09:22,842
< No Speech >

203
00:09:22,842 --> 00:09:24,638
呃 300

204
00:09:24,638 --> 00:09:28,090
< No Speech >

205
00:09:28,090 --> 00:09:33,130
右键选中运行1选中的

206
00:09:33,130 --> 00:09:35,330
看到了吗同学们,马上报错了

207
00:09:35,330 --> 00:09:39,730
报错什么,说我们这个HireData这一列是有错的

208
00:09:39,730 --> 00:09:41,930
为什么呢,原因就是你这个日期格式

209
00:09:41,930 --> 00:09:45,530
并不是标准的字符串描述日期的这个格式

210
00:09:45,530 --> 00:09:49,886
所以它是无法把这个字符串当成日期类型来处理的

211
00:09:50,394 --> 00:09:56,474
明白了同学们 可以是连字符 可以是斜线 但是不可以是汉字的年月日

212
00:09:56,474 --> 00:09:58,174
OK 好

213
00:09:58,714 --> 00:10:07,714
我们再来看市链 显示所有部门 显示所有在部门90中的雇员的名字和从业的周数

214
00:10:08,410 --> 00:10:11,490
雇员的总工作时间以周计算

215
00:10:11,490 --> 00:10:13,730
怎么计算这个周呢?他告诉你了

216
00:10:13,730 --> 00:10:15,730
用当前的日期

217
00:10:15,730 --> 00:10:18,530
SysDate这个函数

218
00:10:18,530 --> 00:10:22,250
减去受雇日期再除以7

219
00:10:22,250 --> 00:10:25,730
就可以计算出他受雇的周数

220
00:10:25,730 --> 00:10:28,730
对吧?好,我们来实现一下

221
00:10:28,730 --> 00:10:30,106
< No Speech >

222
00:10:30,106 --> 00:10:31,386
这个先去掉

223
00:10:31,386 --> 00:10:33,386
OK 我们看一下需求

224
00:10:33,386 --> 00:10:34,746
< No Speech >

225
00:10:34,746 --> 00:10:39,346
首先它的条件是显示部门ID是90的是吧

226
00:10:39,346 --> 00:10:40,190
啊

227
00:10:40,190 --> 00:10:44,922
< No Speech >

228
00:10:44,922 --> 00:10:50,562
select,然后呢from employee where我先把条件定义出来

229
00:10:50,562 --> 00:10:52,562
行选择这个条件定义出来

230
00:10:52,562 --> 00:11:00,042
department下划线id等于90

231
00:11:00,042 --> 00:11:00,922
对吧

232
00:11:00,922 --> 00:11:02,402
然后接下来他要什么呢

233
00:11:02,402 --> 00:11:03,122
我们看啊

234
00:11:03,122 --> 00:11:05,202
要雇员的名字

235
00:11:05,202 --> 00:11:07,442
那我们就last name

236
00:11:07,442 --> 00:11:09,162
然后还要什么呢

237
00:11:09,162 --> 00:11:11,802
雇员的总工作时间以周计算

238
00:11:11,802 --> 00:11:12,962
用当前日期

239
00:11:12,962 --> 00:11:14,362
当前日期是什么

240
00:11:14,362 --> 00:11:17,202
是Sysdata函数

241
00:11:17,202 --> 00:11:17,722
对吧

242
00:11:17,722 --> 00:11:20,842
然后减去他的入职时间再除以期

243
00:11:20,842 --> 00:11:21,202
对吧

244
00:11:21,202 --> 00:11:22,842
那这有一个优先级的问题

245
00:11:22,842 --> 00:11:25,642
先用当前时间减去他的入职时间

246
00:11:25,642 --> 00:11:26,722
然后再除以期

247
00:11:26,722 --> 00:11:28,202
所以这里肯定要加一个括号了

248
00:11:28,202 --> 00:11:28,722
对吧

249
00:11:28,722 --> 00:11:29,922
Sysdata

250
00:11:29,922 --> 00:11:32,542
然后减去hairdate

251
00:11:32,542 --> 00:11:34,234
< No Speech >

252
00:11:34,234 --> 00:11:36,954
到目前为止他已经入职了多少天了啊

253
00:11:36,954 --> 00:11:38,394
但是我们要的是一个

254
00:11:38,394 --> 00:11:40,394
周所以再出一期

255
00:11:41,338 --> 00:11:44,158
明白这意思吧?好我们来运行看一下

256
00:11:44,158 --> 00:11:46,522
< No Speech >

257
00:11:46,522 --> 00:11:51,562
部门为90的有这两个人,然后他据我们现在这个时间来看

258
00:11:51,562 --> 00:11:54,722
他已经受雇了这么多周了,明白这意思吧

259
00:11:54,722 --> 00:12:01,562
OK,好同学们,那么以上呢我们就讲解了Mexico当中的这个日期函数的一个处理

260
00:12:01,562 --> 00:12:04,122
好同学们,那么这节课就到这

