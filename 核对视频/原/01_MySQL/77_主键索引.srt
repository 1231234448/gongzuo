1
00:00:00,986 --> 00:00:06,106
这节课我们再来讲解一下Mesico缩影中的主件缩影

2
00:00:06,106 --> 00:00:09,866
主件缩影是一种特殊的V1缩影

3
00:00:09,866 --> 00:00:12,266
为什么说它是特殊的V1缩影呢?

4
00:00:12,266 --> 00:00:15,550
一个表中只能有一个主件,它不允许有空值

5
00:00:15,550 --> 00:00:17,242
< No Speech >

6
00:00:17,242 --> 00:00:22,882
它是具备V1锁引的一个特征,什么特征呢?就是这个值不能有重复的

7
00:00:22,882 --> 00:00:26,322
同时它具备另一个特征,什么呢?不允许有空值

8
00:00:26,322 --> 00:00:28,322
但是V1锁引是允许有空值的

9
00:00:28,322 --> 00:00:31,082
对不对?而组件锁引是不允许有空值的

10
00:00:31,082 --> 00:00:34,122
这是组件锁引跟V1锁引的一个根本区别

11
00:00:34,122 --> 00:00:37,842
那么一般在建表的时候同时创建组件锁引,什么意思呢?

12
00:00:37,842 --> 00:00:40,162
组件锁引的创建它是自动创建的

13
00:00:40,162 --> 00:00:44,082
只要你创建组件了,那么这个组件必然有一个组件锁引

14
00:00:44,082 --> 00:00:46,522
不需要我们额外的再去创建组件锁引

15
00:00:46,522 --> 00:00:51,882
你也不可以为一个非组件列创建组件锁引,这也是不允许的

16
00:00:51,882 --> 00:00:53,562
明白这意思吧同学们?

17
00:00:53,562 --> 00:00:54,722
好,我们来看一下

18
00:00:54,722 --> 00:00:58,322
修改表添加组件锁引,它的语句的命令是

19
00:00:58,322 --> 00:01:01,162
alter table表明add primary key

20
00:01:01,162 --> 00:01:05,482
你看这个语句,这不就是像表当中添加组件约束嘛

21
00:01:05,482 --> 00:01:10,922
对吧?所以我们说了,你创建表时或者你添加修改表时

22
00:01:10,922 --> 00:01:15,962
只要是为某个列分配了组件约束,那么这个列就自动有组件锁引了

23
00:01:15,962 --> 00:01:23,322
同时,你不能为一个没有分配组件约束的列去创建组件锁引

24
00:01:23,322 --> 00:01:25,962
这是不允许的,明白这意思吧?

25
00:01:25,962 --> 00:01:27,322
好,我们来看实例

26
00:01:27,322 --> 00:01:30,042
修改emp表为emplyeid

27
00:01:30,042 --> 00:01:34,442
emplyeid我们看一下,emp表我们刚刚创建的

28
00:01:34,442 --> 00:01:37,082
emp表,emplyeid

29
00:01:37,082 --> 00:01:39,642
它现在还不是组件呢,看到了吗?

30
00:01:39,642 --> 00:01:41,642
emplyeid还不是组件呢

31
00:01:41,642 --> 00:01:43,642
去添加一个组件锁引

32
00:01:43,642 --> 00:01:49,242
那我们是不是把这个emplyeid添加个组件约束就可以了?

33
00:01:49,242 --> 00:01:52,574
是这样的,我们来添加一下

34
00:01:52,574 --> 00:01:54,490
< No Speech >

35
00:01:54,490 --> 00:01:57,598
Alter Table

36
00:01:57,598 --> 00:01:58,938
< No Speech >

37
00:01:58,938 --> 00:02:01,338
然后什么呢?emp这个表,对吧?

38
00:02:01,338 --> 00:02:05,338
add primary key,这不是组件约束吗?

39
00:02:05,338 --> 00:02:09,938
然后空格,让哪一列作为组件约束呢?

40
00:02:09,938 --> 00:02:12,638
applyE,下滑线ID

41
00:02:12,638 --> 00:02:14,138
< No Speech >

42
00:02:14,138 --> 00:02:15,778
然后运行

43
00:02:15,778 --> 00:02:18,618
然后我们再去查看一下emp表

44
00:02:18,618 --> 00:02:24,702
show index from emp 对吧

45
00:02:24,702 --> 00:02:26,554
< No Speech >

46
00:02:26,554 --> 00:02:30,874
看到了吗?这里是不是有一个primary?原来是没有primary的

47
00:02:30,874 --> 00:02:36,274
所以,组件锁引的创建就是随着你为谁分配组件约束

48
00:02:36,274 --> 00:02:38,474
而自动创建的组件锁引

49
00:02:38,474 --> 00:02:42,794
那么这是修改表添加组件锁引

50
00:02:42,794 --> 00:02:45,074
那创建表是指定组件锁引怎么办呢?

51
00:02:45,074 --> 00:02:48,794
还是你创建表是为某个列指定一个组件约束

52
00:02:48,794 --> 00:02:50,754
它就具备组件锁引了

53
00:02:50,754 --> 00:02:56,314
你看create a table,表明,column列明,primary key列明就OK了

54
00:02:56,314 --> 00:02:58,994
好,我们来看一个示例

55
00:02:58,994 --> 00:03:01,594
示例要求我们创建一个ENP6表

56
00:03:01,594 --> 00:03:05,914
包含ENPID name of address,同时ENPID列为组件锁引

57
00:03:05,914 --> 00:03:09,154
其实说白了就是让ENPID具备组件约束不就可以了嘛

58
00:03:09,154 --> 00:03:10,154
是不是?

59
00:03:10,154 --> 00:03:13,502
好,我们来写一个简表语句

60
00:03:13,502 --> 00:03:16,698
< No Speech >

61
00:03:16,698 --> 00:03:21,178
然后表名叫emp6

62
00:03:21,178 --> 00:03:22,522
< No Speech >

63
00:03:22,522 --> 00:03:24,642
然后在这个括号里来给定列名

64
00:03:24,642 --> 00:03:25,362
有什么列呢

65
00:03:25,362 --> 00:03:27,322
有emp下滑线id

66
00:03:27,362 --> 00:03:27,842
是吧

67
00:03:27,842 --> 00:03:29,202
然后为它创建组件

68
00:03:29,202 --> 00:03:31,122
所以那就是得为它分配组件约束了

69
00:03:31,122 --> 00:03:31,562
是吧

70
00:03:31,562 --> 00:03:32,562
int类型

71
00:03:32,562 --> 00:03:34,922
然后primarykey

72
00:03:34,922 --> 00:03:35,962
然后我们再给它一个

73
00:03:35,962 --> 00:03:39,562
output下滑线increment

74
00:03:39,682 --> 00:03:40,402
自增长

75
00:03:40,442 --> 00:03:40,922
对吧

76
00:03:40,922 --> 00:03:42,442
然后还有一个name列

77
00:03:42,442 --> 00:03:44,002
var char

78
00:03:44,402 --> 00:03:46,362
长度20也够了

79
00:03:46,362 --> 00:03:48,402
然后address

80
00:03:48,402 --> 00:03:49,278
很快就完成了

81
00:03:49,278 --> 00:03:50,522
< No Speech >

82
00:03:50,522 --> 00:03:53,214
然后Y歌

83
00:03:53,978 --> 00:03:56,418
长度50也够了

84
00:03:56,418 --> 00:03:57,698
这样就可以了

85
00:03:57,698 --> 00:04:03,454
我们不需要额外的再去对某个列创建主见说音了

86
00:04:03,454 --> 00:04:07,642
< No Speech >

87
00:04:07,642 --> 00:04:10,722
这个表其实我们已经串联出来了 刚才我执行过了

88
00:04:11,674 --> 00:04:15,454
我们看一下,这是enp6

89
00:04:15,454 --> 00:04:16,762
< No Speech >

90
00:04:16,762 --> 00:04:21,562
看到了吗同学们emp6这个表是不是已经有primary了

91
00:04:21,562 --> 00:04:22,522
对不对

92
00:04:22,522 --> 00:04:22,878
好

93
00:04:23,610 --> 00:04:29,290
刚才是我选中语句,但是我点的这个运行,这个运行会把这里所有的语句都执行

94
00:04:29,290 --> 00:04:31,690
所以这个创建出来了,它也执行了

95
00:04:31,690 --> 00:04:34,130
所以其实我们表已经创建出来了,明白这意思吧

96
00:04:34,130 --> 00:04:38,130
当我选中它再去运行的时候,那就是出错了,表已存在了

97
00:04:38,130 --> 00:04:41,090
好,我们来看一下实时效果反馈

98
00:04:41,090 --> 00:04:46,290
主键所引列的是什么什么有空值

99
00:04:46,290 --> 00:04:49,490
A,允许不为一,允许有空值

100
00:04:49,490 --> 00:04:52,010
B,必须为一,允许有空值

101
00:04:52,010 --> 00:04:55,370
C,必须为一,不允许有空值

102
00:04:55,370 --> 00:04:58,290
D,允许不为一,不允许有空值

103
00:04:58,290 --> 00:04:59,582
应该是哪个呀?

104
00:05:00,122 --> 00:05:02,322
是不是很显然是C啊?

105
00:05:02,322 --> 00:05:05,522
主件所引列的值是必须为1的

106
00:05:05,522 --> 00:05:07,522
而且不允许有空值的

107
00:05:07,522 --> 00:05:10,922
对不对?这是跟为1所引的一个区别

108
00:05:10,922 --> 00:05:12,922
答案是C,没有问题

109
00:05:12,922 --> 00:05:17,322
好,同学们,那么以上我们就讲解了如何创建主件所引

110
00:05:17,322 --> 00:05:20,522
那么我们知道了,当我们去分配主件约束时

111
00:05:20,522 --> 00:05:24,522
其实这个主件列就自动具备了主件所引

112
00:05:24,522 --> 00:05:27,522
是吧?所以我们在做数据查询时

113
00:05:27,522 --> 00:05:29,922
有这样的一句话,什么呢?

114
00:05:29,922 --> 00:05:35,922
能用主件作为条件判断的,一定要用主件来作为条件判断

115
00:05:35,922 --> 00:05:40,922
它的效率非常高,为什么?因为主件自带,主件所引

116
00:05:40,922 --> 00:05:44,322
能明白吗?好,那我们这一课就到这

