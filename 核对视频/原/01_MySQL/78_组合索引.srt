1
00:00:00,000 --> 00:00:01,050
< No Speech >

2
00:00:01,050 --> 00:00:06,170
这节课我们再来讲解一下MySQL输引当中的最后一种输引类型

3
00:00:06,170 --> 00:00:08,170
就是这个组合输引

4
00:00:08,170 --> 00:00:10,170
那么什么是组合输引呢?

5
00:00:10,170 --> 00:00:13,610
组合输引我们也称之为联合输引

6
00:00:13,610 --> 00:00:17,610
那么其实组合输引就是指使用多个字段创建的输引

7
00:00:17,610 --> 00:00:20,410
我们原来都是使用某一个列来创建输引

8
00:00:20,410 --> 00:00:22,530
那么如果你的输引里包含多个列了

9
00:00:22,530 --> 00:00:25,250
那么这就是一个联合输引或者叫组合输引

10
00:00:25,250 --> 00:00:26,330
明白我的意思吧

11
00:00:26,330 --> 00:00:29,810
只有在查询条件中使用了创建输引时的

12
00:00:29,810 --> 00:00:31,730
第一个字段输引才会被使用

13
00:00:31,730 --> 00:00:32,382
这是什么意思啊?

14
00:00:32,890 --> 00:00:35,970
当我们把多个列作为创建属引列时

15
00:00:35,970 --> 00:00:38,970
就是把多个列同时创建一个属引列的时候

16
00:00:38,970 --> 00:00:40,890
那我们在给定条件的时候

17
00:00:40,890 --> 00:00:43,130
它有要求,什么要求呢?就是

18
00:00:43,130 --> 00:00:45,930
最左前缀原则的要求

19
00:00:45,930 --> 00:00:48,570
那么什么是最左前缀的原则呢?

20
00:00:48,570 --> 00:00:52,410
就是最左优先从左向右

21
00:00:52,410 --> 00:00:54,810
依此来看,左侧

22
00:00:54,810 --> 00:00:57,850
它的优先就要高于右侧,什么意思呢?我们来看

23
00:00:57,850 --> 00:01:02,090
比如说我们现在使用表的name,address,celerate来创建组合属引

24
00:01:02,090 --> 00:01:05,690
现在我的属引当中包含三个列,分别是name,address,celerate

25
00:01:05,690 --> 00:01:08,010
那么我们要想组合属引生效

26
00:01:08,010 --> 00:01:09,610
我们要想让这个组合属引生效

27
00:01:09,610 --> 00:01:12,170
那我们在给定条件的时候就必须得这么给

28
00:01:12,170 --> 00:01:15,690
比如说,现在我在查询这个表的时候

29
00:01:15,690 --> 00:01:20,970
我用name,address,celerate同时作为我的val子句后面的条件

30
00:01:20,970 --> 00:01:24,410
比如说,name等于什么,and,address等于什么

31
00:01:24,410 --> 00:01:26,570
然后,and,celerate等于什么

32
00:01:26,570 --> 00:01:28,542
这么去做没有问题的

33
00:01:29,082 --> 00:01:31,962
因为它是从最左侧开始条件匹配的

34
00:01:31,962 --> 00:01:35,602
如果你的 name 给的是最左侧的 name 只要匹配上了

35
00:01:35,602 --> 00:01:37,882
然后 address 条件跟它匹配上了

36
00:01:37,882 --> 00:01:39,162
salary 跟它匹配上了

37
00:01:39,162 --> 00:01:40,882
那这肯定是走组合输赢的

38
00:01:40,882 --> 00:01:44,562
或者是你给 name 跟 address 没给 salary

39
00:01:44,562 --> 00:01:45,562
这也没有问题

40
00:01:45,562 --> 00:01:47,762
因为 name 跟 address 也匹配上了

41
00:01:47,762 --> 00:01:48,282
是吧

42
00:01:48,282 --> 00:01:49,882
或者是你直接给 name

43
00:01:49,882 --> 00:01:51,562
就一个材数

44
00:01:51,562 --> 00:01:53,082
就一个条件是 name

45
00:01:53,082 --> 00:01:54,642
给 name 这也能匹配上

46
00:01:54,642 --> 00:01:57,642
这也是要走组合输赢的

47
00:01:57,642 --> 00:02:00,002
因为它永远是从最左侧开始匹配的

48
00:02:00,002 --> 00:02:01,802
如果你给的条件的列

49
00:02:01,802 --> 00:02:03,602
正好是都是符合它的最

50
00:02:03,602 --> 00:02:05,202
越往左侧越前提越高

51
00:02:05,202 --> 00:02:06,842
越左所以

52
00:02:06,842 --> 00:02:07,402
是吧

53
00:02:07,402 --> 00:02:08,682
所以你看这三个条件

54
00:02:08,682 --> 00:02:09,562
name name name

55
00:02:09,562 --> 00:02:10,882
然后 address address

56
00:02:10,882 --> 00:02:11,842
这是没有问题的

57
00:02:11,842 --> 00:02:14,522
但是如果你现在给的是 address 和 salary

58
00:02:14,522 --> 00:02:15,362
前面没有 name

59
00:02:15,362 --> 00:02:16,922
这就不走组合输赢了

60
00:02:16,922 --> 00:02:17,482
为什么

61
00:02:17,482 --> 00:02:19,362
address 不是最左的

62
00:02:19,362 --> 00:02:20,762
最左的是 name

63
00:02:20,762 --> 00:02:21,842
是吧

64
00:02:21,842 --> 00:02:23,882
这肯定是不走组合输赢的

65
00:02:23,882 --> 00:02:26,442
或者是直接给 salary 也不走组合输赢的

66
00:02:26,442 --> 00:02:26,462
也就是由于你给的条件

67
00:02:27,034 --> 00:02:29,314
能明白同学们,这是最主要前置原则

68
00:02:29,314 --> 00:02:31,434
如果我们创建了组合缩影

69
00:02:31,434 --> 00:02:35,834
一定要想到组合缩影列的顺序

70
00:02:35,834 --> 00:02:38,154
或者叫他们的位置顺序位置一定要搞清楚

71
00:02:38,154 --> 00:02:41,994
因为一旦我们创建缩影时组合缩影是位置定下来了

72
00:02:41,994 --> 00:02:44,194
那么未来我们在使用他们两个

73
00:02:44,194 --> 00:02:46,834
他们三个或者他们一个作为查询条件的时候

74
00:02:46,834 --> 00:02:49,674
要想到哪些会走缩影哪些不走缩影

75
00:02:49,674 --> 00:02:50,954
是吧

76
00:02:50,954 --> 00:02:52,394
你直接给Name走缩影

77
00:02:52,394 --> 00:02:53,994
直接给Name address走缩影

78
00:02:53,994 --> 00:02:55,354
直接给Name address salary

79
00:02:55,354 --> 00:02:56,274
这都走缩影

80
00:02:56,274 --> 00:02:57,874
当然你直接给address不走

81
00:02:57,874 --> 00:02:58,954
直接给salary不走

82
00:02:58,954 --> 00:03:02,034
给address加salary也不走组合缩影

83
00:03:02,034 --> 00:03:05,034
因为它不匹配最主要前置原则了

84
00:03:05,034 --> 00:03:05,914
明白这意思吧同学们

85
00:03:05,914 --> 00:03:10,674
所以这些都是我们要能否处罚组合缩影时

86
00:03:10,674 --> 00:03:12,954
需要注意的一个就是条件的顺序

87
00:03:12,954 --> 00:03:17,234
那么我们如何添加组合缩影呢

88
00:03:17,234 --> 00:03:18,234
这比较简单

89
00:03:18,234 --> 00:03:20,314
比如说alter table修改表表明

90
00:03:20,314 --> 00:03:21,914
add index添加缩影

91
00:03:21,914 --> 00:03:22,834
然后缩影名

92
00:03:22,834 --> 00:03:25,354
然后括号里面给两个列

93
00:03:25,354 --> 00:03:26,634
这就是组合缩影了

94
00:03:26,634 --> 00:03:27,354
是吧

95
00:03:27,354 --> 00:03:29,554
好我们来修改看一个实例

96
00:03:29,554 --> 00:03:34,434
修改emp6表为Name address创建一个组合缩影

97
00:03:34,434 --> 00:03:37,994
我们先看一下emp6这个表

98
00:03:37,994 --> 00:03:40,274
emp6运行

99
00:03:40,274 --> 00:03:41,914
现在这里只有一个组件缩影

100
00:03:41,914 --> 00:03:42,274
是吧

101
00:03:42,274 --> 00:03:45,754
那我们现在要创建一个组合缩影

102
00:03:45,754 --> 00:03:49,086
alter table

103
00:03:49,086 --> 00:03:50,234
< No Speech >

104
00:03:50,234 --> 00:03:55,514
然后add index 添加一个缩影

105
00:03:55,554 --> 00:03:56,714
然后缩影名叫什么呢

106
00:03:56,714 --> 00:04:02,954
emp6下滑线index下滑线n下滑线a

107
00:04:02,994 --> 00:04:03,474
对吧

108
00:04:03,514 --> 00:04:04,274
然后括号

109
00:04:04,314 --> 00:04:08,994
这里呢以name跟address来作为一个缩影

110
00:04:08,994 --> 00:04:09,834
可以吧

111
00:04:09,834 --> 00:04:10,814
来

112
00:04:11,482 --> 00:04:13,802
运行,好,我们再去查看

113
00:04:13,802 --> 00:04:15,386
< No Speech >

114
00:04:15,386 --> 00:04:16,426
看到了吗同学们

115
00:04:16,426 --> 00:04:18,746
现在这个水隐列是不是已经创建出来了

116
00:04:18,746 --> 00:04:22,174
而且这个列里包含了三个列

117
00:04:22,174 --> 00:04:27,674
< No Speech >

118
00:04:27,674 --> 00:04:30,074
他们的名字都叫相同的

119
00:04:30,074 --> 00:04:33,194
一个是Name,这是第一个列,第二个列叫address

120
00:04:33,194 --> 00:04:37,566
它不是在一行里显示,它是在两行里显示的

121
00:04:37,566 --> 00:04:38,842
< No Speech >

122
00:04:38,842 --> 00:04:42,882
那么我们也可以在创建表时,创建组合缩影

123
00:04:42,882 --> 00:04:43,922
语句是什么呢?

124
00:04:43,922 --> 00:04:50,682
Create a table,表名,column类型,index,缩影名字,column

125
00:04:50,682 --> 00:04:52,162
好,我们来看一个示例

126
00:04:52,162 --> 00:05:01,790
现在要求创建ENP表,包含ENPID,Name of the drafted,同时为Name of the drafted创建组合缩影

127
00:05:02,682 --> 00:05:04,682
好,我们来创建一个这个表

128
00:05:04,682 --> 00:05:06,686
呃,创建者

129
00:05:07,610 --> 00:05:12,930
然后呢,table,然后表名叫emp7,是吧,括号

130
00:05:12,930 --> 00:05:18,050
然后这里有emp下发线id,然后int类型,primary

131
00:05:18,050 --> 00:05:19,386
< No Speech >

132
00:05:19,386 --> 00:05:25,466
key 主键,alt,下滑线,increment,对吧

133
00:05:25,466 --> 00:05:26,586
这是第一个列

134
00:05:26,586 --> 00:05:28,786
第二个列,什么呢

135
00:05:28,786 --> 00:05:29,758
NEEB

136
00:05:29,758 --> 00:05:31,802
< No Speech >

137
00:05:31,802 --> 00:05:33,002
哇 差

138
00:05:33,818 --> 00:05:36,058
长度是多少呢?长度是20

139
00:05:36,058 --> 00:05:38,078
然后第三个列

140
00:05:38,078 --> 00:05:39,418
< No Speech >

141
00:05:39,418 --> 00:05:41,578
然后也是YX

142
00:05:41,578 --> 00:05:43,578
长度也是30

143
00:05:43,578 --> 00:05:45,578
然后接下来就是数一了

144
00:05:45,578 --> 00:05:46,778
index

145
00:05:46,778 --> 00:05:48,894
然后呢emp7

146
00:05:48,894 --> 00:05:53,562
< No Speech >

147
00:05:53,562 --> 00:05:57,122
add下滑械index可以吧

148
00:05:57,162 --> 00:05:59,122
然后这里包含了name列

149
00:05:59,122 --> 00:06:00,802
包含了address

150
00:06:01,202 --> 00:06:02,202
所以你这个列里

151
00:06:02,402 --> 00:06:04,362
你的列名必须在creator表当中

152
00:06:04,362 --> 00:06:05,202
包含这两个列

153
00:06:05,202 --> 00:06:06,642
你没有这个列名不存在

154
00:06:06,642 --> 00:06:07,962
你是无法为它创建

155
00:06:08,002 --> 00:06:08,882
联合输引的

156
00:06:08,882 --> 00:06:09,562
组合输引的

157
00:06:09,562 --> 00:06:10,590
明白这些吧同学们

158
00:06:10,590 --> 00:06:12,250
< No Speech >

159
00:06:12,250 --> 00:06:13,850
好 我们运行

160
00:06:14,410 --> 00:06:17,050
好 这个表其实已经创建出来了 是吧

161
00:06:17,050 --> 00:06:19,050
我们查一下 EMP7

162
00:06:19,050 --> 00:06:21,242
< No Speech >

163
00:06:21,242 --> 00:06:27,762
看到了吗?一个组件缩影,然后一个组合缩影,包含了两个列Name跟Address

164
00:06:27,762 --> 00:06:28,722
是吧?

165
00:06:28,722 --> 00:06:32,002
好,我们来看一下JJ.Curl的实时效果反馈

166
00:06:32,002 --> 00:06:34,442
那么其实组合缩影的创建还是比较简单的

167
00:06:34,442 --> 00:06:35,882
这里我们需要注意的就是

168
00:06:35,882 --> 00:06:38,334
在使用组合缩影时需要注意的就是

169
00:06:38,842 --> 00:06:41,402
最左前最原则

170
00:06:41,402 --> 00:06:45,022
组合首页是指使用什么来创建首页?

171
00:06:45,022 --> 00:06:46,842
< No Speech >

172
00:06:46,842 --> 00:06:50,322
B外建列,C一个列,D多个列

173
00:06:50,322 --> 00:06:53,482
那么这道题的答案是什么?很显然是D嘛

174
00:06:53,482 --> 00:06:57,122
组合数引是指使用多个列来创建的数引

175
00:06:57,122 --> 00:06:59,122
所以这个题的答案是D

176
00:06:59,122 --> 00:07:00,922
好同学们那么到目前为止

177
00:07:00,922 --> 00:07:05,042
MySQL当中的四大数引类型我们都已经讲过了

178
00:07:05,042 --> 00:07:07,282
好,那我们这节课就到这

