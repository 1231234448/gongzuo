1
00:00:00,986 --> 00:00:06,586
这节课我们再来讲解一下DML操作当中的删除数据

2
00:00:07,418 --> 00:00:10,998
我们可以使用delete来删除表中的数据

3
00:00:10,998 --> 00:00:15,774
它的语法格式是什么呢?语法格式是delete空格from

4
00:00:15,774 --> 00:00:20,186
< No Speech >

5
00:00:20,186 --> 00:00:26,426
这样delete语句就会把这个表当中满足条件的数据删除掉

6
00:00:26,426 --> 00:00:28,546
那么这里我们需要注意的就是

7
00:00:28,546 --> 00:00:31,106
我们在使用delete语句删除数据时

8
00:00:31,106 --> 00:00:33,306
一定要注意这个where条件

9
00:00:33,306 --> 00:00:35,146
如果我们不给定where条件

10
00:00:35,146 --> 00:00:39,706
那么它表示的含义是删除这个表当中的所有的数据

11
00:00:39,706 --> 00:00:42,346
那么这样我们表的数据就会被清空了

12
00:00:42,346 --> 00:00:43,066
明白这意思吧

13
00:00:43,066 --> 00:00:44,346
所以在删除数据的时候

14
00:00:44,346 --> 00:00:45,946
我们一定要考虑这个where条件

15
00:00:45,946 --> 00:00:48,866
除非我现在就是真的要删除表里的所有的数据

16
00:00:48,866 --> 00:00:51,386
那这个时候你可以不用给定where条件

17
00:00:51,386 --> 00:00:52,026
是吧

18
00:00:52,026 --> 00:00:54,306
所以我们上一课所讲的更新数据也好

19
00:00:54,306 --> 00:00:56,346
还是现在所讲的delete语句也好

20
00:00:56,346 --> 00:00:58,106
我们在写这两种语句的时候

21
00:00:58,106 --> 00:01:00,066
一定要先考虑where条件是什么

22
00:01:00,066 --> 00:01:01,438
避免出现这样的错误

23
00:01:01,438 --> 00:01:03,162
< No Speech >

24
00:01:03,162 --> 00:01:06,562
在delete语句当中 如果没有给定删除条件

25
00:01:06,562 --> 00:01:09,882
则会删除表当中的所有的数据 这是非常可怕的

26
00:01:09,882 --> 00:01:11,562
好 我们来看一个示例

27
00:01:11,562 --> 00:01:18,122
示例要求我们删除emp3表当中的empid唯一的雇员信息

28
00:01:18,122 --> 00:01:19,678
我们看一下emp

29
00:01:20,378 --> 00:01:24,418
ID唯一的雇员信息是谁呢?是奥德卢,最爱的是北京

30
00:01:24,418 --> 00:01:26,270
对吧,我们要把这条数据删除掉

31
00:01:27,130 --> 00:01:31,090
那么我们来实现一下 首先是delete关键字

32
00:01:31,090 --> 00:01:33,010
然后from关键字 对吧

33
00:01:33,010 --> 00:01:34,850
然后你要删除哪个表的数据呢

34
00:01:34,850 --> 00:01:38,410
emp3 然后删除这个表当中哪个数据呢

35
00:01:38,410 --> 00:01:41,246
where emp下行线id等于

36
00:01:42,234 --> 00:01:45,406
对吧 把ID唯一的这个用户 这个员工

37
00:01:45,406 --> 00:01:47,002
< No Speech >

38
00:01:47,002 --> 00:01:49,310
好,我们看一下上面删掉,刷新

39
00:01:49,310 --> 00:01:51,610
< No Speech >

40
00:01:51,610 --> 00:01:55,486
OddLow已经没有了 是吧 这样我们就通过delete

41
00:01:55,486 --> 00:01:56,602
< No Speech >

42
00:01:56,602 --> 00:01:59,602
EMP3表当中的指定的数据了

43
00:01:59,602 --> 00:02:01,842
好 这是删除指定数据

44
00:02:01,842 --> 00:02:05,842
那么我们还可以使用delete删除表当中的所有的数据

45
00:02:05,842 --> 00:02:07,442
其实就是清空表嘛 怎么办呢

46
00:02:07,442 --> 00:02:08,922
把vr去掉就可以了

47
00:02:08,922 --> 00:02:11,322
对吧 delete from表名就ok了

48
00:02:11,322 --> 00:02:13,722
那么我们在清空表数据的时候

49
00:02:13,722 --> 00:02:15,962
或者叫删除表当中所有数据的时候

50
00:02:15,962 --> 00:02:17,682
我们可以使用delete以外

51
00:02:17,682 --> 00:02:21,522
还可以使用一个叫truncate的关键字来清空表

52
00:02:21,522 --> 00:02:24,722
它的作用呢 注意看同学们这一定要注意

53
00:02:24,722 --> 00:02:27,198
truncate的作用就是来清空表的

54
00:02:27,198 --> 00:02:30,362
< No Speech >

55
00:02:30,362 --> 00:02:32,482
一条数据或者某一部分数据

56
00:02:32,482 --> 00:02:33,882
他只能删除所有数据

57
00:02:33,882 --> 00:02:34,722
这是他的一个能力

58
00:02:34,722 --> 00:02:37,374
那么他的格式是chunkate

59
00:02:37,374 --> 00:02:40,218
< No Speech >

60
00:02:40,218 --> 00:02:45,246
好 那我们来看一下实例 我们要删除EMP3表中的所有数据

61
00:02:46,010 --> 00:02:48,250
那么怎么删呢?我们当然可以这么写啊

62
00:02:48,250 --> 00:02:51,010
delete from emp3

63
00:02:51,010 --> 00:02:53,022
这是没有问题的,我们执行一下

64
00:02:53,022 --> 00:02:56,634
< No Speech >

65
00:02:56,634 --> 00:02:59,454
数据没有了是吧 那我们随便再填点1

66
00:02:59,454 --> 00:03:04,922
< No Speech >

67
00:03:04,922 --> 00:03:06,682
我的JAX都是UNKNOW就可以了

68
00:03:06,682 --> 00:03:08,322
好 现在我又插入了两条数据

69
00:03:08,322 --> 00:03:11,122
比如说现在我想把这个表里的数据都清空掉

70
00:03:11,122 --> 00:03:12,702
我们除了可以使用

71
00:03:13,434 --> 00:03:16,034
Delete以外我们还可以使用这个Truncate

72
00:03:16,034 --> 00:03:17,886
Truncate关键字空格

73
00:03:17,886 --> 00:03:19,194
< No Speech >

74
00:03:19,194 --> 00:03:21,194
关键字然后表明

75
00:03:21,194 --> 00:03:22,526
比如说emp

76
00:03:22,526 --> 00:03:24,762
< No Speech >

77
00:03:24,762 --> 00:03:26,762
choreo k 好我们来看一下啊

78
00:03:26,762 --> 00:03:32,026
< No Speech >

79
00:03:32,026 --> 00:03:33,546
是不是表里的数据没有了

80
00:03:33,546 --> 00:03:35,774
哎 所以我们可以使用这个准K的关键字

81
00:03:35,774 --> 00:03:39,002
< No Speech >

82
00:03:39,002 --> 00:03:43,722
那么在清空表示,我们要知道delete用delete语句和

83
00:03:43,722 --> 00:03:45,962
存K的语句清空表示的一个区别

84
00:03:45,962 --> 00:03:50,602
存K的是整体删除,速度较快,delete是逐条删除,速度较慢

85
00:03:50,602 --> 00:03:53,322
存K是不写服务器log的,它不写日志的

86
00:03:53,322 --> 00:03:56,522
也就是说这个行为是不会被服务器的日志所记录的

87
00:03:56,522 --> 00:04:01,082
delete是写日志服务的,也就是存K的效率比delete高的原因

88
00:04:01,082 --> 00:04:03,562
正因为存K的不写日志,所以它的效率要高

89
00:04:03,562 --> 00:04:06,842
而delete是会把它的这次对数据库的操作行为

90
00:04:06,842 --> 00:04:08,062
把服务器会记录下来的

91
00:04:08,062 --> 00:04:09,210
< No Speech >

92
00:04:09,210 --> 00:04:11,134
然后Chunkator会重置

93
00:04:11,866 --> 00:04:14,886
相当于自增列会被初始化,又从1开始了

94
00:04:14,886 --> 00:04:16,626
而不是原来的值

95
00:04:16,626 --> 00:04:19,286
而delete删除后,自增值仍然会继续累积

96
00:04:19,286 --> 00:04:21,746
什么意思呢?就是对于组件自增这样的处理

97
00:04:21,746 --> 00:04:23,646
Shrinkhead会把制动值初始化

98
00:04:23,646 --> 00:04:24,698
< No Speech >

99
00:04:24,698 --> 00:04:31,358
而delete删除表以后,你再插入数据时,它仍然是从最后一次使用的这个值继续向下累加

100
00:04:31,930 --> 00:04:36,490
那么我们在清空表时到底是用delay还是准k

101
00:04:36,490 --> 00:04:40,190
其实我们在开发的时候对于表的清空我们一般是很难处理的

102
00:04:40,922 --> 00:04:44,922
一般对于表清空这样的行为都是由我们数据库的DBA

103
00:04:44,922 --> 00:04:47,122
数据库管理员他来负责的

104
00:04:47,122 --> 00:04:50,522
那么他用哪种这还要看具体的业务操作

105
00:04:50,522 --> 00:04:52,242
比如说用Truncate他速度是快

106
00:04:52,242 --> 00:04:54,622
但是他有一个致命的缺点就是不写服务器logo

107
00:04:54,622 --> 00:04:56,506
< No Speech >

108
00:04:56,506 --> 00:05:00,026
不会他的这个行为不被数据库所服务器所记录的

109
00:05:00,026 --> 00:05:01,306
而delete虽然是慢

110
00:05:01,306 --> 00:05:03,386
但是它会被服务器所记录的这个行为

111
00:05:03,386 --> 00:05:03,986
明白这一次吧

112
00:05:03,986 --> 00:05:06,506
哎 所以到底用哪个字看DBA的习惯了啊

113
00:05:06,506 --> 00:05:07,610
< No Speech >

114
00:05:07,610 --> 00:05:14,650
那么我们这里更应该关注什么呢?关注如何使用delete删除指定数据

115
00:05:14,650 --> 00:05:17,770
明白吧?至于清空表你用delete也可以用tuncate也可以

116
00:05:17,770 --> 00:05:20,730
而且tuncate是不支持删除指定数据的

117
00:05:20,730 --> 00:05:21,930
它只能清空表

118
00:05:21,930 --> 00:05:23,050
这个同学们一定要记住

119
00:05:23,050 --> 00:05:23,810
好

120
00:05:23,810 --> 00:05:25,342
我们来看一下实时效果反馈

121
00:05:25,342 --> 00:05:26,394
< No Speech >

122
00:05:26,394 --> 00:05:29,594
删除数据的语句delete,然后后面是什么呢?

123
00:05:29,594 --> 00:05:31,322
< No Speech >

124
00:05:31,322 --> 00:05:33,790
空格Value 空格条件B

125
00:05:33,790 --> 00:05:35,482
< No Speech >

126
00:05:35,482 --> 00:05:36,958
空格条件C

127
00:05:37,594 --> 00:05:41,114
空格条件,空格表明,空格表明D

128
00:05:41,818 --> 00:05:43,934
空格表明空格位

129
00:05:44,858 --> 00:05:47,198
那么答案应该是哪个呢?同学们考虑一下

130
00:05:47,802 --> 00:05:49,502
是不是很显然应该是

131
00:05:49,502 --> 00:05:50,682
< No Speech >

132
00:05:50,682 --> 00:05:56,382
delete语句的格式是delete from空格表明空格vr空格条件

133
00:05:57,274 --> 00:06:02,398
这个VAL条件,像C它是条件的位置不能出现变化的

134
00:06:02,398 --> 00:06:03,546
< No Speech >

135
00:06:03,546 --> 00:06:06,046
好,我们来看一下,答案是D,没有问题

136
00:06:06,046 --> 00:06:09,986
好,同学们,那么如何使用delete语句删除数据呢?

137
00:06:09,986 --> 00:06:12,606
我们就讲这么多,好,那我们这一课就到这,拜拜!

