1
00:00:00,986 --> 00:00:06,706
这节课我们再来讲解一下如何添加外件约束Foreign Key

2
00:00:06,706 --> 00:00:09,278
那么同学们对这个外件约束

3
00:00:09,978 --> 00:00:11,378
不太很了解

4
00:00:11,378 --> 00:00:15,098
那么我们先花一点时间来详细的介绍一下

5
00:00:15,098 --> 00:00:18,418
这个外建约束到底是一个什么样的约束

6
00:00:18,418 --> 00:00:19,858
那么我们回顾一下

7
00:00:19,858 --> 00:00:22,978
之前我们在讲解MySQL的约束类型的时候

8
00:00:22,978 --> 00:00:23,518
我们说过

9
00:00:23,518 --> 00:00:24,666
< No Speech >

10
00:00:24,666 --> 00:00:25,946
它有这么三个特点

11
00:00:26,586 --> 00:00:28,190
它是允许有重复的。

12
00:00:28,762 --> 00:00:30,238
他允许空直。

13
00:00:30,874 --> 00:00:35,422
如果它有值,这个值必须得是它所参照的那个表当中的

14
00:00:35,422 --> 00:00:36,442
< No Speech >

15
00:00:36,442 --> 00:00:38,494
列 组件列当中所包含的值

16
00:00:39,034 --> 00:00:40,554
外界约束的一个特点

17
00:00:40,554 --> 00:00:40,994
对不对

18
00:00:40,994 --> 00:00:45,354
那么我们在什么情况下会用到外界约束呢

19
00:00:45,354 --> 00:00:49,874
它的作用就是为了保证数据的一个参照完整性的

20
00:00:49,874 --> 00:00:51,678
什么叫参照完整性呢?

21
00:00:51,678 --> 00:00:54,522
< No Speech >

22
00:00:54,522 --> 00:00:56,798
在我这个图当中有两张表

23
00:00:56,798 --> 00:00:57,946
< No Speech >

24
00:00:57,946 --> 00:00:59,390
安普拉AE员工表

25
00:00:59,390 --> 00:01:01,498
< No Speech >

26
00:01:01,498 --> 00:01:04,058
那么员工表里存放的就是员工的信息

27
00:01:04,058 --> 00:01:07,098
department的部门表里存放的就是部门的信息

28
00:01:07,098 --> 00:01:11,422
那么员工是不是都应该属于某个部门的呀?

29
00:01:12,122 --> 00:01:15,762
由于我们现在在官型数据库里存储数据时

30
00:01:15,762 --> 00:01:20,162
它所提供的存储方式是一个二维的表空间-行根列

31
00:01:20,162 --> 00:01:20,762
对吧

32
00:01:20,762 --> 00:01:22,366
那么我们要想描述

33
00:01:22,366 --> 00:01:23,418
< No Speech >

34
00:01:23,418 --> 00:01:26,558
和另一个表的哪条数据有关联性的时候该怎么办呢?

35
00:01:26,558 --> 00:01:27,738
< No Speech >

36
00:01:27,738 --> 00:01:33,342
添加一个新的列,然后通过数据本身去决定这些数据谁跟谁是有关联的

37
00:01:34,138 --> 00:01:37,338
对吧同学们 那么在关联的过程当中

38
00:01:37,338 --> 00:01:39,418
我们为了保证它关联的正确性

39
00:01:39,418 --> 00:01:43,738
可以加一个参照完整性约束 就是外界约束

40
00:01:43,738 --> 00:01:44,702
举个例子

41
00:01:45,658 --> 00:01:48,094
现在在员工表当中我想来

42
00:01:48,826 --> 00:01:53,306
决定来记录我当前这些员工都是属于哪个部门的

43
00:01:53,306 --> 00:01:55,986
我在员工表里肯定要加一个新的列

44
00:01:55,986 --> 00:01:57,342
这个列叫第一P

45
00:01:57,342 --> 00:01:58,746
< No Speech >

46
00:01:58,746 --> 00:02:02,346
那么这里面放的就是department的部门表的ID

47
00:02:02,346 --> 00:02:05,598
这样我就知道这个员工是属于哪个部门的了

48
00:02:05,598 --> 00:02:06,682
< No Speech >

49
00:02:06,682 --> 00:02:11,902
但是大家想这样的一个问题 这个列的值允不允许有空值呢?

50
00:02:12,858 --> 00:02:14,138
答案肯定是允许的

51
00:02:14,138 --> 00:02:14,738
什么意思

52
00:02:14,738 --> 00:02:16,702
我现在新入职一个员工

53
00:02:17,466 --> 00:02:20,030
我这个员工还没有分配部门呢

54
00:02:20,030 --> 00:02:22,266
< No Speech >

55
00:02:22,266 --> 00:02:24,830
所以说这个列子值肯定是允许有空的

56
00:02:25,594 --> 00:02:28,274
这个列子值允不允许有重复的呢

57
00:02:28,634 --> 00:02:29,754
答案肯定也是可以的

58
00:02:29,754 --> 00:02:30,434
为什么

59
00:02:30,434 --> 00:02:32,394
我一个部门下有多个员工

60
00:02:32,394 --> 00:02:35,834
张三、李四、王五都属于研发部的

61
00:02:35,834 --> 00:02:38,494
那他们的DPTID肯定是相同的呀

62
00:02:39,066 --> 00:02:41,066
对不对 肯定是允许有重复的

63
00:02:41,066 --> 00:02:43,186
如果你要不允许有重复反而不对了

64
00:02:43,186 --> 00:02:44,866
这是第二个特点

65
00:02:44,866 --> 00:02:45,866
第三个特点

66
00:02:45,866 --> 00:02:48,666
如果我这里有值是不是应该记录的

67
00:02:48,666 --> 00:02:52,546
应该存放的是department的部门表的id的值

68
00:02:52,546 --> 00:02:53,106
为什么

69
00:02:53,106 --> 00:02:56,946
因为department的部门表的id决定了它是哪个部门

70
00:02:57,066 --> 00:02:58,346
它是组件是唯一的

71
00:02:58,346 --> 00:02:59,586
对不对

72
00:02:59,586 --> 00:03:00,826
如果我这里的值

73
00:03:00,826 --> 00:03:03,626
安普莱伊员工表当中的dpt的值

74
00:03:03,626 --> 00:03:06,226
并不是department的表当中的id的值

75
00:03:06,226 --> 00:03:07,146
那就有问题了

76
00:03:07,146 --> 00:03:10,586
比如说我这里张三他的第一批第一批下午茶

77
00:03:10,586 --> 00:03:11,586
id是3

78
00:03:11,586 --> 00:03:14,266
这个数据肯定是错误的

79
00:03:14,266 --> 00:03:14,986
为什么

80
00:03:14,986 --> 00:03:17,466
我现在压根就没有一个部门

81
00:03:17,466 --> 00:03:18,306
它的id是3

82
00:03:18,306 --> 00:03:20,990
那这个id为3的部门是什么部门

83
00:03:20,990 --> 00:03:22,458
< No Speech >

84
00:03:22,458 --> 00:03:24,218
那这个张三他属于哪个部门的

85
00:03:24,218 --> 00:03:24,926
这不就出错了嘛

86
00:03:24,926 --> 00:03:26,874
< No Speech >

87
00:03:26,874 --> 00:03:28,990
第一批下滑线ID这个

88
00:03:28,990 --> 00:03:31,194
< No Speech >

89
00:03:31,194 --> 00:03:35,034
在department的部门表当中的ID这一列的值所包含的值

90
00:03:35,034 --> 00:03:36,514
如果不是他所包含的值

91
00:03:36,514 --> 00:03:40,190
这个值是不允许这条员工数据是不允许查我的安波赖伊表的

92
00:03:40,190 --> 00:03:41,306
< No Speech >

93
00:03:41,306 --> 00:03:42,146
明白这意思吧

94
00:03:42,146 --> 00:03:45,586
那你看如上的三种条件

95
00:03:45,586 --> 00:03:46,386
三种情况

96
00:03:46,586 --> 00:03:48,306
第一第一批t它是记录

97
00:03:48,306 --> 00:03:51,070
啊首先第一批是记录departure们的表当中的这个

98
00:03:51,642 --> 00:03:54,122
部门ID的 是吧 然后这一列有三个特点

99
00:03:54,122 --> 00:03:56,362
第一 允许有重复 第二允许有空

100
00:03:56,362 --> 00:04:00,122
第三 如果有值 必须得是department表当中的这个ID

101
00:04:00,122 --> 00:04:01,566
这一个组件这一列的

102
00:04:01,566 --> 00:04:04,186
< No Speech >

103
00:04:04,186 --> 00:04:08,026
如果符合这三种情况的约束 是不是只有外界约束啊?

104
00:04:08,026 --> 00:04:12,990
对不对?那所以我们就可以为第一P下方线ID这个链添加一个约束

105
00:04:13,818 --> 00:04:17,118
让他去参照于department的这个部门表当中的

106
00:04:17,118 --> 00:04:19,514
< No Speech >

107
00:04:19,514 --> 00:04:23,874
明白这一次了吗?同学们,这样这一类的值就不能随便乱填了

108
00:04:23,874 --> 00:04:27,870
必须得来源于它这里所包含的值,你才能填进来。

109
00:04:28,538 --> 00:04:31,258
DEPT里的值不是ID里所拥有的值

110
00:04:31,258 --> 00:04:32,926
那这条数据是无法插入的

111
00:04:32,926 --> 00:04:34,010
< No Speech >

112
00:04:34,010 --> 00:04:36,450
OK,这就是参照完整性

113
00:04:36,450 --> 00:04:40,290
好,那我们再来看一下,修改表添加外界约数

114
00:04:40,290 --> 00:04:42,930
我们可以使用DDR语句添加外界约数

115
00:04:42,930 --> 00:04:47,166
也可以使用NaviCat工具添加外界约数

116
00:04:47,166 --> 00:04:48,538
< No Speech >

117
00:04:48,538 --> 00:04:51,738
如何使用DDR语句添加外界约束呢?

118
00:04:51,738 --> 00:04:55,538
它的语法是alter table表明

119
00:04:55,538 --> 00:04:56,478
然后注意

120
00:04:56,478 --> 00:05:00,442
< No Speech >

121
00:05:00,442 --> 00:05:02,922
Consent不就是约束限制的意思吗?是吧

122
00:05:02,922 --> 00:05:07,202
Add Consent,然后约束名,然后Foreign Key

123
00:05:07,202 --> 00:05:10,682
注意啊,外界约束必须要有一个约束名的

124
00:05:10,682 --> 00:05:13,122
明白吧,这个约束名是我们自定义的

125
00:05:13,122 --> 00:05:16,522
一般外界约束的约束名我们会怎么去起这个名字呢?

126
00:05:16,522 --> 00:05:20,082
我们会用当前的表名加下滑线加一个FK

127
00:05:20,082 --> 00:05:21,950
表示这是一个外界约束的名字

128
00:05:21,950 --> 00:05:23,738
< No Speech >

129
00:05:23,738 --> 00:05:27,658
关键字foreignkey,在foreignkey当中再加一个括号

130
00:05:27,658 --> 00:05:28,978
在key的后面加一个括号

131
00:05:28,978 --> 00:05:31,698
你要让哪个列具备一个外界约数

132
00:05:31,698 --> 00:05:34,538
比如说以我们这个图片里的例子为例

133
00:05:34,538 --> 00:05:40,498
我现在想让这个DEPTID具备一个外界约数

134
00:05:40,498 --> 00:05:44,378
那我们就把这个DEPT下方线ID写到key的括号当中

135
00:05:44,378 --> 00:05:46,138
然后既然是外界约数了

136
00:05:46,138 --> 00:05:47,778
它肯定要有一个参照

137
00:05:47,778 --> 00:05:48,378
对吧

138
00:05:48,378 --> 00:05:50,978
这个值到底是可以写哪些值

139
00:05:50,978 --> 00:05:54,098
不取决于被参照的那个表的参照列

140
00:05:54,098 --> 00:05:57,258
所以就会用一个reference参照

141
00:05:57,258 --> 00:06:01,918
然后后面空格跟参照的表的表名括号参照列的

142
00:06:01,918 --> 00:06:03,226
< No Speech >

143
00:06:03,226 --> 00:06:04,066
明白了吧

144
00:06:04,066 --> 00:06:05,118
哎这就是

145
00:06:05,118 --> 00:06:06,554
< No Speech >

146
00:06:06,554 --> 00:06:10,234
外建约束的一个语法 它的语法还是比较复杂的

147
00:06:10,234 --> 00:06:10,594
是吧

148
00:06:10,594 --> 00:06:11,834
好 我们来看一个实例

149
00:06:11,834 --> 00:06:17,474
实例一 要求创建department表包含departmentid

150
00:06:17,474 --> 00:06:18,622
departmentname和departmentid

151
00:06:18,622 --> 00:06:19,642
< No Speech >

152
00:06:19,642 --> 00:06:22,522
也就是说我们现在需要创建一个部门表

153
00:06:22,522 --> 00:06:26,962
这部门表当中有三个属性三个例

154
00:06:27,930 --> 00:06:29,278
不买ID不买NAME

155
00:06:29,278 --> 00:06:30,586
< No Speech >

156
00:06:30,586 --> 00:06:33,182
那么这三个列我们类型是什么样的呢?

157
00:06:33,182 --> 00:06:34,298
< No Speech >

158
00:06:34,298 --> 00:06:38,538
就是一个序号,可以给它一个int类型的

159
00:06:38,538 --> 00:06:40,030
然后呢department name

160
00:06:40,826 --> 00:06:45,626
这个支付串类型location id就是一个location的工作的一个地址

161
00:06:45,626 --> 00:06:46,986
位置的一个编号

162
00:06:46,986 --> 00:06:48,546
那我们可以给他一个int类型

163
00:06:48,546 --> 00:06:50,622
好 我们把这个表先创建出来

164
00:06:50,622 --> 00:06:55,482
< No Speech >

165
00:06:55,482 --> 00:07:02,110
创建表语句还记得吧?Create a table,表明Department

166
00:07:02,110 --> 00:07:03,386
< No Speech >

167
00:07:03,386 --> 00:07:12,030
表里的列名类型,有什么类型呢?有department下滑线ID,什么类型呢?int类型

168
00:07:12,890 --> 00:07:17,590
然后department下滑线name什么类型呢?

169
00:07:17,590 --> 00:07:18,370
网球

170
00:07:18,370 --> 00:07:19,578
< No Speech >

171
00:07:19,578 --> 00:07:22,718
长度、部门名称,我给他10个也够了

172
00:07:23,546 --> 00:07:29,706
然后还有一个什么location ID 工作地址的一个ID 工作城市的一个ID 位置的一个ID 对吧

173
00:07:29,706 --> 00:07:31,866
< No Speech >

174
00:07:31,866 --> 00:07:36,906
它呢我们也给它一个int类型的这样的一个类型就可以了啊

175
00:07:36,906 --> 00:07:38,910
OK,然后我们执行

176
00:07:38,910 --> 00:07:43,066
< No Speech >

177
00:07:43,066 --> 00:07:46,266
看一下这里是不是多了一个departments这样的一个表

178
00:07:46,266 --> 00:07:48,506
对不对 那么这样第一个事例

179
00:07:49,242 --> 00:07:51,422
这样我们第一个试题就搞定了

180
00:07:51,422 --> 00:08:00,890
< No Speech >

181
00:08:00,890 --> 00:08:03,610
我们再来看第二个示例

182
00:08:03,610 --> 00:08:08,570
第二个示例它要求我们修改department表

183
00:08:08,570 --> 00:08:12,970
向department的ID列添加组件约束和自动递征

184
00:08:12,970 --> 00:08:15,850
也就是说我们现在department表还没有组件

185
00:08:15,850 --> 00:08:17,090
我们要给它分配一个组件

186
00:08:17,090 --> 00:08:17,598
这是ั

187
00:08:18,458 --> 00:08:21,338
所参照的列一般都是主件列

188
00:08:21,338 --> 00:08:22,618
是必须要是主件列的

189
00:08:22,618 --> 00:08:23,378
明白这意思吧

190
00:08:23,378 --> 00:08:27,538
所以我们未来department的departmentid是要

191
00:08:28,218 --> 00:08:30,618
安普赖意表中的某个列是会参照的

192
00:08:30,618 --> 00:08:32,030
所以它必须得是逐渐列

193
00:08:32,030 --> 00:08:33,306
< No Speech >

194
00:08:33,306 --> 00:08:37,982
那就是alter table,然后呢departments

195
00:08:37,982 --> 00:08:41,946
< No Speech >

196
00:08:41,946 --> 00:08:44,346
谁 为谁添加组件约束呢

197
00:08:44,346 --> 00:08:45,594
< No Speech >

198
00:08:45,594 --> 00:08:47,390
Mint 下文线 ID

199
00:08:47,390 --> 00:08:49,146
< No Speech >

200
00:08:49,146 --> 00:08:52,146
现在它就是一个组件了 我们来看一下是不是这样的

201
00:08:52,146 --> 00:08:53,434
< No Speech >

202
00:08:53,434 --> 00:08:55,434
用NaviCAD看一下刷新

203
00:08:55,434 --> 00:08:59,450
< No Speech >

204
00:08:59,450 --> 00:09:03,210
有小钥匙出现了是主键是吧 但是它还不是自动递增的呢

205
00:09:03,210 --> 00:09:06,490
我们还得给它加自动递增 自动递增怎么加呀

206
00:09:06,490 --> 00:09:07,934
是不是修改这个列的

207
00:09:07,934 --> 00:09:09,914
< No Speech >

208
00:09:09,914 --> 00:09:11,834
添加一个autoincrement是吧

209
00:09:11,834 --> 00:09:12,798
auto

210
00:09:12,798 --> 00:09:16,282
< No Speech >

211
00:09:16,282 --> 00:09:17,758
Depart

212
00:09:17,758 --> 00:09:19,450
< No Speech >

213
00:09:19,450 --> 00:09:22,366
然后Modify Departments

214
00:09:23,322 --> 00:09:25,322
ment 下滑械id

215
00:09:25,322 --> 00:09:27,322
int 类型

216
00:09:27,322 --> 00:09:28,766
下滑械int

217
00:09:28,766 --> 00:09:36,538
< No Speech >

218
00:09:36,538 --> 00:09:37,938
Department

219
00:09:37,938 --> 00:09:44,090
< No Speech >

220
00:09:44,090 --> 00:09:46,494
看一下departmentID是不是自动递征了

221
00:09:46,494 --> 00:09:48,314
< No Speech >

222
00:09:48,314 --> 00:09:55,594
然后接下来我们再看势力三要求我们修改emp表添加dptid列

223
00:09:55,594 --> 00:10:00,914
我们现在emp表是没有记录员工的部门ID的列的

224
00:10:00,914 --> 00:10:02,074
所以我们要添加新的列

225
00:10:02,074 --> 00:10:02,514
对吧

226
00:10:02,514 --> 00:10:04,394
那么添加新的列的语句是什么

227
00:10:04,394 --> 00:10:07,554
是不是仍然是alter还是d.l语句

228
00:10:07,554 --> 00:10:07,998
是吧

229
00:10:07,998 --> 00:10:09,882
< No Speech >

230
00:10:09,882 --> 00:10:12,082
然后表明EMP 对吧

231
00:10:12,082 --> 00:10:14,202
然后对它做什么修改呢

232
00:10:14,202 --> 00:10:15,402
添加新的列

233
00:10:15,402 --> 00:10:16,734
那就是add

234
00:10:16,734 --> 00:10:17,850
< No Speech >

235
00:10:17,850 --> 00:10:22,250
这个列的列名叫什么呢?叫DEPT下滑性ID,什么类型呢?

236
00:10:22,250 --> 00:10:23,802
< No Speech >

237
00:10:23,802 --> 00:10:25,802
对吧 因为我这个值未来是

238
00:10:26,714 --> 00:10:31,274
department表当中的department id当中所拥有的是

239
00:10:31,274 --> 00:10:32,194
它是int类型的

240
00:10:32,194 --> 00:10:33,662
那我这肯定也得是int类型

241
00:10:33,662 --> 00:10:35,418
< No Speech >

242
00:10:35,418 --> 00:10:36,258
好Core OK

243
00:10:36,258 --> 00:10:37,502
好我们再看一下

244
00:10:38,298 --> 00:10:39,646
ENP设计表

245
00:10:40,602 --> 00:10:43,042
是不是多了一个departmentid int类型的

246
00:10:43,042 --> 00:10:43,322
是吧

247
00:10:43,322 --> 00:10:47,842
但是现在这个表还没有不具备外界约数

248
00:10:47,842 --> 00:10:51,002
那么现在这个列的值到底能添什么

249
00:10:51,002 --> 00:10:53,470
我们是不是得给它添加一个外界约数啊

250
00:10:54,298 --> 00:10:57,498
添加外界约束,我们来看一下实例4

251
00:10:57,498 --> 00:11:01,938
向ENP表当中的ENDPTID列添加外界约束

252
00:11:01,938 --> 00:11:04,158
外界约束ENP

253
00:11:04,158 --> 00:11:06,394
< No Speech >

254
00:11:06,394 --> 00:11:08,394
然后约束名

255
00:11:08,394 --> 00:11:09,598
然后foreign key

256
00:11:09,598 --> 00:11:11,994
< No Speech >

257
00:11:11,994 --> 00:11:14,334
Departments参照于哪个表的?

258
00:11:14,334 --> 00:11:15,610
< No Speech >

259
00:11:15,610 --> 00:11:18,302
没有这意思吧?好,我们来添加一下

260
00:11:18,302 --> 00:11:21,690
< No Speech >

261
00:11:21,690 --> 00:11:23,930
首先是alter

262
00:11:24,826 --> 00:11:29,662
然后修改它什么呢?添加一个

263
00:11:29,662 --> 00:11:31,802
< No Speech >

264
00:11:31,802 --> 00:11:34,562
添加一个约束 这个约束的名叫什么呢?

265
00:11:34,562 --> 00:11:37,162
我们说了这个外界约束这个名称

266
00:11:37,162 --> 00:11:40,442
一般我们都用当前表加下画线加一个FK

267
00:11:40,442 --> 00:11:43,762
如果你的一个表里有多个外界约束

268
00:11:43,762 --> 00:11:45,854
一个表里是允许有多个外界约束的

269
00:11:45,854 --> 00:11:47,034
< No Speech >

270
00:11:47,034 --> 00:11:53,434
多个不同的表 那么这个时候可以用FK1 FK2 FK3来加一个编号区分一下就可以了

271
00:11:53,434 --> 00:11:58,462
EMPFK然后加的是什么约数呢?

272
00:11:58,462 --> 00:12:00,026
< No Speech >

273
00:12:00,026 --> 00:12:01,386
IgEn foreign key

274
00:12:01,386 --> 00:12:03,346
然后空格这里面给谁呢

275
00:12:03,346 --> 00:12:05,506
dpt下滑线id

276
00:12:05,506 --> 00:12:08,626
让这一类这个列具备一个外建约束

277
00:12:08,626 --> 00:12:10,226
那么既然是外建约束了

278
00:12:10,226 --> 00:12:11,986
肯定要有参照是吧

279
00:12:11,986 --> 00:12:13,466
参照谁呢

280
00:12:13,466 --> 00:12:16,866
参照reference

281
00:12:16,866 --> 00:12:19,946
然后后面跟的是先参照于哪个表

282
00:12:19,946 --> 00:12:23,826
departments这个表当中的哪个列呢

283
00:12:23,826 --> 00:12:25,118
depart

284
00:12:25,118 --> 00:12:27,770
< No Speech >

285
00:12:27,770 --> 00:12:29,214
下滑线ID

286
00:12:29,214 --> 00:12:33,242
< No Speech >

287
00:12:33,242 --> 00:12:34,526
现在呢你的这个

288
00:12:35,130 --> 00:12:38,870
第一PTI地链就已经具备了外界约束了

289
00:12:38,870 --> 00:12:42,078
好,我们来看一下,这个具备外界约束以后

290
00:12:42,078 --> 00:12:43,610
< No Speech >

291
00:12:43,610 --> 00:12:45,930
首先在哪看它具备外界音乐输入呢

292
00:12:45,930 --> 00:12:47,902
我们选用ENP表设计表

293
00:12:48,794 --> 00:12:50,750
然后看这有一个外焰 看到了吗?

294
00:12:50,750 --> 00:12:52,634
< No Speech >

295
00:12:52,634 --> 00:12:54,334
EMP下滑器FK

296
00:12:54,334 --> 00:12:56,446
这不就是我们创建的外界约束的名字嘛

297
00:12:57,114 --> 00:13:02,714
让这个栏目指的就是这个表里的谁具备Y-阶级数 D,P,T,I,D这个列

298
00:13:02,714 --> 00:13:07,754
然后参考数据库北京商业堂 数据库的哪个表呢?

299
00:13:07,754 --> 00:13:10,394
Department的表 Department的表的哪个列呢?

300
00:13:10,394 --> 00:13:10,942
Department的表的哪个列呢?

301
00:13:11,738 --> 00:13:18,098
看到了吗同学们?那么接下来我们看一下添加外界约束以后约束的效果是什么样的

302
00:13:18,098 --> 00:13:22,718
比如说我双击department的表,在这里添加点数据,id为1的

303
00:13:22,718 --> 00:13:23,898
< No Speech >

304
00:13:23,898 --> 00:13:27,038
研发部啊 location ID我们随便给吧

305
00:13:27,038 --> 00:13:29,114
< No Speech >

306
00:13:29,114 --> 00:13:31,034
然后departmentid为2

307
00:13:31,034 --> 00:13:32,862
这个是销售部

308
00:13:32,862 --> 00:13:37,178
< No Speech >

309
00:13:37,178 --> 00:13:41,498
然后他的locationid也是1,这小locationid不重要,不用管它

310
00:13:41,498 --> 00:13:42,858
Configure.s保存了

311
00:13:42,858 --> 00:13:46,590
这是我department表里面所拥有的两条数据啊

312
00:13:47,226 --> 00:13:51,466
现在我们再打开EMP表 这个主件已经被我们删掉了

313
00:13:51,466 --> 00:13:54,466
我们先来看 第一个 欧斗罗 它是属于研发部的

314
00:13:54,466 --> 00:13:55,666
我们给1就可以了

315
00:13:55,666 --> 00:13:58,706
然后你看 现在在这个选项当中还有三个点

316
00:13:58,706 --> 00:14:00,386
有个小按钮 我们点它

317
00:14:00,386 --> 00:14:05,266
由于现在你已经为这个表的这个列设置成外界约束了

318
00:14:05,266 --> 00:14:07,426
这一块它直接就会给你一个数据提示

319
00:14:07,426 --> 00:14:08,958
这是NaviCat的一个工具的

320
00:14:09,882 --> 00:14:15,362
告诉你现在在department的这个表的department的ID列里有两个值你可以选

321
00:14:15,362 --> 00:14:17,282
你可以选择也可以手动填写

322
00:14:17,282 --> 00:14:17,962
明白这一次吧

323
00:14:17,962 --> 00:14:19,322
比如说我填个1

324
00:14:19,322 --> 00:14:20,830
就是没有问题的啊

325
00:14:20,830 --> 00:14:23,226
< No Speech >

326
00:14:23,226 --> 00:14:27,550
是拥有2的,这话我就上个我手田的,这个我自动选

327
00:14:27,550 --> 00:14:30,010
< No Speech >

328
00:14:30,010 --> 00:14:32,890
二都进来了 看到了吗 然后肯确还是保存

329
00:14:32,890 --> 00:14:34,130
没有问题的 对不对

330
00:14:34,130 --> 00:14:36,850
然后我再添加一个数据ID为3

331
00:14:36,850 --> 00:14:38,270
然后这个人呢叫

332
00:14:38,270 --> 00:14:41,914
< No Speech >

333
00:14:41,914 --> 00:14:43,678
然后呢他的薪水是

334
00:14:44,506 --> 00:14:46,654
然后注意看我这里什么值都不给

335
00:14:46,654 --> 00:14:47,930
< No Speech >

336
00:14:47,930 --> 00:14:49,438
准不准许没有问题的

337
00:14:49,438 --> 00:14:51,482
< No Speech >

338
00:14:51,482 --> 00:14:54,842
具备外界约束的列是允许有空的

339
00:14:54,842 --> 00:14:57,242
张三这个人刚入职还没分配部门呢

340
00:14:57,242 --> 00:14:58,014
是允许的呀

341
00:14:58,746 --> 00:15:01,826
好 我们再添加一个数据 4 ID为4的

342
00:15:01,826 --> 00:15:04,702
这个是李四 薪水也是2000

343
00:15:04,702 --> 00:15:06,010
< No Speech >

344
00:15:06,010 --> 00:15:08,222
它的department id是1

345
00:15:08,222 --> 00:15:10,234
< No Speech >

346
00:15:10,234 --> 00:15:15,114
没有问题 说明李四他也是研发部的和奥德卢是同事

347
00:15:15,114 --> 00:15:16,914
同一个部门的同事 可以吧

348
00:15:16,914 --> 00:15:20,474
好 我再加一个数据ID为5

349
00:15:20,474 --> 00:15:21,086
然后

350
00:15:21,086 --> 00:15:22,426
< No Speech >

351
00:15:22,426 --> 00:15:24,226
然后薪水也是2000

352
00:15:24,226 --> 00:15:28,446
注意现在他的department id是3

353
00:15:28,446 --> 00:15:30,298
< No Speech >

354
00:15:30,298 --> 00:15:31,646
马上报错了

355
00:15:32,314 --> 00:15:34,750
不能添加这条数据 为什么 因为它违法了

356
00:15:34,750 --> 00:15:37,626
< No Speech >

357
00:15:37,626 --> 00:15:43,906
他所参照的department这个departmentid当中是没有id为3的这条数据的

358
00:15:43,906 --> 00:15:46,238
看到了吗?这条数据是插而不进去的

359
00:15:46,238 --> 00:15:47,578
< No Speech >

360
00:15:47,578 --> 00:15:49,578
你看你一点保存也没用

361
00:15:49,578 --> 00:15:50,818
你是保存不了的

362
00:15:50,818 --> 00:15:52,098
所以你只能不保存

363
00:15:52,098 --> 00:15:54,046
不保存打开一看这条数据哪有啊

364
00:15:54,046 --> 00:15:55,610
< No Speech >

365
00:15:55,610 --> 00:16:01,290
这条数据没有插进去的原因就是我的departmentid这一列已经添加了外界约束了

366
00:16:01,290 --> 00:16:03,710
它的值必须要参照于

367
00:16:04,314 --> 00:16:08,394
Department的这个表的Department的ID列里的值

368
00:16:08,394 --> 00:16:11,514
现在在那个列里没有ID为3的这样的一个部门

369
00:16:11,514 --> 00:16:14,034
部门编号所以我这条数据是查不进去的

370
00:16:14,034 --> 00:16:18,590
这不就相当于开启了一个参照完整参照完整性的一个数据校验吗

371
00:16:19,226 --> 00:16:23,546
明白了同学们 这样是不是更加直观的去理解了什么是外界约束网

372
00:16:23,546 --> 00:16:25,662
也非常简单 不是我们想象的那么复杂

373
00:16:25,662 --> 00:16:27,674
< No Speech >

374
00:16:27,674 --> 00:16:31,834
那么以上我们就通过DDR语句去添加了一个这个

375
00:16:32,730 --> 00:16:36,170
那么如果我们用NaviCAD添加万亿音乐数该怎么去做呢?

376
00:16:36,170 --> 00:16:37,822
这个过程也非常简单啊

377
00:16:37,822 --> 00:16:39,866
< No Speech >

378
00:16:39,866 --> 00:16:41,866
比如说我们先设计表

379
00:16:41,866 --> 00:16:45,466
< No Speech >

380
00:16:45,466 --> 00:16:47,706
现在它是没有外界约束的 是吧

381
00:16:47,706 --> 00:16:48,506
没有外界约束

382
00:16:48,506 --> 00:16:50,334
然后我要为它添加外界约束

383
00:16:50,334 --> 00:16:53,274
< No Speech >

384
00:16:53,274 --> 00:16:56,554
然后选择外界 这里首先给你的外界起个名字

385
00:16:56,554 --> 00:17:00,894
比如说我叫外界约束起个名字 我叫emp-fk

386
00:17:00,894 --> 00:17:02,970
< No Speech >

387
00:17:02,970 --> 00:17:07,250
所谓的栏目就是你让这个表当中的哪个列具备外界约束

388
00:17:07,250 --> 00:17:10,890
我要让DPD下方线ID这个列具备一个外界约束

389
00:17:10,890 --> 00:17:14,450
然后参考哪个数据库呢?参考北京商业堂这个库

390
00:17:14,450 --> 00:17:17,130
这个库里的哪个表呢?department这个表

391
00:17:17,130 --> 00:17:20,094
这个表的哪个列呢?department ID这个列

392
00:17:20,826 --> 00:17:22,238
好 后面不用管它

393
00:17:22,238 --> 00:17:23,610
< No Speech >

394
00:17:23,610 --> 00:17:26,846
这样你就为ENP表添加了一个

395
00:17:26,846 --> 00:17:27,962
< No Speech >

396
00:17:27,962 --> 00:17:30,718
整个过程非常简单,用鼠标

397
00:17:31,610 --> 00:17:36,050
点击输入点内容就可以实现添加外界约束了

398
00:17:36,050 --> 00:17:37,250
其实还是那句话

399
00:17:37,250 --> 00:17:40,894
Navigate会帮助我们生成添加外界约束的

400
00:17:40,894 --> 00:17:43,898
< No Speech >

401
00:17:43,898 --> 00:17:46,462
好 我们再来看一下实时效果反馈

402
00:17:46,462 --> 00:17:47,898
< No Speech >

403
00:17:47,898 --> 00:17:55,658
添加外界约束的语句,alter table表明add constant,constant后面给的是什么呢?

404
00:17:55,658 --> 00:17:59,390
A,foreign key列明reference参照表

405
00:17:59,390 --> 00:18:00,634
< No Speech >

406
00:18:00,634 --> 00:18:02,430
参照列的 参照的列名

407
00:18:03,130 --> 00:18:04,894
约束名ForeignKey

408
00:18:04,894 --> 00:18:06,234
< No Speech >

409
00:18:06,234 --> 00:18:10,846
约束名、列名、reference、参照的表的表名、参照列的列名。

410
00:18:11,450 --> 00:18:18,290
约束名,Foreign Key列名,Reference参照表的表名,以及表当中参照列的列名

411
00:18:18,290 --> 00:18:21,150
那这四个答案应该是哪个呢?大家想一想

412
00:18:21,150 --> 00:18:22,202
< No Speech >

413
00:18:22,202 --> 00:18:28,562
很显然是D嘛,对不对?我们添加外界约束时,content后面跟的是约束名

414
00:18:28,562 --> 00:18:31,922
然后添加什么约束呢?约束类型foreign key

415
00:18:31,922 --> 00:18:35,642
然后foreign key里要给你要为哪个列添加外界约束,对吧?

416
00:18:35,642 --> 00:18:39,442
然后我们要外界约束,它是为了保证参照完整性的

417
00:18:39,442 --> 00:18:42,942
所以我后面要给定一个reference,你要参照哪个表的

418
00:18:42,942 --> 00:18:44,474
< No Speech >

419
00:18:44,474 --> 00:18:48,126
对吧 这样才能完成一个外界约束的添加

420
00:18:48,126 --> 00:18:49,754
< No Speech >

421
00:18:49,754 --> 00:18:51,194
1D没有问题

422
00:18:51,194 --> 00:18:51,914
好 同学们

423
00:18:51,914 --> 00:18:56,154
那么以上我们就讲解了如何添加外界约束

424
00:18:56,154 --> 00:18:57,662
好 那我们继续课呢

