1
00:00:00,538 --> 00:00:01,978
Hello小伙伴大家好

2
00:00:01,978 --> 00:00:05,458
这节课我们来学习权限控制ACL

3
00:00:05,458 --> 00:00:08,098
在Rookable里边仍然也是有权限控制的

4
00:00:08,098 --> 00:00:10,618
在我们的实际的工作过程中

5
00:00:10,618 --> 00:00:14,738
我们在公司里边往往都是搭建一套共用的Rookable集群

6
00:00:14,738 --> 00:00:17,578
就是统一为所有的应用提供服务

7
00:00:17,578 --> 00:00:19,978
但是在这种情况下可能会出现一些问题

8
00:00:19,978 --> 00:00:23,818
比如说A应用不小心删除了B应用人家创建的节点

9
00:00:23,818 --> 00:00:27,258
比如说B应用又不小心更改了人家A应用所创建的节点

10
00:00:27,258 --> 00:00:28,818
故障可能会出现一些问题

11
00:00:28,818 --> 00:00:32,578
所以Rookable人家也引入了什么权限控制

12
00:00:32,578 --> 00:00:35,578
当然在Rookable里边的权限控制ACL

13
00:00:35,698 --> 00:00:36,618
我们只需要什么

14
00:00:36,898 --> 00:00:38,178
写三大块

15
00:00:38,378 --> 00:00:40,098
三个模块

16
00:00:40,098 --> 00:00:42,978
第一个就是权限的模式

17
00:00:42,978 --> 00:00:44,578
就是你要选择哪种权限

18
00:00:44,578 --> 00:00:47,778
第二个是你要给谁赋予权限

19
00:00:47,778 --> 00:00:51,658
第三个你要给谁赋予一个什么权限

20
00:00:51,938 --> 00:00:56,498
OK我们来看一下具体的ACL的权限控制

21
00:00:56,498 --> 00:00:57,858
我们需要注意的点

22
00:00:57,858 --> 00:01:02,658
第一个Rookable它的权限控制是基于每一个Zeno的节点

23
00:01:02,658 --> 00:01:04,858
就是每一个节点我们都可以创建权限

24
00:01:04,978 --> 00:01:08,018
当然我们每一个节点还可以创建多个权限

25
00:01:08,018 --> 00:01:08,978
以及一个权限

26
00:01:09,098 --> 00:01:10,578
你至少要创建一个权限

27
00:01:10,738 --> 00:01:15,018
第三个是子节点它不会继承副节点的权限

28
00:01:15,018 --> 00:01:15,378
什么意思

29
00:01:15,738 --> 00:01:17,978
就是客户端你虽然不能访问某一个节点

30
00:01:17,978 --> 00:01:20,618
但是你有可能会访问它的子节点

31
00:01:20,858 --> 00:01:24,018
这就是我们ACL的权限控制

32
00:01:24,058 --> 00:01:25,258
我们来看一个例子

33
00:01:25,258 --> 00:01:29,818
我们通过一个Site ACL来创建一个权限

34
00:01:29,858 --> 00:01:30,658
给谁创建

35
00:01:30,978 --> 00:01:34,858
我要给斜杆text2来创建一个节点

36
00:01:35,058 --> 00:01:36,018
创建一个权限

37
00:01:36,058 --> 00:01:37,978
我要给这个节点创建一个权限

38
00:01:38,138 --> 00:01:38,698
权限是什么

39
00:01:39,058 --> 00:01:40,458
你看三大块

40
00:01:40,618 --> 00:01:41,418
一大块

41
00:01:41,418 --> 00:01:42,138
两大块

42
00:01:42,138 --> 00:01:42,898
三大块

43
00:01:42,978 --> 00:01:43,378
是不是

44
00:01:43,898 --> 00:01:46,418
中间以冒号来进行分割

45
00:01:46,538 --> 00:01:46,978
什么意思

46
00:01:47,138 --> 00:01:47,898
比如说第一块

47
00:01:47,898 --> 00:01:49,018
你看我们是IP

48
00:01:49,498 --> 00:01:52,498
你采用的授权策略是哪一种策略

49
00:01:52,498 --> 00:01:53,658
IP的这种策略

50
00:01:53,658 --> 00:01:56,898
第二个你要给谁授予权限

51
00:01:57,138 --> 00:01:59,298
你看我要给这个IP授予一个权限

52
00:01:59,298 --> 00:02:00,578
授予了一个什么权限

53
00:02:01,018 --> 00:02:02,578
CRWD

54
00:02:02,938 --> 00:02:06,138
CRWD无非就是添加删除更改

55
00:02:06,378 --> 00:02:07,658
读取一些权限

56
00:02:08,018 --> 00:02:11,058
所以说简写为CWRDA

57
00:02:11,538 --> 00:02:12,978
所以说我们来看一个具体的例子

58
00:02:13,938 --> 00:02:16,458
针对于第一个就是权限的策略

59
00:02:16,458 --> 00:02:18,778
我们在这个位置我们可以写什么

60
00:02:18,778 --> 00:02:20,338
这里我们模拟写了一个IP

61
00:02:20,538 --> 00:02:23,218
后边针对于这个IP地址赋予了权限

62
00:02:23,218 --> 00:02:24,898
那时候所以说在第一个里边

63
00:02:25,098 --> 00:02:27,178
就是说授权策略这个位置

64
00:02:27,178 --> 00:02:28,618
我们可以写什么

65
00:02:28,978 --> 00:02:30,738
我们可以写这4个

66
00:02:31,178 --> 00:02:33,698
这4个1个2个3个4个

67
00:02:33,698 --> 00:02:35,258
word是默认的

68
00:02:35,258 --> 00:02:36,858
我就是我们什么都不设置权限

69
00:02:37,138 --> 00:02:39,378
默认系统就给了一个这样的权限

70
00:02:39,698 --> 00:02:40,978
然后剩下的三个

71
00:02:41,098 --> 00:02:42,618
我们来开始选第一个IP

72
00:02:42,978 --> 00:02:46,938
就是说我要针对于IP来设置一个权限

73
00:02:47,098 --> 00:02:49,498
是不是第二个给谁赋予权限是吧

74
00:02:49,498 --> 00:02:52,498
所以说第一个我们可以选IP的这种方式

75
00:02:52,498 --> 00:02:53,978
我们还可以选择这个

76
00:02:54,178 --> 00:02:55,178
则代表的是什么

77
00:02:55,538 --> 00:02:57,058
就是认证用户

78
00:02:57,218 --> 00:02:59,658
我以用户的这种方式来赋予权限

79
00:02:59,658 --> 00:03:02,738
第3个第4个我们说是以用户名

80
00:03:02,738 --> 00:03:04,738
密码的这种方式赋予权限

81
00:03:04,738 --> 00:03:07,898
所以说你说在第一大块里边

82
00:03:07,898 --> 00:03:09,538
你说权限策略里边

83
00:03:09,538 --> 00:03:10,898
我们可以写哪几个

84
00:03:10,898 --> 00:03:12,218
我们可以写三个是吧

85
00:03:12,338 --> 00:03:15,018
IP用户认证以及用户名密码

86
00:03:15,058 --> 00:03:16,178
第一个就是默认的

87
00:03:16,298 --> 00:03:17,538
我们不用去选择它

88
00:03:17,858 --> 00:03:19,338
你如果说你是写的是IP的

89
00:03:19,338 --> 00:03:21,258
则后边你要跟给谁赋予对象

90
00:03:21,258 --> 00:03:21,578
是不是

91
00:03:21,578 --> 00:03:24,698
所以说第一个就叫权限的策略

92
00:03:24,698 --> 00:03:25,298
可以写什么

93
00:03:25,338 --> 00:03:26,498
可以写这三个单词

94
00:03:26,658 --> 00:03:28,058
具体的其中的某一个

95
00:03:28,058 --> 00:03:28,618
是不是

96
00:03:28,618 --> 00:03:30,110
我们来看第二个

97
00:03:30,650 --> 00:03:32,850
这个第二个呢就是这个ID

98
00:03:32,850 --> 00:03:36,650
这个ID指的是你要给谁赋予权限

99
00:03:36,650 --> 00:03:38,170
我要给谁赋予权限呢

100
00:03:38,170 --> 00:03:40,530
我要给这个ID来赋予权限

101
00:03:40,530 --> 00:03:42,250
就是这个ID是谁呀

102
00:03:42,250 --> 00:03:42,570
是吧

103
00:03:42,570 --> 00:03:44,050
我具体要赋予一个什么权限

104
00:03:44,050 --> 00:03:45,370
给谁赋予权限呀

105
00:03:45,370 --> 00:03:46,210
我们来看一下

106
00:03:46,210 --> 00:03:47,650
在这个位置我们可以写什么

107
00:03:47,650 --> 00:03:49,090
第一个呢就是IP

108
00:03:49,290 --> 00:03:51,530
这个IP呢代表的就是一个IP地址

109
00:03:51,530 --> 00:03:52,050
是吧

110
00:03:52,050 --> 00:03:54,890
那如果说我们在授权策略里面

111
00:03:54,890 --> 00:03:56,690
你写的是IP的这种策略

112
00:03:56,690 --> 00:03:58,410
那你授权的对象

113
00:03:58,410 --> 00:04:00,010
你就要写具体的IP了

114
00:04:00,010 --> 00:04:01,730
就是你要给谁赋予权限

115
00:04:01,730 --> 00:04:02,490
明白没有

116
00:04:02,490 --> 00:04:04,210
那如果说你写的是这个

117
00:04:04,410 --> 00:04:06,010
就是我们在之前的那个

118
00:04:06,010 --> 00:04:07,010
所以说你要

119
00:04:07,010 --> 00:04:08,850
那你就要在第二个位置

120
00:04:08,850 --> 00:04:10,770
就要写你的用户名和密码了

121
00:04:10,970 --> 00:04:12,690
那如果说你是这个

122
00:04:13,130 --> 00:04:14,370
他和这个是一样的

123
00:04:14,370 --> 00:04:15,170
你代表的是什么

124
00:04:15,170 --> 00:04:17,650
你要在这个位置写你的用户认证

125
00:04:17,890 --> 00:04:19,330
那word就不用想了

126
00:04:19,330 --> 00:04:20,370
这个word是默认的

127
00:04:20,370 --> 00:04:21,570
它就是什么anyway

128
00:04:21,730 --> 00:04:22,570
就只有一个any

129
00:04:22,570 --> 00:04:23,810
所以说这个我们是不考虑的

130
00:04:23,810 --> 00:04:24,410
默认的

131
00:04:24,410 --> 00:04:24,970
是不是

132
00:04:25,170 --> 00:04:26,370
所以说我们可以看到

133
00:04:26,370 --> 00:04:28,930
授权对象里边写什么

134
00:04:28,930 --> 00:04:31,970
完全取决于你的授权策略

135
00:04:31,970 --> 00:04:33,210
你选的是哪一个

136
00:04:33,250 --> 00:04:34,210
如果是IP

137
00:04:34,210 --> 00:04:35,410
你这边就写了IP地址

138
00:04:35,410 --> 00:04:35,850
是吧

139
00:04:35,970 --> 00:04:36,850
如果说是这个

140
00:04:36,850 --> 00:04:38,410
你则写的是一个用户认证

141
00:04:38,410 --> 00:04:40,010
那如果说你写的是这个

142
00:04:40,010 --> 00:04:41,610
你后边要写一个用户名和密码

143
00:04:41,610 --> 00:04:42,370
明白了没有

144
00:04:42,370 --> 00:04:44,970
我们来看第三个就是权限

145
00:04:45,170 --> 00:04:46,610
你要赋予一个什么权限

146
00:04:46,970 --> 00:04:47,730
第三个位置

147
00:04:47,810 --> 00:04:50,610
就是说你要给谁赋予一个什么权限

148
00:04:50,610 --> 00:04:51,330
无非就是什么

149
00:04:51,490 --> 00:04:53,130
第一个你看添加create

150
00:04:53,170 --> 00:04:53,770
是吧

151
00:04:53,810 --> 00:04:55,170
delete删除

152
00:04:55,210 --> 00:04:56,930
write读写

153
00:04:56,930 --> 00:05:00,090
以及我们对节点的控制访问的一个权限

154
00:05:00,090 --> 00:05:03,650
所以说我们简写为就是cdrwa

155
00:05:04,090 --> 00:05:05,290
你到底是一个什么权限

156
00:05:05,570 --> 00:05:07,130
所以说第三个位置

157
00:05:07,290 --> 00:05:08,290
就是第三个位置

158
00:05:08,290 --> 00:05:09,530
这个位置你到底写什么

159
00:05:09,890 --> 00:05:11,850
你想赋予他什么权限

160
00:05:11,850 --> 00:05:13,530
你就写他的一个缩写

161
00:05:13,650 --> 00:05:14,490
就可以了

162
00:05:14,890 --> 00:05:17,050
所以说第二个位置写什么

163
00:05:17,410 --> 00:05:19,490
则要看的是你第一个位置

164
00:05:19,490 --> 00:05:20,290
写的是什么

165
00:05:20,330 --> 00:05:21,130
明白没有

166
00:05:21,170 --> 00:05:22,410
针对于acl

167
00:05:22,530 --> 00:05:24,050
它的一个相关的命令

168
00:05:24,210 --> 00:05:26,690
是比如说你看getacl

169
00:05:26,690 --> 00:05:29,330
我要获取你的acl的一个权限

170
00:05:29,330 --> 00:05:31,290
set我设置一个权限

171
00:05:31,290 --> 00:05:33,810
以及add我来添加一个用户

172
00:05:34,010 --> 00:05:35,210
添加一个认证用户

173
00:05:35,250 --> 00:05:37,890
我们来看一些实际的一个方案

174
00:05:37,890 --> 00:05:38,610
比如说

175
00:05:38,810 --> 00:05:39,970
word的方案

176
00:05:39,970 --> 00:05:41,290
就是默认的这种机制

177
00:05:41,290 --> 00:05:42,050
我们来看一下

178
00:05:42,410 --> 00:05:44,850
看一下来打开我们的一个插项

179
00:05:45,090 --> 00:05:46,570
在这块我们可以看到

180
00:05:46,570 --> 00:05:48,250
比如说我们create

181
00:05:48,290 --> 00:05:50,210
创建一个节点叫node1

182
00:05:50,250 --> 00:05:51,650
然后里边放一个1

183
00:05:51,690 --> 00:05:55,610
然后我们可以通过getacl的这种方式

184
00:05:55,610 --> 00:05:57,730
看一下node1

185
00:05:57,770 --> 00:05:58,570
我们可以看到

186
00:05:58,610 --> 00:06:00,170
你看我要看到

187
00:06:00,370 --> 00:06:01,770
node1的一个权限

188
00:06:01,970 --> 00:06:03,330
你看这块是不是word

189
00:06:03,370 --> 00:06:04,530
叫anyway

190
00:06:04,570 --> 00:06:05,330
都是默认的

191
00:06:05,330 --> 00:06:05,730
是不是

192
00:06:05,730 --> 00:06:06,410
它有什么权限

193
00:06:06,650 --> 00:06:08,490
你看叫cdlw

194
00:06:08,490 --> 00:06:10,250
有所有的一个权限

195
00:06:10,770 --> 00:06:11,690
没有问题吧

196
00:06:11,890 --> 00:06:14,690
接下来我们再来看一个

197
00:06:14,690 --> 00:06:15,890
实战的一个案例

198
00:06:16,090 --> 00:06:18,690
就是ip的这种方式

199
00:06:19,050 --> 00:06:19,850
ip的这种方式

200
00:06:19,930 --> 00:06:22,130
我们可以通过setacl

201
00:06:22,130 --> 00:06:23,530
给哪一个地址

202
00:06:23,530 --> 00:06:24,570
添加一个什么权限

203
00:06:24,570 --> 00:06:25,450
第一个位置

204
00:06:25,450 --> 00:06:26,610
我们说要写的是ip

205
00:06:26,610 --> 00:06:27,130
第二个位置

206
00:06:27,130 --> 00:06:28,970
我们要写的是哪一个ip地址

207
00:06:28,970 --> 00:06:29,490
是不是

208
00:06:29,490 --> 00:06:30,170
第三个位置

209
00:06:30,170 --> 00:06:31,450
你要给它一个什么权限

210
00:06:31,810 --> 00:06:32,490
我们来看一下

211
00:06:32,650 --> 00:06:34,530
我们具体该如何去做

212
00:06:34,770 --> 00:06:36,130
打开我们的一个插项

213
00:06:36,290 --> 00:06:36,650
在这块

214
00:06:36,770 --> 00:06:38,730
我们可以通过create

215
00:06:38,730 --> 00:06:41,330
创建一个叫node2

216
00:06:41,330 --> 00:06:42,050
这样的一个节点

217
00:06:42,050 --> 00:06:43,690
里边放一个2这个数据

218
00:06:43,730 --> 00:06:46,410
我们通过setacl

219
00:06:46,410 --> 00:06:48,610
里边叫node2

220
00:06:48,970 --> 00:06:51,410
我要给node2附一个权限

221
00:06:51,450 --> 00:06:52,610
第一个我们选模式

222
00:06:52,610 --> 00:06:54,610
我们要选ip的这个模式

223
00:06:54,650 --> 00:06:55,450
没问题吧

224
00:06:55,490 --> 00:06:56,250
第二个位置

225
00:06:56,250 --> 00:06:58,490
你要给哪一个ip赋予权限

226
00:06:58,610 --> 00:06:59,610
就是哪一个ip

227
00:06:59,610 --> 00:07:00,530
它拥有什么权限

228
00:07:00,530 --> 00:07:01,250
比如说

229
00:07:01,370 --> 00:07:05,450
我们叫192.168.66.多少

230
00:07:05,490 --> 00:07:08,210
101就是101的这台电脑

231
00:07:08,370 --> 00:07:10,090
它可以操作于这个节点

232
00:07:10,290 --> 00:07:11,410
可以操作于这个节点

233
00:07:11,650 --> 00:07:12,890
你赋予它一个什么权限

234
00:07:13,210 --> 00:07:14,490
叫c什么

235
00:07:14,850 --> 00:07:18,410
cdrwa的权限

236
00:07:18,450 --> 00:07:18,970
你看

237
00:07:18,970 --> 00:07:20,930
你说当我们这个ip

238
00:07:20,930 --> 00:07:21,450
大家记住

239
00:07:21,450 --> 00:07:24,010
当这个ip你才可以操作于这个节点

240
00:07:24,090 --> 00:07:25,370
你只要不是这个ip

241
00:07:25,370 --> 00:07:26,450
你就操作不了这个节点

242
00:07:26,450 --> 00:07:28,250
会给你报什么

243
00:07:28,290 --> 00:07:29,570
权限缺失

244
00:07:29,730 --> 00:07:32,530
当然我们可以通过getacl

245
00:07:32,730 --> 00:07:33,930
通过getacl

246
00:07:33,930 --> 00:07:36,650
来看到node2的一个什么

247
00:07:36,970 --> 00:07:37,930
节点信息

248
00:07:38,210 --> 00:07:39,050
来走你

249
00:07:39,330 --> 00:07:40,530
你看没有权限了

250
00:07:40,530 --> 00:07:41,010
是不是

251
00:07:41,010 --> 00:07:42,570
当然你看我们现在是以

252
00:07:42,610 --> 00:07:44,410
localhost登录的

253
00:07:44,410 --> 00:07:45,010
是不是

254
00:07:45,130 --> 00:07:47,210
如果说我们是以这个节点登录的

255
00:07:47,330 --> 00:07:48,170
我们是不是可以看到了

256
00:07:48,650 --> 00:07:49,730
OK我们来继续

257
00:07:49,730 --> 00:07:52,970
我们再看一个实际的例子

258
00:07:53,290 --> 00:07:56,210
这个是以用户认证的这种方式

259
00:07:56,250 --> 00:07:59,250
我们可以通过set一个什么

260
00:07:59,370 --> 00:08:01,450
我们可以通过add的这种方式

261
00:08:01,450 --> 00:08:03,530
添加一个用户

262
00:08:03,850 --> 00:08:06,090
就代表说我要通过用户认证的这种方式

263
00:08:06,450 --> 00:08:07,210
来干嘛

264
00:08:07,610 --> 00:08:08,370
设置权限

265
00:08:08,370 --> 00:08:09,570
来我们来试一下

266
00:08:09,730 --> 00:08:11,730
在这块我们通过create

267
00:08:11,730 --> 00:08:12,730
创建一个节点

268
00:08:12,730 --> 00:08:15,210
叫node3里边放一个3

269
00:08:15,570 --> 00:08:16,330
非常简单

270
00:08:16,490 --> 00:08:18,530
这个时候我们要添加一个认证用户

271
00:08:18,530 --> 00:08:19,530
比如我们add

272
00:08:19,930 --> 00:08:21,050
aoth

273
00:08:21,290 --> 00:08:22,250
比如说我们叫

274
00:08:22,930 --> 00:08:24,130
添加一个认证用户

275
00:08:24,130 --> 00:08:25,410
我们叫百战

276
00:08:25,410 --> 00:08:27,850
冒号123456

277
00:08:27,930 --> 00:08:30,370
你看我们通过123456的这种方式

278
00:08:30,490 --> 00:08:32,130
我们就添加了一个认证用户

279
00:08:32,170 --> 00:08:33,650
然后我们再把什么

280
00:08:33,770 --> 00:08:34,850
我们再给这个节点

281
00:08:34,930 --> 00:08:36,410
就是node3

282
00:08:36,650 --> 00:08:38,690
我们来添加一个权限

283
00:08:38,690 --> 00:08:41,290
setacl给谁添加

284
00:08:41,650 --> 00:08:44,610
给node3来添加权限

285
00:08:44,650 --> 00:08:46,650
然后在这块我们选择一个叫什么

286
00:08:46,650 --> 00:08:47,970
叫不是百战

287
00:08:47,970 --> 00:08:48,970
我们叫什么

288
00:08:49,410 --> 00:08:51,330
我们要选择的第一个模式

289
00:08:51,490 --> 00:08:52,370
来看一下

290
00:08:52,490 --> 00:08:53,330
选择哪个模式

291
00:08:53,450 --> 00:08:54,450
我们要选择的是

292
00:08:54,450 --> 00:08:57,930
aoth的模式

293
00:08:57,930 --> 00:08:58,370
是不是

294
00:08:58,370 --> 00:09:00,130
来打开我们的一个插箱

295
00:09:00,450 --> 00:09:01,010
第一个模式

296
00:09:01,130 --> 00:09:04,570
我们就是aoth

297
00:09:04,570 --> 00:09:04,970
没问题

298
00:09:05,410 --> 00:09:08,330
第二个是你要给哪一个用户添加权限

299
00:09:08,330 --> 00:09:09,490
你看我们刚刚是不是添加了一个

300
00:09:09,490 --> 00:09:10,410
百战用户

301
00:09:10,410 --> 00:09:11,330
密码是123456

302
00:09:11,690 --> 00:09:13,650
所以说我们就来个百战

303
00:09:13,970 --> 00:09:14,370
没问题

304
00:09:14,730 --> 00:09:16,050
然后我们什么权限

305
00:09:16,050 --> 00:09:20,730
cdrwa这样的一个权限

306
00:09:20,730 --> 00:09:22,570
你看这样我们权限添加了之后

307
00:09:22,690 --> 00:09:25,410
我们可以通过getacl的这种方式

308
00:09:25,410 --> 00:09:28,330
来获取到node3这样的一个权限

309
00:09:28,330 --> 00:09:28,930
我们可以看到

310
00:09:28,930 --> 00:09:29,450
你看

311
00:09:29,570 --> 00:09:30,570
是不是也可以看到这个信息

312
00:09:30,690 --> 00:09:32,410
你看他都给我们显示出来了

313
00:09:32,410 --> 00:09:33,450
并且大家注意

314
00:09:33,610 --> 00:09:35,730
我get一下什么

315
00:09:35,730 --> 00:09:36,810
< No Speech >

316
00:09:36,810 --> 00:09:38,210
叫node3

317
00:09:38,290 --> 00:09:39,890
大家注意你看我是不是能获取到

318
00:09:39,890 --> 00:09:41,210
当你把这个客户端

319
00:09:42,010 --> 00:09:43,410
zkclient断开之后

320
00:09:43,410 --> 00:09:44,410
再去连接的时候

321
00:09:44,410 --> 00:09:46,650
你添加的认证用户信息

322
00:09:46,650 --> 00:09:47,530
没有了的时候

323
00:09:47,530 --> 00:09:48,770
你再去看这个节点

324
00:09:49,050 --> 00:09:49,810
你就看不到了

325
00:09:49,810 --> 00:09:50,490
明白没有

326
00:09:50,490 --> 00:09:50,770
OK

327
00:09:50,850 --> 00:09:53,010
这个是我们说的第二个模式

328
00:09:53,010 --> 00:09:54,430
来我们继续看

329
00:09:54,970 --> 00:09:58,930
我们来看第三个就是通过用户名和密码的这种方式

330
00:09:58,930 --> 00:10:01,250
我们该如何添加权限呢

331
00:10:01,250 --> 00:10:04,050
我们要通过用户名和密码的这种方式添加权限

332
00:10:04,050 --> 00:10:05,022
我们来看一下

333
00:10:05,786 --> 00:10:07,826
那我们要设置一个用户名和密码

334
00:10:07,826 --> 00:10:08,386
是不是啊

335
00:10:08,386 --> 00:10:09,426
来我们来设置

336
00:10:09,426 --> 00:10:10,746
但是设置用户名密码

337
00:10:10,746 --> 00:10:12,346
我们得需要进行一个什么呢

338
00:10:12,346 --> 00:10:13,826
加密的一个过程

339
00:10:13,826 --> 00:10:14,786
怎么加密呢

340
00:10:14,786 --> 00:10:17,146
来我们可以通过这个base64

341
00:10:17,146 --> 00:10:19,346
啊base64来进行一个什么呢

342
00:10:19,346 --> 00:10:21,026
加密啊来进行一个加密

343
00:10:21,106 --> 00:10:22,906
我们来看一下具体该怎么去做

344
00:10:22,986 --> 00:10:24,906
在这块我们直接啊

345
00:10:25,426 --> 00:10:27,706
直接我们需要干嘛呢

346
00:10:27,706 --> 00:10:29,666
我们需要先退出去

347
00:10:30,106 --> 00:10:31,306
我们需要先退出去

348
00:10:31,306 --> 00:10:32,706
然后我们执行一段话

349
00:10:32,706 --> 00:10:32,830
信息转送到这,

350
00:10:32,830 --> 00:10:34,970
< No Speech >

351
00:10:34,970 --> 00:10:38,530
在这块我们需要把我们的用户名和密码写上

352
00:10:38,530 --> 00:10:40,130
用户名把这个改一下

353
00:10:40,130 --> 00:10:42,210
这块比如说我们写一个叫白站

354
00:10:42,570 --> 00:10:44,010
然后我们的密码是多少

355
00:10:44,210 --> 00:10:47,890
比如说我们的密码是123456

356
00:10:48,010 --> 00:10:50,410
这句话的意思是帮我们输出出来

357
00:10:50,410 --> 00:10:51,650
就是通过用户名

358
00:10:51,650 --> 00:10:53,450
给我们把密码给我们进行加密

359
00:10:53,610 --> 00:10:55,570
你看base64来进行一个加密

360
00:10:55,570 --> 00:10:56,410
我们的回车

361
00:10:56,410 --> 00:10:58,410
你看这个就是我们加密

362
00:10:58,610 --> 00:11:00,970
这就是我们加密后的一个什么密钥

363
00:11:00,970 --> 00:11:04,210
我们把这个密钥我们来保存下来复制

364
00:11:04,210 --> 00:11:05,650
放到我们这个文档里边

365
00:11:05,650 --> 00:11:07,610
我们就先放到这个位置上

366
00:11:07,610 --> 00:11:09,210
先放到这个位置上

367
00:11:10,074 --> 00:11:12,634
然后我们再连到我们的一个XSHELTER

368
00:11:12,634 --> 00:11:14,714
再把我们的ZKCLAN登录进来

369
00:11:14,714 --> 00:11:16,834
登录进来之后我们来看一下

370
00:11:17,354 --> 00:11:19,154
我们既然说我们要通过这种方式

371
00:11:19,154 --> 00:11:21,394
用户名和密码的这种方式来行

372
00:11:21,394 --> 00:11:21,994
设置权限

373
00:11:22,114 --> 00:11:23,874
这块我们直接create

374
00:11:24,114 --> 00:11:26,434
create一个叫node

375
00:11:26,794 --> 00:11:28,794
叫node4

376
00:11:29,034 --> 00:11:30,554
然后里边放一个4

377
00:11:30,674 --> 00:11:31,354
没问题吧

378
00:11:31,354 --> 00:11:32,354
我们创建一个节点

379
00:11:32,354 --> 00:11:34,274
但是这个节点我们要以什么

380
00:11:34,474 --> 00:11:37,234
我们要以用户名和密码的这种方式

381
00:11:37,514 --> 00:11:39,554
来给他加一个什么权限

382
00:11:39,554 --> 00:11:44,914
我们通过set ACL的这种方式

383
00:11:44,914 --> 00:11:45,994
给谁加权限

384
00:11:45,994 --> 00:11:48,714
我要给node4加权限

385
00:11:48,714 --> 00:11:49,594
加什么权限

386
00:11:49,594 --> 00:11:50,194
第一个位置

387
00:11:50,194 --> 00:11:50,794
大家注意

388
00:11:50,794 --> 00:11:52,274
第一个位置我们写什么

389
00:11:52,514 --> 00:11:53,994
我们要写的模式里边

390
00:11:54,354 --> 00:11:56,154
第4个是不是

391
00:11:56,154 --> 00:11:57,274
就是这个模式

392
00:11:57,274 --> 00:11:57,674
是不是

393
00:11:57,954 --> 00:11:59,154
所以说第一个位置

394
00:11:59,274 --> 00:12:00,914
我们要选择那个模式

395
00:12:00,914 --> 00:12:02,194
来切换过来

396
00:12:02,474 --> 00:12:03,434
来到我们这边

397
00:12:03,434 --> 00:12:05,314
我们要选择我们的一个模式

398
00:12:05,314 --> 00:12:05,994
代表的是什么

399
00:12:05,994 --> 00:12:08,674
DIGST就是这个模式

400
00:12:08,674 --> 00:12:10,394
然后后边我们要给的是

401
00:12:10,394 --> 00:12:11,674
你要给谁赋予权限

402
00:12:12,474 --> 00:12:15,114
我要给比如说百战

403
00:12:15,114 --> 00:12:16,594
我们的用户名是不是百战

404
00:12:16,594 --> 00:12:18,034
是不是密钥是多少

405
00:12:18,714 --> 00:12:20,514
继续我们写一个冒号

406
00:12:20,514 --> 00:12:23,582
把我们的密钥给大家复制过来

407
00:12:24,090 --> 00:12:26,090
这个是我们刚刚所上次的密码是不是

408
00:12:26,090 --> 00:12:28,090
把这个密码复制上来到我们这边

409
00:12:28,090 --> 00:12:29,770
然后我们直接一粘贴

410
00:12:29,770 --> 00:12:32,290
然后最后代表的是你要付一个什么权限

411
00:12:32,290 --> 00:12:35,410
c d r w a这样的一个权限

412
00:12:35,610 --> 00:12:36,850
当我们复制完成之后

413
00:12:37,130 --> 00:12:38,970
大家注意我们复制完成之后

414
00:12:39,130 --> 00:12:41,410
代表的是我们权限就已经OK了

415
00:12:41,570 --> 00:12:44,410
我们在get斜杠node4的时候

416
00:12:44,410 --> 00:12:46,690
大家注意你看我们已经没有权限了

417
00:12:46,890 --> 00:12:47,210
怎么办

418
00:12:47,570 --> 00:12:50,130
我们可以通过add这种方式

419
00:12:50,130 --> 00:12:53,250
我们添加一个用户叫百战

420
00:12:53,250 --> 00:12:56,958
是不是我们添加一个用户百战12345

421
00:12:56,958 --> 00:12:58,010
< No Speech >

422
00:12:58,010 --> 00:13:01,970
我们添加一个这样的一个什么呢

423
00:13:01,970 --> 00:13:02,570
用户啊

424
00:13:02,570 --> 00:13:03,570
添加这样的一个用户

425
00:13:03,570 --> 00:13:04,370
我们来试一下

426
00:13:04,370 --> 00:13:05,170
添加用户

427
00:13:05,170 --> 00:13:06,370
这少了一个是不是

428
00:13:07,370 --> 00:13:08,170
这里少了一个

429
00:13:08,170 --> 00:13:09,210
我们的第4个

430
00:13:09,570 --> 00:13:11,570
gest添加成功

431
00:13:11,570 --> 00:13:12,690
然后我们再去看

432
00:13:12,850 --> 00:13:13,890
再看一下这个节点

433
00:13:13,890 --> 00:13:14,570
你看

434
00:13:14,610 --> 00:13:16,370
他说我们这个节点

435
00:13:16,370 --> 00:13:18,130
这个连接已经断开了

436
00:13:18,130 --> 00:13:18,570
是不是

437
00:13:18,570 --> 00:13:20,170
就是连接已经被断开了

438
00:13:20,170 --> 00:13:21,890
我们能重新连接一下

439
00:13:22,850 --> 00:13:25,410
我们继续通过一个add

440
00:13:25,410 --> 00:13:26,730
我们来添加一个权限

441
00:13:26,730 --> 00:13:28,130
重新添加一个权限

442
00:13:28,330 --> 00:13:30,490
然后我们叫做di

443
00:13:30,490 --> 00:13:31,610
di gst

444
00:13:31,610 --> 00:13:32,970
我们叫百战

445
00:13:33,170 --> 00:13:34,610
我们给百战加个权限

446
00:13:34,690 --> 00:13:35,690
所以说我们这里的用户

447
00:13:35,690 --> 00:13:36,450
必须是百战

448
00:13:36,450 --> 00:13:37,010
是不是

449
00:13:37,010 --> 00:13:38,250
然后我们添加成功之后

450
00:13:38,370 --> 00:13:39,570
我们ls-l

451
00:13:39,570 --> 00:13:40,490
我们可以看到

452
00:13:40,490 --> 00:13:41,490
是不是有一个node4

453
00:13:41,490 --> 00:13:43,370
然后我们在get斜杠

454
00:13:43,370 --> 00:13:44,610
node4的时候

455
00:13:44,610 --> 00:13:45,730
这个时候大家注意

456
00:13:45,730 --> 00:13:47,810
你看我们是不是还没有权限

457
00:13:47,810 --> 00:13:48,170
为什么

458
00:13:48,410 --> 00:13:49,490
因为我们这里的

459
00:13:49,890 --> 00:13:50,690
就是我们这里的

460
00:13:51,210 --> 00:13:52,290
因为我们是以2

461
00:13:52,290 --> 00:13:53,290
我们是我们的密码

462
00:13:53,290 --> 00:13:53,650
是不是以2

463
00:13:53,650 --> 00:13:54,090
366

464
00:13:54,250 --> 00:13:55,170
我们来再看一下

465
00:13:55,170 --> 00:13:57,170
看我们这边是以2

466
00:13:57,170 --> 00:13:58,010
3456

467
00:13:58,010 --> 00:13:58,970
但是我们的客户端

468
00:13:58,970 --> 00:14:00,050
是不是已经退出去了

469
00:14:00,050 --> 00:14:00,650
是不是

470
00:14:00,650 --> 00:14:01,330
退出去了以后

471
00:14:01,330 --> 00:14:01,890
又进来以后

472
00:14:01,890 --> 00:14:02,530
我们用户名

473
00:14:02,530 --> 00:14:03,970
密码可能会出现一些问题

474
00:14:03,970 --> 00:14:04,490
没关系

475
00:14:04,850 --> 00:14:06,210
我们可以通过这种方式

476
00:14:06,610 --> 00:14:07,930
我们其实按道理来说

477
00:14:07,930 --> 00:14:09,930
如果说我们根根没有断开连接的话

478
00:14:09,930 --> 00:14:11,050
我们就可以看到了

479
00:14:11,050 --> 00:14:11,610
好了

480
00:14:11,850 --> 00:14:13,810
以上就是我们以上的

481
00:14:13,810 --> 00:14:15,570
所有的一个权限控制的

482
00:14:15,570 --> 00:14:16,290
所有内容了

483
00:14:16,290 --> 00:14:17,290
我们在进入之前

484
00:14:17,410 --> 00:14:18,930
我们再做两个练习题

485
00:14:18,930 --> 00:14:19,730
第一个

486
00:14:19,730 --> 00:14:20,570
这个rootkeeper

487
00:14:20,570 --> 00:14:22,090
就是说我们该如何获取权限

488
00:14:22,090 --> 00:14:23,890
肯定是通过getacl

489
00:14:23,890 --> 00:14:24,410
是不是

490
00:14:24,410 --> 00:14:25,450
第一个就是get

491
00:14:25,450 --> 00:14:26,330
也就是我们的答案

492
00:14:26,490 --> 00:14:27,050
所以说第一道题

493
00:14:27,050 --> 00:14:27,770
我们应该选择的是

494
00:14:27,770 --> 00:14:28,290
A

495
00:14:28,290 --> 00:14:28,730
第二个

496
00:14:28,850 --> 00:14:30,730
我们该如何设置权限

497
00:14:31,250 --> 00:14:32,250
get是获取

498
00:14:32,770 --> 00:14:34,690
sec是不是来设置权限的

499
00:14:34,970 --> 00:14:36,210
所以说我们在第二个

500
00:14:36,210 --> 00:14:37,810
我们要通过b的这种方式

501
00:14:37,810 --> 00:14:39,370
来设置权限

502
00:14:39,370 --> 00:14:39,970
好了

503
00:14:40,290 --> 00:14:41,090
我们在这节课

504
00:14:41,170 --> 00:14:42,730
我们讲解rootkeeper里面的

505
00:14:42,730 --> 00:14:43,850
acl的权限

506
00:14:44,050 --> 00:14:45,170
到这就结束了

507
00:14:45,170 --> 00:14:46,334
谢谢大家

