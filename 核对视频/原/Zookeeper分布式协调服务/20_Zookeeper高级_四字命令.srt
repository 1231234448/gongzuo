1
00:00:00,000 --> 00:00:01,400
Hello 小伙伴大家好

2
00:00:01,400 --> 00:00:03,060
这节课我们来继续学习

3
00:00:03,060 --> 00:00:05,360
Rookieper里边的一个四字命令

4
00:00:05,360 --> 00:00:07,080
我们在学习这个四字命令之前

5
00:00:07,080 --> 00:00:09,680
我们来看一下我们之前所学习过一个命令

6
00:00:09,680 --> 00:00:11,320
叫stand一个命令

7
00:00:11,320 --> 00:00:12,760
我们通过这个命令

8
00:00:12,760 --> 00:00:15,440
我们可以来验证我们这个Rookieper

9
00:00:15,440 --> 00:00:17,880
我们的服务它到底是否启动成功

10
00:00:17,880 --> 00:00:21,520
以及我们可以看到一些我们数据节点的一些信息

11
00:00:21,520 --> 00:00:23,760
那这个stand这个命令

12
00:00:23,760 --> 00:00:27,480
它就是Rookieper里边非常典型的一个命令了

13
00:00:27,480 --> 00:00:29,640
当然在这个Rookieper中

14
00:00:29,640 --> 00:00:31,640
还有很多类似于这样的一个命令

15
00:00:31,640 --> 00:00:35,600
他们通常都是以四个英文字母组成

16
00:00:35,600 --> 00:00:38,840
我们就称它为是一个四字命令

17
00:00:38,840 --> 00:00:41,560
那在我们的Rookieper中

18
00:00:41,560 --> 00:00:44,798
那你说老师这个四字命令它到底有什么作用呢

19
00:00:45,530 --> 00:00:50,970
这个乳K不他支持通过一些特殊的四字命令

20
00:00:50,970 --> 00:00:55,330
然后我们的用户就可以和乳K来进行交互了

21
00:00:55,330 --> 00:01:01,210
就是我们的用户来可以快速的获得到乳K里边的一些信息

22
00:01:01,210 --> 00:01:05,730
比如说我想看看我当前乳K服务的一个当前的运行状态

23
00:01:05,730 --> 00:01:07,970
以及还有一些相关的信息

24
00:01:07,970 --> 00:01:10,250
我们就可以通过四字命令

25
00:01:10,250 --> 00:01:13,610
快速的和乳K交互来获取信息

26
00:01:13,610 --> 00:01:16,010
这就是四字命令

27
00:01:16,010 --> 00:01:17,930
那这个命令我们该如何去玩

28
00:01:17,930 --> 00:01:19,650
首先第一步

29
00:01:19,650 --> 00:01:22,410
我们需要在我们乳K的配置中

30
00:01:22,410 --> 00:01:23,890
我们需要加上一句话

31
00:01:23,890 --> 00:01:26,530
把这个四字命令我们给它开起来

32
00:01:26,530 --> 00:01:28,410
首先如果说我们不加的话

33
00:01:28,410 --> 00:01:29,886
大家注意我们来试一下

34
00:01:30,778 --> 00:01:32,698
打开我们的一个插线

35
00:01:32,698 --> 00:01:33,406
我们的咪链

36
00:01:34,010 --> 00:01:36,490
在命令行中端里边我们来执行一下

37
00:01:36,490 --> 00:01:38,090
我们首先我们先来看一下

38
00:01:38,090 --> 00:01:42,010
我们rootkeeper它的一个运行的一个状态

39
00:01:42,010 --> 00:01:43,546
< No Speech >

40
00:01:43,546 --> 00:01:45,310
S T A T U S

41
00:01:45,310 --> 00:01:51,898
< No Speech >

42
00:01:51,898 --> 00:01:55,898
ok,我们看我们的随从者,领导者,随从者,我们都起来了

43
00:01:55,898 --> 00:01:57,398
说明我们的Rookie本是启动的

44
00:01:57,398 --> 00:02:01,598
那这个时候呢,我们就可以通过四字命令来看一下了

45
00:02:01,598 --> 00:02:04,398
我们怎么去玩呢?我们可以通过ECHO

46
00:02:04,398 --> 00:02:06,590
打印输出一下什么呢?

47
00:02:07,386 --> 00:02:10,942
那这个COV也是四字命令的其中一个

48
00:02:10,942 --> 00:02:12,154
< No Speech >

49
00:02:12,154 --> 00:02:13,914
然后加一个管道服务

50
00:02:13,914 --> 00:02:16,606
我们通过NC命令来制定

51
00:02:17,530 --> 00:02:20,730
localhost里边的2181这个端口

52
00:02:20,730 --> 00:02:21,570
我们会发现

53
00:02:21,570 --> 00:02:23,610
如果说你没有配置那个信息的话

54
00:02:23,610 --> 00:02:24,510
你会报这个错

55
00:02:24,510 --> 00:02:25,626
< No Speech >

56
00:02:25,626 --> 00:02:28,030
说明了你看人家说我们的配置文件中没有

57
00:02:28,030 --> 00:02:29,114
< No Speech >

58
00:02:29,114 --> 00:02:31,710
OK 我们把我们的这个配置呢打开

59
00:02:31,710 --> 00:02:32,954
< No Speech >

60
00:02:32,954 --> 00:02:35,834
把这句话我们直接一复制

61
00:02:35,954 --> 00:02:38,394
拿到我们的命令横桩端里边

62
00:02:38,394 --> 00:02:41,394
OK我们直接配置到我们的配置文件中

63
00:02:41,394 --> 00:02:43,754
我们针对于所有的集群

64
00:02:43,754 --> 00:02:45,278
我们来对待进行一个配置

65
00:02:46,266 --> 00:02:51,506
USR local里边Rookkeeper里边的conf里边的ZOOconf

66
00:02:51,506 --> 00:02:54,026
OK在这个位置中呢我们直接啊

67
00:02:54,026 --> 00:02:57,306
我们直接右击粘爹把这个配置我们复制进来

68
00:02:57,306 --> 00:03:01,406
复制进来之后呢我们Rookkeeper它就支持了这个四字命令了

69
00:03:01,946 --> 00:03:03,906
那完了之后我们需要把我们的

70
00:03:03,906 --> 00:03:06,386
rootkeeper这个服务重新启动一下

71
00:03:06,386 --> 00:03:07,346
来走你

72
00:03:07,386 --> 00:03:09,626
zk start什么呢

73
00:03:09,866 --> 00:03:12,146
restart就是把我们的rootkeeper服务

74
00:03:12,146 --> 00:03:13,086
重新启动我们的rootkeeper服务

75
00:03:13,086 --> 00:03:14,554
< No Speech >

76
00:03:14,554 --> 00:03:15,674
密码root

77
00:03:15,674 --> 00:03:16,754
然后它停止了

78
00:03:16,754 --> 00:03:18,114
然后再重新启动

79
00:03:18,274 --> 00:03:19,114
启动成功之后

80
00:03:19,114 --> 00:03:20,670
我们再启动第二台

81
00:03:20,670 --> 00:03:23,962
< No Speech >

82
00:03:23,962 --> 00:03:26,022
OK 我们继续 还有一个root

83
00:03:26,022 --> 00:03:28,522
我们第三台机器 我们都给它启动起来

84
00:03:28,522 --> 00:03:31,202
那启动起来之后呢 我们就可以通过这种方式

85
00:03:31,202 --> 00:03:34,402
来使用我们rootkeeper里面的四字命令了

86
00:03:34,402 --> 00:03:36,414
OK 我们先来看第一个就是rootkeeper

87
00:03:36,414 --> 00:03:37,914
< No Speech >

88
00:03:37,914 --> 00:03:40,074
我们使用了四字命令里面的这个cuff

89
00:03:40,074 --> 00:03:42,234
我们就可以快速的问一下

90
00:03:42,234 --> 00:03:44,394
我们这个乳K本你给我打印一下

91
00:03:44,394 --> 00:03:46,594
你这个服务的具体的一些详细信息

92
00:03:46,594 --> 00:03:48,314
< No Speech >

93
00:03:48,314 --> 00:03:48,914
是吧

94
00:03:48,914 --> 00:03:51,314
比如说我们的数据存放的一些路径

95
00:03:51,474 --> 00:03:52,234
最大连接数

96
00:03:52,234 --> 00:03:53,354
以及日志路径

97
00:03:53,514 --> 00:03:54,994
以及数据同步的端口

98
00:03:55,314 --> 00:03:57,154
以及主节点推举的一个端口

99
00:03:57,154 --> 00:03:59,194
以及我们的塞神超时间

100
00:03:59,194 --> 00:03:59,914
等等

101
00:04:00,194 --> 00:04:01,594
都可以给我们干嘛

102
00:04:01,594 --> 00:04:02,474
打印出来

103
00:04:02,474 --> 00:04:03,102
这就是中间的一些内容

104
00:04:04,090 --> 00:04:06,410
抗俘命令走你

105
00:04:06,530 --> 00:04:08,490
打开我们的命令横中端

106
00:04:08,490 --> 00:04:10,366
在命令横中端里边

107
00:04:11,322 --> 00:04:13,562
明朗人中段里边呢我们通过ECHO

108
00:04:13,562 --> 00:04:14,142
然后呢

109
00:04:14,142 --> 00:04:16,282
< No Speech >

110
00:04:16,282 --> 00:04:17,842
NC的这种方式

111
00:04:17,842 --> 00:04:21,662
然后localhost2181

112
00:04:21,662 --> 00:04:22,714
< No Speech >

113
00:04:22,714 --> 00:04:25,674
然后我们会发现你看他就会帮我们把我们

114
00:04:25,674 --> 00:04:27,674
他可以通过这种方式快速的

115
00:04:27,674 --> 00:04:28,794
< No Speech >

116
00:04:28,794 --> 00:04:30,114
要一些详细信息

117
00:04:30,114 --> 00:04:31,234
我们可以从这看到

118
00:04:31,234 --> 00:04:33,234
你看比如说端口号是不是

119
00:04:33,234 --> 00:04:34,954
以及我们数据的一些

120
00:04:34,994 --> 00:04:36,274
数据的一个路径

121
00:04:36,274 --> 00:04:37,554
我们也可以看得出来

122
00:04:37,954 --> 00:04:39,474
以及我们最大的连接数

123
00:04:39,474 --> 00:04:40,394
我们也能看出来

124
00:04:40,394 --> 00:04:43,114
以及我们当前的服务的一个ID

125
00:04:43,114 --> 00:04:44,634
以及我们当前

126
00:04:45,466 --> 00:04:47,026
这个Rookieper的一个集群

127
00:04:47,026 --> 00:04:48,626
他都给我们打印出来了

128
00:04:48,626 --> 00:04:50,146
你说但是小伙伴那儿

129
00:04:50,266 --> 00:04:51,386
如果说你在运营的时候

130
00:04:51,626 --> 00:04:52,746
他可能会报一个什么

131
00:04:53,386 --> 00:04:55,866
他可能会报一个NC这个命令

132
00:04:55,866 --> 00:04:56,706
不能用为什么

133
00:04:57,066 --> 00:04:57,906
因为这个NC

134
00:04:58,066 --> 00:04:59,306
他是来发送一个抢救

135
00:04:59,306 --> 00:05:01,182
如果说你没有安装NC的话

136
00:05:01,182 --> 00:05:02,522
< No Speech >

137
00:05:02,522 --> 00:05:05,242
老师的第二台机器里面应该没有装NC

138
00:05:05,242 --> 00:05:05,950
我们来试一下

139
00:05:06,810 --> 00:05:09,214
那你说我们在这个里边我们去执行什么呢

140
00:05:09,882 --> 00:05:11,882
下发线我们的NC

141
00:05:11,882 --> 00:05:15,042
然后localhost2181

142
00:05:15,042 --> 00:05:15,602
我们回车

143
00:05:15,602 --> 00:05:17,362
你会发现这个命令找不到

144
00:05:17,362 --> 00:05:18,202
怎么办呢

145
00:05:18,202 --> 00:05:18,682
不要怕

146
00:05:18,682 --> 00:05:19,870
我们直接通过

147
00:05:20,858 --> 00:05:22,378
通过YAM的这种方式

148
00:05:22,458 --> 00:05:25,978
我们直接安装一下NC这个命令

149
00:05:25,978 --> 00:05:26,538
GIRL1

150
00:05:27,178 --> 00:05:29,018
你把NC通过YAM的这种方式

151
00:05:29,018 --> 00:05:30,218
直接安装就可以

152
00:05:30,218 --> 00:05:32,830
安装完以后你再去执行的时候

153
00:05:32,830 --> 00:05:33,882
< No Speech >

154
00:05:33,882 --> 00:05:35,482
它是不是还是一样的

155
00:05:35,482 --> 00:05:36,842
可以给我们打印出来

156
00:05:36,842 --> 00:05:38,078
当前的我们这个人

157
00:05:38,810 --> 00:05:40,650
一个详细信息 ok

158
00:05:41,050 --> 00:05:42,970
完了之后我们再来看第二个

159
00:05:42,970 --> 00:05:43,934
炸片

160
00:05:44,602 --> 00:05:46,402
Cons

161
00:05:46,402 --> 00:05:49,682
那这个命令是用来输出当前这台计算机

162
00:05:49,682 --> 00:05:52,402
它的所有的客户端的连接

163
00:05:52,402 --> 00:05:55,882
就是你有哪些客户端正在连接我们这个Rookieper

164
00:05:55,882 --> 00:05:59,922
你可以通过这个Cons可以快速的看出来

165
00:05:59,922 --> 00:06:01,374
来这里我们加一个

166
00:06:02,330 --> 00:06:07,570
Cons回车你会发现原来只有一个客户端正在连接我们这个Rookieper

167
00:06:07,570 --> 00:06:12,210
我们通过这种私自命令可以快速的去访问Rookieper的一些信息

168
00:06:12,210 --> 00:06:13,370
OK 我们继续

169
00:06:13,370 --> 00:06:16,170
然后还有一个叫R U OK

170
00:06:16,170 --> 00:06:17,930
你看这个R U OK比较好玩

171
00:06:17,930 --> 00:06:21,970
它其实相当于英语里边的谐音R U OK

172
00:06:21,970 --> 00:06:23,090
就是你还好吗

173
00:06:23,090 --> 00:06:25,470
就是我们通过这种方式我们来问问

174
00:06:26,202 --> 00:06:28,442
R U OK 你还好吗 你还愿意相争吗

175
00:06:28,442 --> 00:06:30,562
但是这个R U OK它有点问题

176
00:06:30,562 --> 00:06:31,390
什么问题呢

177
00:06:31,962 --> 00:06:34,242
耳游给完了之后他说没问题

178
00:06:34,362 --> 00:06:37,882
但是他有可能是服务可能出现问题

179
00:06:37,882 --> 00:06:39,998
但是这个我们还是可以看出来

180
00:06:40,954 --> 00:06:43,154
所以说这个小伙伴你在工作中的时候

181
00:06:43,154 --> 00:06:46,514
不要通过这个四字命令里面来判定你的rootkeeper

182
00:06:46,514 --> 00:06:48,154
他到底运行没有运行

183
00:06:48,154 --> 00:06:49,118
OK 我们来试一下

184
00:06:49,118 --> 00:06:50,298
< No Speech >

185
00:06:50,298 --> 00:06:53,278
我们往上返回一步

186
00:06:53,278 --> 00:06:55,738
< No Speech >

187
00:06:55,738 --> 00:06:57,738
R U OK这种方式

188
00:06:57,738 --> 00:06:59,058
我们可以看到有一个

189
00:06:59,058 --> 00:07:00,862
I am OK有个字

190
00:07:01,402 --> 00:07:04,282
这代表的是我们这个Rookkeeper它服务正在运行中

191
00:07:04,282 --> 00:07:06,642
但是有时候你的Rookkeeper服务器它挂掉之后

192
00:07:06,642 --> 00:07:08,442
这个它也是能打印出来的

193
00:07:08,442 --> 00:07:10,762
比如说这个命令它不是很准确

194
00:07:10,762 --> 00:07:12,670
我们再来看一个非常准确的

195
00:07:13,402 --> 00:07:14,802
Stand这个命令

196
00:07:14,802 --> 00:07:16,922
那这个命令呢在四字命令里边呢

197
00:07:16,922 --> 00:07:18,442
经常会去使用到

198
00:07:18,442 --> 00:07:20,222
我们可以通过这个stand

199
00:07:20,922 --> 00:07:26,422
来查看一下我们当前我们这个rootkeeper的一些运行状态的一些信息

200
00:07:26,422 --> 00:07:28,622
比如说我们这个rootkeeper的一些版本啊

201
00:07:28,622 --> 00:07:30,222
以及打包的信息啊

202
00:07:30,222 --> 00:07:31,462
运行的角色呀

203
00:07:31,462 --> 00:07:34,662
以及我们这个集群节点的个数啊

204
00:07:34,662 --> 00:07:35,322
等等等等

205
00:07:35,322 --> 00:07:37,022
我们都可以给他打印出来

206
00:07:37,022 --> 00:07:37,422
然后呢

207
00:07:37,422 --> 00:07:38,702
我们打开我们的code1啊

208
00:07:38,702 --> 00:07:39,342
在这个里边呢

209
00:07:39,342 --> 00:07:40,702
我们可以通过使用

210
00:07:41,210 --> 00:07:42,890
Stand这个命令呢

211
00:07:42,890 --> 00:07:44,830
来看一下我们当前这个

212
00:07:45,754 --> 00:07:47,354
它的一个具体的一个信息

213
00:07:48,090 --> 00:07:50,530
这块可以给我们显示出来我们是QQ的一个版本

214
00:07:50,530 --> 00:07:51,358
以及

215
00:07:51,994 --> 00:07:53,654
我们的一个Q端连接

216
00:07:53,654 --> 00:07:55,854
当然我们还可以看到我们当前有多少个

217
00:07:55,854 --> 00:07:56,734
Rookieper的集群

218
00:07:56,734 --> 00:07:57,774
有多少个连接

219
00:07:57,774 --> 00:07:59,654
以及当前你这个Rookieper

220
00:07:59,654 --> 00:08:01,494
你是一个什么角色

221
00:08:01,494 --> 00:08:03,094
都给我们显示出来了

222
00:08:03,094 --> 00:08:04,174
非常的清晰

223
00:08:04,174 --> 00:08:04,654
OK

224
00:08:04,654 --> 00:08:07,742
我们可以通过stand这个名额来看到我们Rookieper

225
00:08:08,410 --> 00:08:10,010
运行式的一个什么呢

226
00:08:10,010 --> 00:08:11,250
运行的一个状态

227
00:08:11,490 --> 00:08:12,090
OK

228
00:08:12,090 --> 00:08:16,062
最后我们还有一个叫Mntr

229
00:08:17,018 --> 00:08:19,518
用的是最后我们再去做

230
00:08:19,518 --> 00:08:23,198
Rookieper一些集群关键项数据统计的时候

231
00:08:23,198 --> 00:08:25,238
我们就可以通过使用这个方式

232
00:08:25,238 --> 00:08:29,078
使用这个四字命令来看一些具体的一个什么

233
00:08:29,078 --> 00:08:30,758
关键项的一些指标

234
00:08:30,758 --> 00:08:32,158
比如说我们Rookieper的版本

235
00:08:32,158 --> 00:08:33,558
比如说最大的平均数

236
00:08:33,558 --> 00:08:34,638
最小的延迟数

237
00:08:34,638 --> 00:08:37,038
以及我们数据包发送量连接数

238
00:08:37,038 --> 00:08:38,678
以及我们Rookieper的角色

239
00:08:38,678 --> 00:08:40,838
在这个统计数据里面我们全能看到

240
00:08:40,838 --> 00:08:42,118
M N T R

241
00:08:42,118 --> 00:08:42,494
我们来看看

242
00:08:43,130 --> 00:08:45,086
我们来试一下 我们可以通过

243
00:08:45,086 --> 00:08:46,362
< No Speech >

244
00:08:46,362 --> 00:08:48,362
MNTR的这种方式

245
00:08:48,362 --> 00:08:50,874
< No Speech >

246
00:08:50,874 --> 00:08:56,394
我们可以看到所有的统计结果都在这里面给我们显示出来了

247
00:08:56,394 --> 00:09:00,074
这就是我们以上全部的四次命令的一个内容

248
00:09:00,074 --> 00:09:02,474
但是在这个四次命令中比较多

249
00:09:02,474 --> 00:09:04,634
我们用的比较多的其实就是抗服

250
00:09:04,634 --> 00:09:05,950
以及这个

251
00:09:06,874 --> 00:09:09,794
我们可以看到我们扣段的连接

252
00:09:09,794 --> 00:09:13,594
以及我们可以通过stand来看到我们集群的一个状态

253
00:09:13,594 --> 00:09:15,954
当然了如果说你需要去看一些

254
00:09:15,954 --> 00:09:18,474
我们这个rootkeeper它的一个性能指标的时候

255
00:09:18,474 --> 00:09:21,194
你就可以通过mntr的这种方式

256
00:09:21,194 --> 00:09:24,434
来输出我们rootkeeper里边最大的平均的

257
00:09:24,434 --> 00:09:26,110
以及最小延迟数的一些平均的数据

258
00:09:26,618 --> 00:09:29,698
来统计我家我们这个rootkeeper它的一个性能

259
00:09:29,698 --> 00:09:31,858
OK那以上呢就是我们全部啊

260
00:09:31,858 --> 00:09:34,818
我们rootkeeper里边四字命令的全部内容了

261
00:09:34,818 --> 00:09:37,418
我们在结束之前呢我们再做一个练习题

262
00:09:37,418 --> 00:09:38,818
在这个rootkeeper技术中

263
00:09:38,818 --> 00:09:41,418
我们该如何通过四字命令的这种方式呢

264
00:09:41,418 --> 00:09:44,698
查看我们rootkeeper相关的服务器的配置信息

265
00:09:44,698 --> 00:09:46,178
肯定是conf是不是

266
00:09:46,178 --> 00:09:48,178
所以说呢我们来看看这里哪一个是conf

267
00:09:48,178 --> 00:09:49,338
啊c啊

268
00:09:49,338 --> 00:09:51,578
所以说地铁啊我们应该选择的是c

269
00:09:51,578 --> 00:09:53,338
第二个啊在我们这个rootkeeper技术中

270
00:09:53,338 --> 00:09:56,058
我们该如何通过四字命令这种方式呢

271
00:09:56,058 --> 00:10:00,938
获得到我们rootkeeper服务器运行时的状态信息

272
00:10:00,938 --> 00:10:03,618
记住是运行时的状态信息

273
00:10:03,618 --> 00:10:05,738
我们肯定是通过stand啊

274
00:10:05,738 --> 00:10:07,418
这个命令呢来看状态信息

275
00:10:07,418 --> 00:10:08,858
所以说呢第二道题啊

276
00:10:08,858 --> 00:10:10,818
我们应该是选择的是d

277
00:10:10,818 --> 00:10:11,378
好了

278
00:10:11,378 --> 00:10:14,338
那这节课呢我们讲解rootkeeper的四字命令啊

279
00:10:14,338 --> 00:10:15,486
到这就结束了

